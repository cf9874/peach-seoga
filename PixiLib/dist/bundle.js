!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.typed-array.uint8-array.js"),require("core-js/modules/es.typed-array.copy-within.js"),require("core-js/modules/es.typed-array.every.js"),require("core-js/modules/es.typed-array.fill.js"),require("core-js/modules/es.typed-array.filter.js"),require("core-js/modules/es.typed-array.find.js"),require("core-js/modules/es.typed-array.find-index.js"),require("core-js/modules/es.typed-array.for-each.js"),require("core-js/modules/es.typed-array.includes.js"),require("core-js/modules/es.typed-array.index-of.js"),require("core-js/modules/es.typed-array.iterator.js"),require("core-js/modules/es.typed-array.join.js"),require("core-js/modules/es.typed-array.last-index-of.js"),require("core-js/modules/es.typed-array.map.js"),require("core-js/modules/es.typed-array.reduce.js"),require("core-js/modules/es.typed-array.reduce-right.js"),require("core-js/modules/es.typed-array.reverse.js"),require("core-js/modules/es.typed-array.set.js"),require("core-js/modules/es.typed-array.slice.js"),require("core-js/modules/es.typed-array.some.js"),require("core-js/modules/es.typed-array.sort.js"),require("core-js/modules/es.typed-array.subarray.js"),require("core-js/modules/es.typed-array.to-locale-string.js"),require("core-js/modules/es.typed-array.to-string.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.object.freeze.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.array.fill.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/web.url.js"),require("core-js/modules/web.url-search-params.js"),require("core-js/modules/es.array.from.js"),require("core-js/modules/es.set.js"),require("core-js/modules/es.string.anchor.js")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es.object.to-string.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.function.name.js","core-js/modules/es.array.iterator.js","core-js/modules/es.typed-array.uint8-array.js","core-js/modules/es.typed-array.copy-within.js","core-js/modules/es.typed-array.every.js","core-js/modules/es.typed-array.fill.js","core-js/modules/es.typed-array.filter.js","core-js/modules/es.typed-array.find.js","core-js/modules/es.typed-array.find-index.js","core-js/modules/es.typed-array.for-each.js","core-js/modules/es.typed-array.includes.js","core-js/modules/es.typed-array.index-of.js","core-js/modules/es.typed-array.iterator.js","core-js/modules/es.typed-array.join.js","core-js/modules/es.typed-array.last-index-of.js","core-js/modules/es.typed-array.map.js","core-js/modules/es.typed-array.reduce.js","core-js/modules/es.typed-array.reduce-right.js","core-js/modules/es.typed-array.reverse.js","core-js/modules/es.typed-array.set.js","core-js/modules/es.typed-array.slice.js","core-js/modules/es.typed-array.some.js","core-js/modules/es.typed-array.sort.js","core-js/modules/es.typed-array.subarray.js","core-js/modules/es.typed-array.to-locale-string.js","core-js/modules/es.typed-array.to-string.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.split.js","core-js/modules/es.promise.js","core-js/modules/es.map.js","core-js/modules/es.string.iterator.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.array.map.js","core-js/modules/es.object.freeze.js","core-js/modules/es.number.constructor.js","core-js/modules/es.array.filter.js","core-js/modules/es.array.sort.js","core-js/modules/es.array.splice.js","core-js/modules/es.string.replace.js","core-js/modules/es.array.fill.js","core-js/modules/es.array.slice.js","core-js/modules/es.array.includes.js","core-js/modules/es.string.includes.js","core-js/modules/web.url.js","core-js/modules/web.url-search-params.js","core-js/modules/es.array.from.js","core-js/modules/es.set.js","core-js/modules/es.string.anchor.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).peach={})}(this,(function(t){"use strict";function e(t){var e=Math.floor(window.innerWidth/1920*10)/10;return e&&(e<.5?t-=6:e>=.5&&e<.7?t-=3:e>=.7&&e<1?t-=2:e>=1&&e<1.5?t+=0:e>=1.5&&(t+=Math.floor(e/.5))),t}var n,i,r,o,a,s,l,h,c,u,d,p,f,g,m,_,v,w,b,I,y,x,k,C,B,T=e(10),S=e(12),P=e(14),A=e(15),X=e(16),R=e(17),E=e(18),z=e(19),U=e(25),M=e(30),F=Object.freeze({WhiteTitle:{fill:"#ffffff",fontSize:E,fontfamily:"Noto Sans KR",fontWeight:"400"},Black12:{fill:"#000000",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"500"},Blue12:{fill:"#4183C4",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"500"},Black14:{fill:"#000000",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"500"},Black14_R:{fill:"#000000",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"400"},Black15_R:{fill:"#000000",fontSize:A,fontfamily:"Noto Sans KR",fontWeight:"400"},White15_R:{fill:"#ffffff",fontSize:A,fontfamily:"Noto Sans KR",fontWeight:"400"},Black16:{fill:"#000000",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"600"},Black16_R:{fill:"#000000",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"400"},Black3_16_R:{fill:"#333333",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"400"},Black18_R:{fill:"#000000",fontSize:E,fontfamily:"Noto Sans KR",fontWeight:"400"},Black17:{fill:"#000000",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"600"},Black19:{fill:"#000000",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"700"},Black30_R:{fill:"#000000",fontSize:M,fontfamily:"Noto Sans KR",fontWeight:"400"},Black25_R:{fill:"#000000",fontSize:U,fontfamily:"Noto Sans KR",fontWeight:"400"},Black17_R:{fill:"#000000",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"400"},Red17_R:{fill:"#E95C63",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"400"},Red17_M:{fill:"#E95C63",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"600"},Red16:{fill:"#E95C63",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"600"},Red14_R:{fill:"#E95C63",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"400"},Red19_R:{fill:"#E95C63",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"400"},Red19_M:{fill:"#E95C63",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"600"},Red19:{fill:"#E95C63",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"700"},Dark19_M:{fill:"#404040",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"600"},Black19_R:{fill:"#000000",fontSize:z,fontfamily:"Noto Sans KR",fontWeight:"400"},Black16_bold:{fill:"#000000",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"700"},Black14_bold:{fill:"#000000",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"700"},White14:{fill:"#ffffff",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"500"},White17:{fill:"#ffffff",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"500"},White17_M:{fill:"#ffffff",fontSize:R,fontfamily:"Noto Sans KR",fontWeight:"600"},White16:{fill:"#ffffff",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"500"},GrayTitle:{fill:"#707070",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"400"},Gray12_R:{fill:"#7c7c7c",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"400"},Gray12:{fill:"#7c7c7c",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"500"},Gray14:{fill:"#7c7c7c",fontSize:P,fontfamily:"Noto Sans KR",fontWeight:"500"},line16:{fill:"#dadada",fontSize:X,fontfamily:"Noto Sans KR",fontWeight:"500"},White12:{fill:"#ffffff",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"500"},White12_R:{fill:"#ffffff",fontSize:S,fontfamily:"Noto Sans KR",fontWeight:"400"},White10_R:{fill:"#ffffff",fontSize:T,fontfamily:"Noto Sans KR",fontWeight:"400"}}),j=Object.freeze({bgBox:16382457,bgBoxBorder:14408667,line:14342874,handle:13816530,arrow:15395562,green:737863,red:15293539,button:14934497,white:16777215,Black:0,textGray:8158332,lightGray:15855856,Gray:14277081,vividGray:10987431}),L=F,O=j,N=window.require?window.require("electron").ipcRenderer:null,W=!1,G=function(){},D={width:{configurable:!0},isPrev:{configurable:!0},isGather:{configurable:!0},isPaint:{configurable:!0},isCard:{configurable:!0},isAudio:{configurable:!0},isBookmark:{configurable:!0},isQ:{configurable:!0},userName:{configurable:!0},height:{configurable:!0},paintMap:{configurable:!0},paintArr:{configurable:!0},isMenuHover:{configurable:!0},isFull:{configurable:!0},background:{configurable:!0},uiStage:{configurable:!0},errorStage:{configurable:!0},currentScene:{configurable:!0},ratioX:{configurable:!0},ratioY:{configurable:!0},app:{configurable:!0},errApp:{configurable:!0},paintStage:{configurable:!0},paint:{configurable:!0}};D.width.set=function(t){n=t},D.isPrev.set=function(t){m=t},D.isGather.set=function(t){_=t},D.isPaint.set=function(t){v=t},D.isCard.set=function(t){w=t},D.isAudio.set=function(t){b=t},D.isBookmark.set=function(t){I=t},D.isQ.set=function(t){y=t},D.userName.set=function(t){k=t},D.height.set=function(t){i=t},D.paintMap.set=function(t){C=t},D.paintArr.set=function(t){B=t},D.isMenuHover.set=function(t){x=t},D.isFull.set=function(t){void 0===t&&(t=!1),W=t},D.isFull.get=function(){return W},D.isMenuHover.get=function(){return x},D.paintArr.get=function(){return B},D.paintMap.get=function(){return C},D.isQ.get=function(){return y},D.isCard.get=function(){return w},D.isAudio.get=function(){return b},D.isBookmark.get=function(){return I},D.isPrev.get=function(){return m},D.isGather.get=function(){return _},D.isPaint.get=function(){return v},D.width.get=function(){return n},D.height.get=function(){return i},D.background.get=function(){return h},D.uiStage.get=function(){return c},D.errorStage.get=function(){},D.currentScene.get=function(){return u},D.height.get=function(){return i},D.ratioX.get=function(){return r},D.ratioY.get=function(){return o},D.app.get=function(){return a},D.errApp.get=function(){},D.paintStage.get=function(){return s},D.paint.get=function(){return l},G.backGroundOFF=function(){h.visible=!1},G.backGroundON=function(){h.visible=!0},G.print=function(t){var e=t.copies,n=t.isColor,i=t.isWhole,r=document.getElementById("___gatsby"),o=document.getElementById("canvas_wraper"),a=document.getElementById("printable"),s=document.getElementById("pixi_canvas"),l=a.children,h=G.currentScene.viewer.getPageNum()-1;if(!i)for(var c=0;c<l.length;c++)c!==h&&(l[c].style.display="none");a.style.display="block",r&&(r.style.display="none"),o.style.display="block",p.style.display="none",s.style.display="none",window.onafterprint=this.afterPrint,N&&N.send("print",e+","+n),r&&(r.style.display="block"),o.style.display="block",N.on("result",(function(t,e){console.log("print result : ",e),"fail"===e&&(a.style.display="none",p.style.display="block",s.style.display="block")}))},G.paintApp=function(){d.width=p.width,d.height=p.height,d.style.marginLeft=p.style.marginLeft,d.style.marginTop=p.style.marginTop,l=new PIXI.Application({resolution:1,width:p.width,height:p.height,antialias:!0,view:d,transparent:!0}),s=new PIXI.UI.Stage(l.screen.width,l.screen.height);var t=PIXI.Texture.WHITE;(h=new PIXI.Sprite.from(t)).width=l.screen.width,h.height=l.screen.height,G.backGroundOFF(),l.stage.addChild(h),l.stage.addChild(s)},G.initialize=function(t){window.addEventListener("contextmenu",(function(t){t.preventDefault()})),window.addEventListener("keydown",(function(t){80!==t.keyCode||!t.ctrlKey&&!t.metaKey||t.altKey||t.shiftKey&&!window.chrome&&!window.opera||t.preventDefault()}),!0),window.addEventListener("keyup",(function(t){var e;"PrintScreen"===t.key&&((e=document.createElement("input")).setAttribute("value"," "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("보안정책에 따라 캡쳐할 수 없습니다."))})),window.addEventListener("focus",(function(){document.body.style.display="block"})),r=Math.floor(n/1920*1e4)/1e4,o=Math.floor(i/1080*1e4)/1e4;var e=document.createElement("div"),s=document.createElement("input"),l=document.createElement("input");s.id="page_input",s.style.display="none",l.id="speed_input",l.style.display="none",e.style.width="100%",e.id="canvas_wraper",e.style.height="100%",e.style.position="relative",g=document.createElement("canvas"),d=document.createElement("canvas"),p=document.createElement("canvas"),(f=document.createElement("div")).id="printable",d.style.display="none",g.id="pixi_canvas",d.id="paint_canvas",p.id="view-canvas",g.style.position=p.style.position=d.style.position="absolute",document.body.appendChild(f),document.body.appendChild(e),e.append(p,s,l,g,d),(a=new PIXI.Application({resolution:1,width:n,height:i,antialias:!0,view:g,transparent:!0})).ticker.speed=1.5,a.ticker.add(G.update),window.addEventListener("resize",G.resize),c=new PIXI.UI.Stage(a.screen.width,a.screen.height),a.stage.addChild(c);var h=function(t){var e=document.createElement("canvas");e.className="printable-canvas";var n=t.getViewport({scale:1});e.width=n.width,e.height=n.height,e.width>e.height?e.style.width="95%":e.style.height="95%";return t.render({canvasContext:e.getContext("2d"),viewport:t.getViewport({scale:1})}).promise.then((function(){var i=e.getContext("2d");i.globalAlpha=.5,i.font="24px serif";var r=k;return void 0===r&&(r="김다은"),i.fillText(r,1*n.width-150,35),i.fillText(t._pageIndex+1,1200,850),e}))};window["pdfjs-dist/build/pdf"].getDocument(t).promise.then((function(t){for(var e=t,n=[],i=new Map;n.length<e.numPages;)n.push(n.length+1);return Promise.all(n.map((function(t){return e.getPage(t).then(h).then((function(n){if(i.set(t,n),i.size===e.numPages){for(var r=1;r<=e.numPages;++r){var o=i.get(r),a=document.createElement("div");a.style="page-break-before:always",a.style.margin="0px",a.style.textAlign="center",document.body.appendChild(a),f.append(a),a.append(o)}f.style.display="none"}}))})))}))},G.changeScene=function(t){u&&c.removeChild(u.con),u=t,c.addChild(u.con)},G.update=function(t){u&&u.update(t)},G.resize=function(){u&&u.resize(n,i)},G.beforePrint=function(){},G.afterPrint=function(){var t=document.getElementById("printable"),e=document.getElementById("pixi_canvas"),n=t.children;e.style.display="block",p.style.display="block";for(var i=0;i<n.length;i++)n[i].style.display="block";t.style.display="none"},Object.defineProperties(G,D);var H=document.getElementById("peach-bundle").getAttribute("data-api-host-url")+"/";var Y=function(t){var e=null;if(document.cookie){var n=document.cookie.split(escape(t)+"=");if(n.length>=2){var i=n[1].split(";");e=unescape(i[0])}}return null!==(e=JSON.parse(e))&&(fetch(H+"v2/account/detail",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then((function(t){return t.json()})).then((function(t){0===t.code&&(G.userName=t.data.account.id)})),e=e.token),e}("access_token");function q(t,e,n,i){try{fetch(H+e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer "+Y,pragma:"no-cache","cache-control":"no-cache"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){i(t)}))}catch(t){console.log(t)}}function Z(t,e,n){try{fetch(H+e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer "+Y,pragma:"no-cache","cache-control":"no-cache"}}).then((function(t){return t.json()})).then((function(t){n(t)}))}catch(t){console.log(t)}}function K(t,e,n,i){return new Promise((function(r,o){return fetch(H+e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer "+Y,pragma:"no-cache","cache-control":"no-cache"},body:JSON.stringify(n)}).then((function(t){t.blob().then((function(t){i(t)}))})).catch((function(t){console.error(t)})),r()}))}function V(t,e,n,i){fetch(H+e,{method:t,headers:{Authorization:"Bearer "+Y,pragma:"no-cache","cache-control":"no-cache"},body:n}).then((function(t){return t.json()})).then((function(t){i(t)})).catch((function(t){console.error(t)}))}function Q(t,e){Z("GET","v2/illust/board/raws?page_number=1&take_number=0&order_number=1&search_number=3001&search_keyword="+t,e)}function $(t,e,n){q("DELETE","v2/story/bookmark",{story_number:t,page_numbers:e},n)}function J(t,e){Z("GET","admin/v2/raw/story/detail?raw_number="+t,e)}function tt(t,e,n){K("POST","v2/story/bookmark",{story_number:t,page_numbers:e},n)}function et(t,e,n,i){Z("GET","admin/v2/raw/voice/board?page_number="+t+"&take_number=15&order_number="+e+"&search_number=2001&search_keyword="+n,i)}function nt(t,e,n){q("PUT","admin/v2/raw/story/status",{raw_number:t,raw_status:e},n)}var it="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function rt(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function ot(t,e){return t(e={exports:{}},e.exports),e.exports}var at=ot((function(t,e){!function(){var t=function(){this.init()};t.prototype={init:function(){var t=this||n;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||n;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,n.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var r=e._howls[i]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[i]._soundById(r[o]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||n;e.ctx||c(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,n.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var r=e._howls[i]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[i]._soundById(r[o]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||n,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||n,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||n)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||n;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||n,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",o=r.match(/OPR\/([0-6].)/g),a=o&&parseInt(o[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),l=r.match(/Version\/(.*?) /),h=s&&l&&parseInt(l[1],10)<15;return t._codecs={mp3:!(a||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(h||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(h||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||n;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,t._releaseHtml5Audio(i)}catch(e){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),a=0;a<o.length;a++){var s=t._howls[r]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||n;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||n;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&n.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&n.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var n=new t,i=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(t){var e=this;return n.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=n.usingWebAudio&&!e._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(n.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var o,s;if(t._format&&t._format[i])o=t._format[i];else{if("string"!=typeof(s=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(s))||(o=/\.([^.]+)$/.exec(s.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&n.codecs(o)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new r(t),t._webAudio&&a(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var o=0,a=0;a<i._sounds.length;a++)i._sounds[a]._paused&&!i._sounds[a]._ended&&(o++,r=i._sounds[a]._id);1===o?t=null:r=null}}var s=r?i._soundById(r):i._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==i._state){s._sprite=t,s._ended=!1;var l=s._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(r&&!s._paused)return e||i._loadQueue("play"),s._id;i._webAudio&&n._autoResume();var h=Math.max(0,s._seek>0?s._seek:i._sprite[t][0]/1e3),c=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),u=1e3*c/Math.abs(s._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var f=function(){s._paused=!1,s._seek=h,s._start=d,s._stop=p,s._loop=!(!s._loop&&!i._sprite[t][2])};if(!(h>=p)){var g=s._node;if(i._webAudio){var m=function(){i._playLock=!1,f(),i._refreshBuffer(s);var t=s._muted||i._muted?0:s._volume;g.gain.setValueAtTime(t,n.ctx.currentTime),s._playStart=n.ctx.currentTime,void 0===g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,h,86400):g.bufferSource.noteGrainOn(0,h,c):s._loop?g.bufferSource.start(0,h,86400):g.bufferSource.start(0,h,c),u!==1/0&&(i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),u)),e||setTimeout((function(){i._emit("play",s._id),i._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(s._id))}else{var _=function(){g.currentTime=h,g.muted=s._muted||i._muted||n._muted||g.muted,g.volume=s._volume*n.volume(),g.playbackRate=s._rate;try{var r=g.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(i._playLock=!0,f(),r.then((function(){i._playLock=!1,g._unlocked=!0,e?i._loadQueue():i._emit("play",s._id)})).catch((function(){i._playLock=!1,i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",s._id)),g.playbackRate=s._rate,g.paused)return void i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),u):(i._endTimers[s._id]=function(){i._ended(s),g.removeEventListener("ended",i._endTimers[s._id],!1)},g.addEventListener("ended",i._endTimers[s._id],!1))}catch(t){i._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=i._src,g.load());var v=window&&window.ejecta||!g.readyState&&n._navigator.isCocoonJS;if(g.readyState>=3||v)_();else{i._playLock=!0,i._state="loading";var w=function(){i._state="loaded",_(),g.removeEventListener(n._canPlayEvent,w,!1)};g.addEventListener(n._canPlayEvent,w,!1),i._clearTimer(s._id)}}return s._id}i._ended(s)},pause:function(t){var e=arguments,n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(t)}}),n;for(var i=n._getSoundIds(t),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);if(o&&!o._paused&&(o._seek=n.seek(i[r]),o._rateSeek=0,o._paused=!0,n._stopFade(i[r]),o._node))if(n._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();e[1]||n._emit("pause",o?o._id:null)}return n},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var r=i._getSoundIds(e),o=0;o<r.length;o++){var a=i._soundById(r[o]);a&&(a._muted=t,a._interval&&i._stopFade(a._id),i._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,n.ctx.currentTime):a._node&&(a._node.muted=!!n._muted||t),i._emit("mute",a._id))}return i},volume:function(){var t,e,i,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?r._soundById(e):r._sounds[0])?i._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var l=0;l<e.length;l++)(i=r._soundById(e[l]))&&(i._volume=t,o[2]||r._stopFade(e[l]),r._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,n.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*n.volume()),r._emit("volume",i._id));return r},fade:function(t,e,i,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,i,r)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),o.volume(t,r);for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if(r||o._stopFade(a[s]),o._webAudio&&!l._muted){var h=n.ctx.currentTime,c=h+i/1e3;l._volume=t,l._node.gain.setValueAtTime(t,h),l._node.gain.linearRampToValueAtTime(e,c)}o._startFadeInterval(l,t,e,i,a[s],void 0===r)}}return o},_startFadeInterval:function(t,e,n,i,r,o){var a=this,s=e,l=n-e,h=Math.abs(l/.01),c=Math.max(4,h>0?i/h:i),u=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var r=(Date.now()-u)/i;u=Date.now(),s+=l*r,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;t=r[0],i._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=i._getSoundIds(e),a=0;a<o.length;a++)(n=i._soundById(o[a]))&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(o[a])&&(i.pause(o[a],!0),i.play(o[a],!0)))));return i},rate:function(){var t,e,i,r=this,o=arguments;if(0===o.length)e=r._sounds[0]._id;else if(1===o.length){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(i=r._soundById(e))?i._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var l=0;l<e.length;l++)if(i=r._soundById(e[l])){r.playing(e[l])&&(i._rateSeek=r.seek(e[l]),i._playStart=r._webAudio?n.ctx.currentTime:i._playStart),i._rate=t,r._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,n.ctx.currentTime):i._node&&(i._node.playbackRate=t);var h=r.seek(e[l]),c=(r._sprite[i._sprite][0]+r._sprite[i._sprite][1])/1e3-h,u=1e3*c/Math.abs(i._rate);!r._endTimers[e[l]]&&i._paused||(r._clearTimer(e[l]),r._endTimers[e[l]]=setTimeout(r._ended.bind(r,i),u)),r._emit("rate",i._id)}return r},seek:function(){var t,e,i=this,r=arguments;if(0===r.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===r.length){var o=i._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var s=i._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var l=i.playing(e)?n.ctx.currentTime-s._playStart:0,h=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(h+l*Math.abs(s._rate))}return s._node.currentTime}var c=i.playing(e);c&&i.pause(e,!0),s._seek=t,s._ended=!1,i._clearTimer(e),i._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var u=function(){c&&i.play(e,!0),i._emit("seek",e)};if(c&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):u()};setTimeout(d,0)}else u()}return i},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,i=e._soundById(t);return i&&(n=e._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(n._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),n._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var r=n._howls.indexOf(t);r>=0&&n._howls.splice(r,1);var a=!0;for(i=0;i<n._howls.length;i++)if(n._howls[i]._src===t._src||t._src.indexOf(n._howls[i]._src)>=0){a=!1;break}return o&&a&&delete o[t._src],n.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,i){var r=this["_on"+t];return"function"==typeof e&&r.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),this},off:function(t,e,n){var i=this,r=i["_on"+t],o=0;if("number"==typeof e&&(n=e,e=null),e||n)for(o=0;o<r.length;o++){var a=n===r[o].id;if(e===r[o].fn&&a||!e&&a){r.splice(o,1);break}}else if(t)i["_on"+t]=[];else{var s=Object.keys(i);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(i[s[o]])&&(i[s[o]]=[])}return i},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var i=this,r=i["_on"+t],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,r[o].fn),0),r[o].once&&i.off(t,r[o].fn,r[o].id));return i._loadQueue(t),i},_loadQueue:function(t){var e=this;if(e._queue.length>0){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=n.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),n._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new r(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=n.ctx.createBufferSource(),t._node.bufferSource.buffer=o[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,n.ctx.currentTime),this},_cleanBuffer:function(t){var e=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=n._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(t){this._parent=t,this.init()};r.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=n._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),t._node.gain.setValueAtTime(i,n.ctx.currentTime),t._node.paused=!0,t._node.connect(n.masterGain)):n.noAudio||(t._node=n._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(n._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*n.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(n._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var o={},a=function(t){var e=t._src;if(o[e])return t._duration=o[e].duration,void h(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);l(i.buffer,t)}else{var a=new XMLHttpRequest;a.open(t._xhr.method,e,!0),a.withCredentials=t._xhr.withCredentials,a.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){a.setRequestHeader(e,t._xhr.headers[e])})),a.onload=function(){var e=(a.status+"")[0];"0"===e||"2"===e||"3"===e?l(a.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete o[e],t.load())},s(a)}},s=function(t){try{t.send()}catch(e){t.onerror()}},l=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(o[e._src]=t,h(e,t)):i()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(t).then(r).catch(i):n.ctx.decodeAudioData(t,r,i)},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(t){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),e=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!r&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};e.Howler=n,e.Howl=i,void 0!==it?(it.HowlerGlobal=t,it.Howler=n,it.Howl=i,it.Sound=r):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=i,window.Sound=r)}(),function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t?i._pos:(i._pos=[t,e,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,n,i,r,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return e="number"!=typeof e?s[1]:e,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,o="number"!=typeof o?s[5]:o,"number"!=typeof t?s:(a._orientation=[t,e,n,i,r,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,e,n,i,r,o),a)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return i._stereo;i._stereo=t,i._pos=[t,0,0]}for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",s._id)}}return i},Howl.prototype.pos=function(t,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,i,r)}}),o;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===r){if("number"!=typeof t)return o._pos;o._pos=[t,n,i]}for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,i],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(t,n,i)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,i,r)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,i="number"!=typeof i?o._orientation[2]:i,void 0===r){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,i]}for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,i)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,i,r=this,o=arguments;if(!r._webAudio)return r;if(0===o.length)return r._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(i=r._soundById(parseInt(o[0],10)))?i._pannerAttr:r._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=r._getSoundIds(n),s=0;s<a.length;s++)if(i=r._soundById(a[s])){var l=i._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var h=i._panner;h?(h.coneInnerAngle=l.coneInnerAngle,h.coneOuterAngle=l.coneOuterAngle,h.coneOuterGain=l.coneOuterGain,h.distanceModel=l.distanceModel,h.maxDistance=l.maxDistance,h.refDistance=l.refDistance,h.rolloffFactor=l.rolloffFactor,h.panningModel=l.panningModel):(i._pos||(i._pos=r._pos||[0,0,-.5]),e(i,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}));at.Howler;var st=at.Howl;function lt(t,e){var n=G.ratioX,i=G.ratioY,r=new PIXI.Texture.from("Q_icon"),o=new PIXI.UI.Sprite(r);o.tint=O.red;var a=new PIXI.Texture.from("circle"),s=new PIXI.UI.Sprite(a);function l(){this.dragging=!1,this.data=null}o.circle=s,o.x=230*n,o.y=60*i,o.mather=e,o.title=t,s.width=s.height=40*n,o.width=o.height=20*n,s.tint=O.red,s.alpha=.5,s.visible=!1,s.pivot=.2,o.addChild(s),o.sprite.interactive=!0,o.sprite.buttonMode=!0,o.pivot=.5,o.relatePos={x:0,y:0},o.sprite.on("mousedown",(function(t){this.data=t.data,this.dragging=!0})).on("mouseup",l).on("mouseupoutside",l).on("mousemove",(function(){if(this.dragging){var t=this.data.getLocalPosition(this.parent.parent.parent),e=t.x-c,n=t.y-p;o.relatePos={x:e/u,y:n/d};var i=this.data.getLocalPosition(this.parent);this.x=s.x=i.x,this.y=s.y=i.y}})).on("pointerover",(function(){o.mather.tint=O.red})).on("pointerout",(function(){o.mather.tint=O.line}));var h=document.getElementById("view-canvas"),c=h.style.marginLeft,u=h.width,d=h.height;c=parseFloat(c);var p=h.style.marginTop;return p=parseFloat(p),o}var ht=function(t){function e(e){var n=G.app.renderer.generateTexture(e);t.call(this,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite),ct=function(t){return G.app.renderer.generateTexture(t)},ut=function(t){function e(e,n,i){var r=new PIXI.Graphics;r.beginFill(i),r.drawRect(0,0,e,n),r.endFill();var o=G.app.renderer.generateTexture(r);t.call(this,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite),dt=function(t){function e(e,n){t.call(this,PIXI.Texture.WHITE),this.tint=0,this.alpha=.8,this.width=e,this.height=n,this.sprite.interactive=!0,this.sprite.buttonMode=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite);PIXI.UI.Sprite;var pt,ft,gt,mt,_t,vt,wt,bt,It,yt,xt,kt,Ct=function(t){function e(e,n,i,r){var o=new PIXI.Graphics;o.lineStyle(r,e,1,0),o.drawRect(0,0,n,i),o.endFill();var a=G.app.renderer.generateTexture(o);t.call(this,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite);function Bt(t,e){void 0===e&&(e=16777215);var n=new PIXI.Graphics;return n.lineStyle(2,e),n.moveTo(0,0),n.lineTo(t,t),n.moveTo(t,0),n.lineTo(0,t),n.endFill(),G.app.renderer.generateTexture(n)}var Tt,St,Pt,At,Xt,Rt=!1,Et=60,zt=function(){},Ut={title:{configurable:!0},hlHeight:{configurable:!0},story_tag:{configurable:!0},pdf:{configurable:!0},isSaved:{configurable:!0},isFirst:{configurable:!0},thumb_texture:{configurable:!0},story_num:{configurable:!0},raw_num:{configurable:!0},state:{configurable:!0},cardArr:{configurable:!0},isHidden:{configurable:!0},viewHeight:{configurable:!0},cards:{configurable:!0},data:{configurable:!0},cardData:{configurable:!0},audioArr:{configurable:!0},audioData:{configurable:!0},pageNum:{configurable:!0},viewWidth:{configurable:!0}};Ut.title.set=function(t){pt=t},Ut.hlHeight.set=function(t){Et=t},Ut.story_tag.set=function(t){St=t},Ut.pdf.set=function(t){ft=t},Ut.isSaved.set=function(t){gt=t},Ut.isFirst.set=function(t){Rt=t},Ut.thumb_texture.set=function(t){mt=t},Ut.story_num.set=function(t){_t=t},Ut.raw_num.set=function(t){Tt=t},Ut.state.set=function(t){Pt=t},Ut.cardArr.set=function(t){It=t},Ut.isHidden.set=function(t){At=t},Ut.isHidden.get=function(){return At},Ut.viewHeight.get=function(){return 1070},Ut.cards.get=function(){return Xt},Ut.state.get=function(){return Pt},Ut.hlHeight.get=function(){return Et},Ut.thumb_texture.get=function(){return mt},Ut.story_tag.get=function(){return St},Ut.raw_num.get=function(){return Tt},Ut.story_num.get=function(){return _t},Ut.pdf.get=function(){return ft},Ut.title.get=function(){return pt},Ut.data.get=function(){return vt},Ut.cardData.get=function(){return wt},Ut.audioArr.get=function(){return bt},Ut.cardArr.get=function(){return It},Ut.audioData.get=function(){return yt},Ut.pageNum.get=function(){return xt},Ut.viewWidth.set=function(t){kt=t},Ut.viewWidth.get=function(){return kt},Ut.isSaved.get=function(){return gt},Ut.isFirst.get=function(){return Rt},zt.saveCardData=function(){console.log(It);var t=It;gt=!0,wt=[];for(var e=[],n=0;n<t.length;n++){for(var i=t[n],r=new Array(xt),o=0;o<i.list.length;o++){var a=i.list[o];void 0!==a&&(r[o]={relatePos:a.relatePos})}wt[n]={uuid:i.uuid,title:i.title,list:r},e.push(i.uuid)}Xt=JSON.stringify(e)},zt.saveAudioData=function(){for(var t=[],e=new Array(xt),n=0,i=0;i<bt.length;i++){for(var r=bt[i],o=0;o<r.length;o++){0==o&&(e[i]=n);var a=r[o],s=void 0,l=void 0;void 0===a.hl?(s=null,l=null):(s=a.hl.endPos,l=a.hl.startPos),t.push({num:i,uuid:a.uuid,title:a.title,duration:a.duration,howl:null,endPos:s,startPos:l}),n++}0===r.length&&(e[i]=null)}yt={playlist:t,idx:e}},zt.initialize=function(t){void 0===t&&(t={}),vt=t,wt=t.cardList||[],yt=t.audioList||{},bt=[],It=[],gt=!1},zt.rollbackArray=function(){var t=document.getElementById("view-canvas"),e=t.style.marginLeft;e=parseFloat(e);var n=t.style.marginTop;n=parseFloat(n);for(var i=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),r=0;r<wt.length;r++){var o=wt[r],a=new PIXI.Texture.from(i+"/"+o.uuid),s=new PIXI.UI.Sprite(a);s.list=new Array(o.list.length),s.title=o.title,s.uuid=o.uuid;for(var l=0;l<o.list.length;l++){var h=o.list[l];if(null!==h){var c=lt(s.title,null);c.relatePos=h.relatePos,c.x=h.relatePos.x*t.width+e,c.y=h.relatePos.y*t.height+n,s.list[l]=c}}It.push(s)}var u=new PIXI.Graphics;void 0!==yt.playlist&&yt.playlist.forEach((function(r){var o=void 0;if(void 0!==r.startPos&&null!==r.startPos){var a=r.startPos.x*t.width,s=r.startPos.y*t.height,l=r.endPos.x*t.width,h=r.endPos.y*t.height;u.clear(),u.beginFill(O.red,.5),u.drawRoundedRect(0,0,l-a,h-s,5),u.endFill(),(o=new ht(u)).x=a+e,o.y=s+n,o.startPos=r.startPos,o.endPos=r.endPos}bt[r.num].push({uuid:r.uuid,sound:new st({src:[i+"/"+r.uuid],html5:!0,volume:0}),duration:r.duration,title:r.title,hl:o})}))},zt.initArray=function(t){xt=t;for(var e=0;e<t;e++)bt.push([])},zt.setData=function(){vt.title=pt,vt.cardList=wt,vt.audioList=yt},Object.defineProperties(zt,Ut);var Mt=ot((function(t,e){t.exports=function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){if(!s&&rt)return rt();if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};e[a][0].call(h.exports,(function(t){return r(e[a][1][t]||t)}),h,h.exports,t,e,n,i)}return n[a].exports}for(var o=rt,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,a,s,l,h,c=[],u=0,d=t.length,p=d,f="string"!==i.getTypeOf(t);u<t.length;)p=d-u,r=f?(e=t[u++],n=u<d?t[u++]:0,u<d?t[u++]:0):(e=t.charCodeAt(u++),n=u<d?t.charCodeAt(u++):0,u<d?t.charCodeAt(u++):0),a=e>>2,s=(3&e)<<4|n>>4,l=1<p?(15&n)<<2|r>>6:64,h=2<p?63&r:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(h));return c.join("")},n.decode=function(t){var e,n,i,a,s,l,h=0,c=0,u="data:";if(t.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&p--,t.charAt(t.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=r.uint8array?new Uint8Array(0|p):new Array(0|p);h<t.length;)e=o.indexOf(t.charAt(h++))<<2|(a=o.indexOf(t.charAt(h++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(h++)))>>2,i=(3&s)<<6|(l=o.indexOf(t.charAt(h++))),d[c++]=e,64!==s&&(d[c++]=n),64!==l&&(d[c++]=i);return d}},{"./support":30,"./utils":32}],2:[function(t,e,n){var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}s.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new a("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}(0|e,t,t.length,0):function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=i?"uint8array":"array";function l(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,a,c){var u,d,p=t.file,f=t.compression,g=c!==s.utf8encode,m=o.transformTo("string",c(p.name)),_=o.transformTo("string",s.utf8encode(p.name)),v=p.comment,w=o.transformTo("string",c(v)),b=o.transformTo("string",s.utf8encode(v)),I=_.length!==p.name.length,y=b.length!==v.length,x="",k="",C="",B=p.dir,T=p.date,S={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(S.crc32=t.crc32,S.compressedSize=t.compressedSize,S.uncompressedSize=t.uncompressedSize);var P=0;e&&(P|=8),g||!I&&!y||(P|=2048);var A=0,X=0;B&&(A|=16),"UNIX"===a?(X=798,A|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,B)):(X=20,A|=function(t){return 63&(t||0)}(p.dosPermissions)),u=T.getUTCHours(),u<<=6,u|=T.getUTCMinutes(),u<<=5,u|=T.getUTCSeconds()/2,d=T.getUTCFullYear()-1980,d<<=4,d|=T.getUTCMonth()+1,d<<=5,d|=T.getUTCDate(),I&&(k=i(1,1)+i(l(m),4)+_,x+="up"+i(k.length,2)+k),y&&(C=i(1,1)+i(l(w),4)+b,x+="uc"+i(C.length,2)+C);var R="";return R+="\n\0",R+=i(P,2),R+=f.magic,R+=i(u,2),R+=i(d,2),R+=i(S.crc32,4),R+=i(S.compressedSize,4),R+=i(S.uncompressedSize,4),R+=i(m.length,2),R+=i(x.length,2),{fileRecord:h.LOCAL_FILE_HEADER+R+m+x,dirRecord:h.CENTRAL_FILE_HEADER+i(X,2)+R+i(w.length,2)+"\0\0\0\0"+i(A,4)+i(r,4)+m+x+w}}var o=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),l=t("../crc32"),h=t("../signature");function c(t,e,n,i){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return h.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,a){var s=o.transformTo("string",a(r));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,n){a++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},l=n.dir,h=n.date;n._compressWorker(r,s).withStreamInfo("file",{name:t,dir:l,date:h,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.7.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){var i=t("./utils"),r=t("./external"),o=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function h(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new s);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new a(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(h(i[o]));return r.Promise.all(n)})).then((function(t){for(var i=t.shift(),r=i.files,o=0;o<r.length;o++){var a=r[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){function i(t,e,n){var i,r=o.getTypeOf(e),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=f(t))&&m.call(this,i,!0);var u="string"===r&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!u),(e instanceof h&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",r="string");var _=null;_=e instanceof h||e instanceof a?e:d.isNode&&d.isStream(e)?new p(t,e):o.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var v=new c(t,_,s);this.files[t]=v}var r=t("./utf8"),o=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),l=t("./defaults"),h=t("./compressedObject"),c=t("./zipObject"),u=t("./generate"),d=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:l.createFolders,t=g(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(_(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(_(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=m.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=u.generateWorker(this,n,i)}catch(t){(e=new a("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new s(t):r.uint8array?new l(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,n){var i=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),l=t("../external"),h=null;if(s.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e){return new l.Promise((function(n,r){var o=[],s=t._internalType,l=t._outputType,h=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return i.transformTo(t,e)}}(l,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,o),h);n(t)}catch(t){r(t)}o=[]})).resume()}))}function u(t,e,n){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=n,i.checkSupport(a),this._worker=t.pipe(new r(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}u.prototype={accumulate:function(t){return c(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function h(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,a=t.length,l=new Array(2*a);for(e=n=0;e<a;)if((r=t[e++])<128)l[n++]=r;else if(4<(o=s[r]))l[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<a;)r=r<<6|63&t[e++],o--;1<o?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(h,a),h.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}(e),l=e;a!==e.length&&(r.uint8array?(l=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(l=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,i.inherits(c,a),c.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),a=t("set-immediate-shim"),s=t("./external");function l(t){return t}function h(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function u(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=c.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return c.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=u;var p={};p.string={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,o.allocBuffer(t.length))}},p.array={string:u,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},p.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return o.newBufferFrom(t)}},p.nodebuffer={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:l},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return p[i][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){a((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n=arguments,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])n[t].hasOwnProperty(e)&&void 0===i[e]&&(i[e]=n[t][e]);return i},n.prepareContent=function(t,e,o,a,l){return s.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var c=n.getTypeOf(e);return c?("arraybuffer"===c?e=n.transformTo("uint8array",e):"string"===c&&(l?e=r.decode(e):o&&!0!==a&&(e=function(t){return h(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),l=t("./compressions"),h=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),l=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<h.length;u++)i.prototype[h[u]]=c;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var h=[];function c(){var t,e;i=!0;for(var n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}i=!1}e.exports=function(t){1!==h.push(t)||i||n()}}).call(this,void 0!==it?it:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){var i=t("immediate");function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var a=f((function(){e(r,i)}));"error"===a.status&&i(a.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=h).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(r);return this.state!==l?u(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){u(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){u(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},h.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},h.reject=function(t){var e=new this(r);return o.reject(e,t)},h.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,h=new this(r);++l<n;)c(t[l],l);return h;function c(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==n||i||(i=!0,o.resolve(h,a))}),(function(t){i||(i=!0,o.reject(h,t))}))}},h.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(r);++s<n;)a=t[s],e.resolve(a).then((function(t){i||(i=!0,o.resolve(l,t))}),(function(t){i||(i=!0,o.reject(l,t))}));return l}},{immediate:36}],38:[function(t,e,n){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),l=Object.prototype.toString,h=0,c=-1,u=0,d=8;function p(t){if(!(this instanceof p))return new p(t);this.options=r.assign({level:c,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(a[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,f))!==h)throw new Error(a[n]);this._dict_set=!0}}function f(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(t,e){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=i.deflate(s,a))&&n!==h)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==a||(this.onEnd(h),!(s.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),l=t("./zlib/zstream"),h=t("./zlib/gzheader"),c=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(t,e){var n,s,l,h,u,d,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(f),p.next_out=0,p.avail_out=f),(n=i.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(d="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===c.call(g)?new Uint8Array(g):g,n=i.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),h=p.next_out-l,u=o.buf2string(p.output,l),p.next_out=h,p.avail_out=f-h,h&&r.arraySet(p.output,p.output,l,h,0),this.onData(u)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(p.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=u,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,a;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],a.set(o,r),r+=o.length;return a}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,n.string2buf=function(t){var e,n,r,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,s=e||t.length,h=new Array(2*s);for(n=i=0;n<s;)if((r=t[n++])<128)h[i++]=r;else if(4<(o=a[r]))h[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<s;)r=r<<6|63&t[n++],o--;1<o?h[i++]=65533:r<65536?h[i++]=r:(r-=65536,h[i++]=55296|r>>10&1023,h[i++]=56320|1023&r)}return l(h,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--a;);r%=65521,o%=65521}return r|o<<16|0}},{}],44:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],46:[function(t,e,n){var i,r=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),l=t("./messages"),h=0,c=4,u=0,d=-2,p=-1,f=4,g=2,m=8,_=9,v=286,w=30,b=19,I=2*v+1,y=15,x=3,k=258,C=k+x+1,B=42,T=113,S=1,P=2,A=3,X=4;function R(t,e){return t.msg=l[e],e}function E(t){return(t<<1)-(4<t?9:0)}function z(t){for(var e=t.length;0<=--e;)t[e]=0}function U(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function M(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,U(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function j(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-C?t.strstart-(t.w_size-C):0,h=t.window,c=t.w_mask,u=t.prev,d=t.strstart+k,p=h[o+a-1],f=h[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(h[(n=e)+a]===f&&h[n+a-1]===p&&h[n]===h[o]&&h[++n]===h[o+1]){o+=2,n++;do{}while(h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&o<d);if(i=k-(d-o),o=d-k,a<i){if(t.match_start=e,s<=(a=i))break;p=h[o+a-1],f=h[o+a]}}}while((e=u[e&c])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function O(t){var e,n,i,o,l,h,c,u,d,p,f=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-C)){for(r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=n=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--n;);for(e=n=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--n;);o+=f}if(0===t.strm.avail_in)break;if(h=t.strm,c=t.window,u=t.strstart+t.lookahead,p=void 0,(d=o)<(p=h.avail_in)&&(p=d),n=0===p?0:(h.avail_in-=p,r.arraySet(c,h.input,h.next_in,p,u),1===h.state.wrap?h.adler=a(h.adler,c,p,u):2===h.state.wrap&&(h.adler=s(h.adler,c,p,u)),h.next_in+=p,h.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=x)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+x-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<C&&0!==t.strm.avail_in)}function N(t,e){for(var n,i;;){if(t.lookahead<C){if(O(t),t.lookahead<C&&e===h)return S;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-C&&(t.match_length=L(t,n)),t.match_length>=x)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(M(t,!1),0===t.strm.avail_out))return S}return t.insert=t.strstart<x-1?t.strstart:x-1,e===c?(M(t,!0),0===t.strm.avail_out?A:X):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?S:P}function W(t,e){for(var n,i,r;;){if(t.lookahead<C){if(O(t),t.lookahead<C&&e===h)return S;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-C&&(t.match_length=L(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-x,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(M(t,!1),0===t.strm.avail_out))return S}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&M(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return S}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===c?(M(t,!0),0===t.strm.avail_out?A:X):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?S:P}function G(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*I),this.dyn_dtree=new r.Buf16(2*(2*w+1)),this.bl_tree=new r.Buf16(2*(2*b+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(y+1),this.heap=new r.Buf16(2*v+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*v+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?B:T,t.adler=2===e.wrap?0:1,e.last_flush=h,o._tr_init(e),u):R(t,d)}function Y(t){var e=H(t);return e===u&&function(t){t.window_size=2*t.w_size,z(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function q(t,e,n,i,o,a){if(!t)return d;var s=1;if(e===p&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),o<1||_<o||n!==m||i<8||15<i||e<0||9<e||a<0||f<a)return R(t,d);8===i&&(i=9);var l=new D;return(t.state=l).strm=t,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,Y(t)}i=[new G(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(O(t),0===t.lookahead&&e===h)return S;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,M(t,!1),0===t.strm.avail_out))return S;if(t.strstart-t.block_start>=t.w_size-C&&(M(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===c?(M(t,!0),0===t.strm.avail_out?A:X):(t.strstart>t.block_start&&(M(t,!1),t.strm.avail_out),S)})),new G(4,4,8,4,N),new G(4,5,16,8,N),new G(4,6,32,32,N),new G(4,4,16,16,W),new G(8,16,32,32,W),new G(8,16,128,128,W),new G(8,32,128,256,W),new G(32,128,258,1024,W),new G(32,258,258,4096,W)],n.deflateInit=function(t,e){return q(t,e,m,15,8,0)},n.deflateInit2=q,n.deflateReset=Y,n.deflateResetKeep=H,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?d:(t.state.gzhead=e,u):d},n.deflate=function(t,e){var n,r,a,l;if(!t||!t.state||5<e||e<0)return t?R(t,d):d;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==c)return R(t,0===t.avail_out?-5:d);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===B)if(2===r.wrap)t.adler=0,F(r,31),F(r,139),F(r,8),r.gzhead?(F(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),F(r,255&r.gzhead.time),F(r,r.gzhead.time>>8&255),F(r,r.gzhead.time>>16&255),F(r,r.gzhead.time>>24&255),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(F(r,255&r.gzhead.extra.length),F(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=s(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(F(r,0),F(r,0),F(r,0),F(r,0),F(r,0),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,3),r.status=T);else{var p=m+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=T,j(r,p),0!==r.strstart&&(j(r,t.adler>>>16),j(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),U(t),a=r.pending,r.pending!==r.pending_buf_size));)F(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),U(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,F(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),U(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,F(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&U(t),r.pending+2<=r.pending_buf_size&&(F(r,255&t.adler),F(r,t.adler>>8&255),t.adler=0,r.status=T)):r.status=T),0!==r.pending){if(U(t),0===t.avail_out)return r.last_flush=-1,u}else if(0===t.avail_in&&E(e)<=E(n)&&e!==c)return R(t,-5);if(666===r.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==h&&666!==r.status){var f=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(O(t),0===t.lookahead)){if(e===h)return S;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(M(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===c?(M(t,!0),0===t.strm.avail_out?A:X):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?S:P}(r,e):3===r.strategy?function(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=k){if(O(t),t.lookahead<=k&&e===h)return S;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=t.strstart+k;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);t.match_length=k-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(n=o._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(M(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===c?(M(t,!0),0===t.strm.avail_out?A:X):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?S:P}(r,e):i[r.level].func(r,e);if(f!==A&&f!==X||(r.status=666),f===S||f===A)return 0===t.avail_out&&(r.last_flush=-1),u;if(f===P&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(z(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),U(t),0===t.avail_out))return r.last_flush=-1,u}return e!==c?u:r.wrap<=0?1:(2===r.wrap?(F(r,255&t.adler),F(r,t.adler>>8&255),F(r,t.adler>>16&255),F(r,t.adler>>24&255),F(r,255&t.total_in),F(r,t.total_in>>8&255),F(r,t.total_in>>16&255),F(r,t.total_in>>24&255)):(j(r,t.adler>>>16),j(r,65535&t.adler)),U(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?u:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==B&&69!==e&&73!==e&&91!==e&&103!==e&&e!==T&&666!==e?R(t,d):(t.state=null,e===T?R(t,-3):u):d},n.deflateSetDictionary=function(t,e){var n,i,o,s,l,h,c,p,f=e.length;if(!t||!t.state)return d;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==B||n.lookahead)return d;for(1===s&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(z(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new r.Buf8(n.w_size),r.arraySet(p,e,f-n.w_size,n.w_size,0),e=p,f=n.w_size),l=t.avail_in,h=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,O(n);n.lookahead>=x;){for(i=n.strstart,o=n.lookahead-(x-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+x-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=x-1,O(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,t.next_in=h,t.input=c,t.avail_in=l,n.wrap=s,u},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){e.exports=function(t,e){var n,i,r,o,a,s,l,h,c,u,d,p,f,g,m,_,v,w,b,I,y,x,k,C,B;n=t.state,i=t.next_in,C=t.input,r=i+(t.avail_in-5),o=t.next_out,B=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,h=n.wsize,c=n.whave,u=n.wnext,d=n.window,p=n.hold,f=n.bits,g=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{f<15&&(p+=C[i++]<<f,f+=8,p+=C[i++]<<f,f+=8),w=g[p&_];e:for(;;){if(p>>>=b=w>>>24,f-=b,0==(b=w>>>16&255))B[o++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=g[(65535&w)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}I=65535&w,(b&=15)&&(f<b&&(p+=C[i++]<<f,f+=8),I+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=C[i++]<<f,f+=8,p+=C[i++]<<f,f+=8),w=m[p&v];n:for(;;){if(p>>>=b=w>>>24,f-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=m[(65535&w)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(y=65535&w,f<(b&=15)&&(p+=C[i++]<<f,(f+=8)<b&&(p+=C[i++]<<f,f+=8)),l<(y+=p&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,f-=b,(b=o-a)<y){if(c<(b=y-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=d,(x=0)===u){if(x+=h-b,b<I){for(I-=b;B[o++]=d[x++],--b;);x=o-y,k=B}}else if(u<b){if(x+=h+u-b,(b-=u)<I){for(I-=b;B[o++]=d[x++],--b;);if(x=0,u<I){for(I-=b=u;B[o++]=d[x++],--b;);x=o-y,k=B}}}else if(x+=u-b,b<I){for(I-=b;B[o++]=d[x++],--b;);x=o-y,k=B}for(;2<I;)B[o++]=k[x++],B[o++]=k[x++],B[o++]=k[x++],I-=3;I&&(B[o++]=k[x++],1<I&&(B[o++]=k[x++]))}else{for(x=o-y;B[o++]=B[x++],B[o++]=B[x++],B[o++]=B[x++],2<(I-=3););I&&(B[o++]=B[x++],1<I&&(B[o++]=B[x++]))}break}}break}}while(i<r&&o<s);i-=I=f>>3,p&=(1<<(f-=I<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=f}},{}],49:[function(t,e,n){var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),l=1,h=2,c=0,u=-2,d=1,p=852,f=592;function g(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(p),e.distcode=e.distdyn=new i.Buf32(f),e.sane=1,e.back=-1,c):u}function v(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,_(t)):u}function w(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?u:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,v(t))):u}function b(t,e){var n,i;return t?(i=new m,(t.state=i).window=null,(n=w(t,e))!==c&&(t.state=null),n):u}var I,y,x=!0;function k(t){if(x){var e;for(I=new i.Buf32(512),y=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(l,t.lens,0,288,I,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(h,t.lens,0,32,y,0,t.work,{bits:5}),x=!1}t.lencode=I,t.lenbits=9,t.distcode=y,t.distbits=5}function C(t,e,n,r){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r<(o=a.wsize-a.wnext)&&(o=r),i.arraySet(a.window,e,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,e,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=v,n.inflateReset2=w,n.inflateResetKeep=_,n.inflateInit=function(t){return b(t,15)},n.inflateInit2=b,n.inflate=function(t,e){var n,p,f,m,_,v,w,b,I,y,x,B,T,S,P,A,X,R,E,z,U,M,F,j,L=0,O=new i.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(n=t.state).mode&&(n.mode=13),_=t.next_out,f=t.output,w=t.avail_out,m=t.next_in,p=t.input,v=t.avail_in,b=n.hold,I=n.bits,y=v,x=w,M=c;t:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;I<16;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(2&n.wrap&&35615===b){O[n.check=0]=255&b,O[1]=b>>>8&255,n.check=o(n.check,O,2,0),I=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){t.msg="unknown compression method",n.mode=30;break}if(I-=4,U=8+(15&(b>>>=4)),0===n.wbits)n.wbits=U;else if(U>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<U,t.adler=n.check=1,n.mode=512&b?10:12,I=b=0;break;case 2:for(;I<16;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(n.flags=b,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(O[0]=255&b,O[1]=b>>>8&255,n.check=o(n.check,O,2,0)),I=b=0,n.mode=3;case 3:for(;I<32;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.head&&(n.head.time=b),512&n.flags&&(O[0]=255&b,O[1]=b>>>8&255,O[2]=b>>>16&255,O[3]=b>>>24&255,n.check=o(n.check,O,4,0)),I=b=0,n.mode=4;case 4:for(;I<16;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(O[0]=255&b,O[1]=b>>>8&255,n.check=o(n.check,O,2,0)),I=b=0,n.mode=5;case 5:if(1024&n.flags){for(;I<16;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(O[0]=255&b,O[1]=b>>>8&255,n.check=o(n.check,O,2,0)),I=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(v<(B=n.length)&&(B=v),B&&(n.head&&(U=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,p,m,B,U)),512&n.flags&&(n.check=o(n.check,p,B,m)),v-=B,m+=B,n.length-=B),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break t;for(B=0;U=p[m+B++],n.head&&U&&n.length<65536&&(n.head.name+=String.fromCharCode(U)),U&&B<v;);if(512&n.flags&&(n.check=o(n.check,p,B,m)),v-=B,m+=B,U)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break t;for(B=0;U=p[m+B++],n.head&&U&&n.length<65536&&(n.head.comment+=String.fromCharCode(U)),U&&B<v;);if(512&n.flags&&(n.check=o(n.check,p,B,m)),v-=B,m+=B,U)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;I<16;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(b!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}I=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;I<32;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}t.adler=n.check=g(b),I=b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=v,n.hold=b,n.bits=I,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){b>>>=7&I,I-=7&I,n.mode=27;break}for(;I<3;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}switch(n.last=1&b,I-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6!==e)break;b>>>=2,I-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}b>>>=2,I-=2;break;case 14:for(b>>>=7&I,I-=7&I;I<32;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,I=b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(B=n.length){if(v<B&&(B=v),w<B&&(B=w),0===B)break t;i.arraySet(f,p,m,B,_),v-=B,m+=B,w-=B,_+=B,n.length-=B;break}n.mode=12;break;case 17:for(;I<14;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(n.nlen=257+(31&b),b>>>=5,I-=5,n.ndist=1+(31&b),b>>>=5,I-=5,n.ncode=4+(15&b),b>>>=4,I-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;I<3;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.lens[N[n.have++]]=7&b,b>>>=3,I-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},M=s(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,M){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;A=(L=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,X=65535&L,!((P=L>>>24)<=I);){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(X<16)b>>>=P,I-=P,n.lens[n.have++]=X;else{if(16===X){for(j=P+2;I<j;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(b>>>=P,I-=P,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}U=n.lens[n.have-1],B=3+(3&b),b>>>=2,I-=2}else if(17===X){for(j=P+3;I<j;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}I-=P,U=0,B=3+(7&(b>>>=P)),b>>>=3,I-=3}else{for(j=P+7;I<j;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}I-=P,U=0,B=11+(127&(b>>>=P)),b>>>=7,I-=7}if(n.have+B>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;B--;)n.lens[n.have++]=U}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},M=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,M){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},M=s(h,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,M){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=v&&258<=w){t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=v,n.hold=b,n.bits=I,a(t,x),_=t.next_out,f=t.output,w=t.avail_out,m=t.next_in,p=t.input,v=t.avail_in,b=n.hold,I=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;A=(L=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,X=65535&L,!((P=L>>>24)<=I);){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(A&&0==(240&A)){for(R=P,E=A,z=X;A=(L=n.lencode[z+((b&(1<<R+E)-1)>>R)])>>>16&255,X=65535&L,!(R+(P=L>>>24)<=I);){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}b>>>=R,I-=R,n.back+=R}if(b>>>=P,I-=P,n.back+=P,n.length=X,0===A){n.mode=26;break}if(32&A){n.back=-1,n.mode=12;break}if(64&A){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&A,n.mode=22;case 22:if(n.extra){for(j=n.extra;I<j;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,I-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;A=(L=n.distcode[b&(1<<n.distbits)-1])>>>16&255,X=65535&L,!((P=L>>>24)<=I);){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(0==(240&A)){for(R=P,E=A,z=X;A=(L=n.distcode[z+((b&(1<<R+E)-1)>>R)])>>>16&255,X=65535&L,!(R+(P=L>>>24)<=I);){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}b>>>=R,I-=R,n.back+=R}if(b>>>=P,I-=P,n.back+=P,64&A){t.msg="invalid distance code",n.mode=30;break}n.offset=X,n.extra=15&A,n.mode=24;case 24:if(n.extra){for(j=n.extra;I<j;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,I-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===w)break t;if(B=x-w,n.offset>B){if((B=n.offset-B)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}T=B>n.wnext?(B-=n.wnext,n.wsize-B):n.wnext-B,B>n.length&&(B=n.length),S=n.window}else S=f,T=_-n.offset,B=n.length;for(w<B&&(B=w),w-=B,n.length-=B;f[_++]=S[T++],--B;);0===n.length&&(n.mode=21);break;case 26:if(0===w)break t;f[_++]=n.length,w--,n.mode=21;break;case 27:if(n.wrap){for(;I<32;){if(0===v)break t;v--,b|=p[m++]<<I,I+=8}if(x-=w,t.total_out+=x,n.total+=x,x&&(t.adler=n.check=n.flags?o(n.check,f,x,_-x):r(n.check,f,x,_-x)),x=w,(n.flags?b:g(b))!==n.check){t.msg="incorrect data check",n.mode=30;break}I=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;I<32;){if(0===v)break t;v--,b+=p[m++]<<I,I+=8}if(b!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}I=b=0}n.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;default:return u}return t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=v,n.hold=b,n.bits=I,(n.wsize||x!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&C(t,t.output,t.next_out,x-t.avail_out)?(n.mode=31,-4):(y-=t.avail_in,x-=t.avail_out,t.total_in+=y,t.total_out+=x,n.total+=x,n.wrap&&x&&(t.adler=n.check=n.flags?o(n.check,f,x,t.next_out-x):r(n.check,f,x,t.next_out-x)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==y&&0===x||4===e)&&M===c&&(M=-5),M)},n.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,c},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?u:((n.head=e).done=!1,c):u},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?u:11===n.mode&&r(1,e,i,0)!==n.check?-3:C(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,c):u},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,h,c,u,d){var p,f,g,m,_,v,w,b,I,y=d.bits,x=0,k=0,C=0,B=0,T=0,S=0,P=0,A=0,X=0,R=0,E=null,z=0,U=new i.Buf16(16),M=new i.Buf16(16),F=null,j=0;for(x=0;x<=15;x++)U[x]=0;for(k=0;k<l;k++)U[e[n+k]]++;for(T=y,B=15;1<=B&&0===U[B];B--);if(B<T&&(T=B),0===B)return h[c++]=20971520,h[c++]=20971520,d.bits=1,0;for(C=1;C<B&&0===U[C];C++);for(T<C&&(T=C),x=A=1;x<=15;x++)if(A<<=1,(A-=U[x])<0)return-1;if(0<A&&(0===t||1!==B))return-1;for(M[1]=0,x=1;x<15;x++)M[x+1]=M[x]+U[x];for(k=0;k<l;k++)0!==e[n+k]&&(u[M[e[n+k]]++]=k);if(v=0===t?(E=F=u,19):1===t?(E=r,z-=257,F=o,j-=257,256):(E=a,F=s,-1),x=C,_=c,P=k=R=0,g=-1,m=(X=1<<(S=T))-1,1===t&&852<X||2===t&&592<X)return 1;for(;;){for(w=x-P,I=u[k]<v?(b=0,u[k]):u[k]>v?(b=F[j+u[k]],E[z+u[k]]):(b=96,0),p=1<<x-P,C=f=1<<S;h[_+(R>>P)+(f-=p)]=w<<24|b<<16|I|0,0!==f;);for(p=1<<x-1;R&p;)p>>=1;if(0!==p?(R&=p-1,R+=p):R=0,k++,0==--U[x]){if(x===B)break;x=e[n+u[k]]}if(T<x&&(R&m)!==g){for(0===P&&(P=T),_+=C,A=1<<(S=x-P);S+P<B&&!((A-=U[S+P])<=0);)S++,A<<=1;if(X+=1<<S,1===t&&852<X||2===t&&592<X)return 1;h[g=R&m]=T<<24|S<<16|_-c|0}}return 0!==R&&(h[_+R]=x-P<<24|64<<16|0),d.bits=T,0}},{"../utils/common":41}],51:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){var i=t("../utils/common"),r=0,o=1;function a(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,l=29,h=256,c=h+1+l,u=30,d=19,p=2*c+1,f=15,g=16,m=7,_=256,v=16,w=17,b=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(c+2));a(C);var B=new Array(2*u);a(B);var T=new Array(512);a(T);var S=new Array(256);a(S);var P=new Array(l);a(P);var A,X,R,E=new Array(u);function z(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function U(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function M(t){return t<256?T[t]:T[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,n){t.bi_valid>g-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>g-t.bi_valid,t.bi_valid+=n-g):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function L(t,e,n){j(t,n[2*e],n[2*e+1])}function O(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function N(t,e,n){var i,r,o=new Array(f+1),a=0;for(i=1;i<=f;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=O(o[s]++,s))}}function W(t){var e;for(e=0;e<c;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*_]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function D(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function H(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&D(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!D(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function Y(t,e,n){var i,r,o,a,s=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],r=t.pending_buf[t.l_buf+s],s++,0===i?L(t,r,e):(L(t,(o=S[r])+h+1,e),0!==(a=I[o])&&j(t,r-=P[o],a),L(t,o=M(--i),n),0!==(a=y[o])&&j(t,i-=E[o],a)),s<t.last_lit;);L(t,_,e)}function q(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=p,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=h=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1]);for(e.max_code=h,n=t.heap_len>>1;1<=n;n--)H(t,o,n);for(r=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,a,s,l=e.dyn_tree,h=e.max_code,c=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,m=e.stat_desc.max_length,_=0;for(o=0;o<=f;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<p;n++)m<(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)&&(o=m,_++),l[2*i+1]=o,h<i||(t.bl_count[o]++,a=0,g<=i&&(a=d[i-g]),s=l[2*i],t.opt_len+=s*(o+a),u&&(t.static_len+=s*(c[2*i+1]+a)));if(0!==_){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,_-=2}while(0<_);for(o=m;0!==o;o--)for(i=t.bl_count[o];0!==i;)h<(r=t.heap[--n])||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),N(o,h,t.bl_count)}function Z(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<h?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*v]++):s<=10?t.bl_tree[2*w]++:t.bl_tree[2*b]++,o=r,h=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4))}function K(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<l&&r===a)){if(s<h)for(;L(t,r,t.bl_tree),0!=--s;);else 0!==r?(r!==o&&(L(t,r,t.bl_tree),s--),L(t,v,t.bl_tree),j(t,s-3,2)):s<=10?(L(t,w,t.bl_tree),j(t,s-3,3)):(L(t,b,t.bl_tree),j(t,s-11,7));o=r,h=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4)}}a(E);var V=!1;function Q(t,e,n,r){j(t,(s<<1)+(r?1:0),3),function(t,e,n,r){G(t),r&&(F(t,n),F(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){V||(function(){var t,e,n,i,r,o=new Array(f+1);for(i=n=0;i<l-1;i++)for(P[i]=n,t=0;t<1<<I[i];t++)S[n++]=i;for(S[n-1]=i,i=r=0;i<16;i++)for(E[i]=r,t=0;t<1<<y[i];t++)T[r++]=i;for(r>>=7;i<u;i++)for(E[i]=r<<7,t=0;t<1<<y[i]-7;t++)T[256+r++]=i;for(e=0;e<=f;e++)o[e]=0;for(t=0;t<=143;)C[2*t+1]=8,t++,o[8]++;for(;t<=255;)C[2*t+1]=9,t++,o[9]++;for(;t<=279;)C[2*t+1]=7,t++,o[7]++;for(;t<=287;)C[2*t+1]=8,t++,o[8]++;for(N(C,c+1,o),t=0;t<u;t++)B[2*t+1]=5,B[2*t]=O(t,5);A=new z(C,I,h+1,c,f),X=new z(B,y,0,u,f),R=new z(new Array(0),x,0,d,m)}(),V=!0),t.l_desc=new U(t.dyn_ltree,A),t.d_desc=new U(t.dyn_dtree,X),t.bl_desc=new U(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},n._tr_stored_block=Q,n._tr_flush_block=function(t,e,n,i){var a,s,l=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<h;e++)if(0!==t.dyn_ltree[2*e])return o;return r}(t)),q(t,t.l_desc),q(t,t.d_desc),l=function(t){var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),q(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*k[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==e?Q(t,e,n,i):4===t.strategy||s===a?(j(t,2+(i?1:0),3),Y(t,C,B)):(j(t,4+(i?1:0),3),function(t,e,n,i){var r;for(j(t,e-257,5),j(t,n-1,5),j(t,i-4,4),r=0;r<i;r++)j(t,t.bl_tree[2*k[r]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),Y(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&G(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(S[n]+h+1)]++,t.dyn_dtree[2*M(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){j(t,2,3),L(t,_,C),function(t){16===t.bi_valid?(F(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)})),Ft=ot((function(t){!function(){function e(t,e,n){return t.call.apply(t.bind,arguments)}function n(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function i(t,r,o){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:n).apply(null,arguments)}var r=Date.now||function(){return+new Date};function o(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var a=!!window.FontFace;function s(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function l(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,a=0;a<i.length;a+=1)if(e[r]===i[a]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[r]===n[a]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function d(t,e,n){function i(){c&&r&&o&&(c(h),c=null)}e=s(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,o=!0,h=null,c=n||null;a?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,h=Error("Stylesheet failed to load"),i()}):setTimeout((function(){r=!0,i()}),0),l(t,"head",e)}function p(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=s(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout((function(){a||(a=!0,n&&n(Error("Script load timeout")))}),i||5e3),o}return null}function f(){this.a=0,this.c=null}function g(t){return t.a++,function(){t.a--,_(t)}}function m(t,e){t.c=e,_(t)}function _(t){0==t.a&&t.c&&(t.c(),t.c=null)}function v(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function b(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function I(t){return t.a+t.f}function y(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function x(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function k(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new v("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function C(t){if(t.g){var e=u(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),c(t.f,n,i)}B(t,"inactive")}function B(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,I(n)):t.h[e]())}function T(){this.c={}}function S(t,e){this.c=t,this.f=e,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function P(t){l(t.c,"body",t.a)}function A(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.c)+";font-style:"+y(t)+";font-weight:"+t.f+"00;"}function X(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function R(t,e,n,i,r,o,a){this.v=t,this.B=e,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new S(this.c,this.s),this.h=new S(this.c,this.s),this.j=new S(this.c,this.s),this.m=new S(this.c,this.s),t=A(t=new w(this.a.c+",serif",I(this.a))),this.g.a.style.cssText=t,t=A(t=new w(this.a.c+",sans-serif",I(this.a))),this.h.a.style.cssText=t,t=A(t=new w("serif",I(this.a))),this.j.a.style.cssText=t,t=A(t=new w("sans-serif",I(this.a))),this.m.a.style.cssText=t,P(this.g),P(this.h),P(this.j),P(this.m)}v.prototype.c=function(t){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n.push(e[i].replace(/[\W_]+/g,"").toLowerCase());return n.join(this.a)},X.prototype.start=function(){var t=this.c.o.document,e=this,n=r(),i=new Promise((function(i,o){!function a(){r()-n>=e.f?o():t.fonts.load(function(t){return y(t)+" "+t.f+"00 300px "+b(t.c)}(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(a,25)}),(function(){o()}))}()})),o=null,a=new Promise((function(t,n){o=setTimeout(n,e.f)}));Promise.race([a,i]).then((function(){o&&(clearTimeout(o),o=null),e.g(e.a)}),(function(){e.j(e.a)}))};var E={D:"serif",C:"sans-serif"},z=null;function U(){if(null===z){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);z=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return z}function M(t,e,n){for(var i in E)if(E.hasOwnProperty(i)&&e===t.f[E[i]]&&n===t.f[E[i]])return!0;return!1}function F(t){var e,n=t.g.a.offsetWidth,o=t.h.a.offsetWidth;(e=n===t.f.serif&&o===t.f["sans-serif"])||(e=U()&&M(t,n,o)),e?r()-t.A>=t.w?U()&&M(t,n,o)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?j(t,t.v):j(t,t.B):function(t){setTimeout(i((function(){F(this)}),t),50)}(t):j(t,t.v)}function j(t,e){setTimeout(i((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),e(this.a)}),t),0)}function L(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),F(this)};var O=null;function N(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&c(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),B(t,"active")):C(t.a))}function W(t){this.j=t,this.a=new T,this.h=0,this.f=this.g=!0}function G(t,e,n,r,o){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=o||null,s=r||{};if(0===n.length&&a)C(e.a);else{e.f+=n.length,a&&(e.j=a);var l,h=[];for(l=0;l<n.length;l++){var u=n[l],d=s[u.c],p=e.a,f=u;if(p.g&&c(p.f,[p.a.c("wf",f.c,I(f).toString(),"loading")]),B(p,"fontloading",f),p=null,null===O)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);O=f?42<parseInt(f[1],10):!g}else O=!1;p=O?new X(i(e.g,e),i(e.h,e),e.c,u,e.s,d):new R(i(e.g,e),i(e.h,e),e.c,u,e.s,t,d),h.push(p)}for(l=0;l<h.length;l++)h[l].start()}}),0)}function D(t,e){this.c=t,this.a=e}function H(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t||q,this.a=[],this.f=[],this.g=e||""}L.prototype.g=function(t){var e=this.a;e.g&&c(e.f,[e.a.c("wf",t.c,I(t).toString(),"active")],[e.a.c("wf",t.c,I(t).toString(),"loading"),e.a.c("wf",t.c,I(t).toString(),"inactive")]),B(e,"fontactive",t),this.m=!0,N(this)},L.prototype.h=function(t){var e=this.a;if(e.g){var n=u(e.f,e.a.c("wf",t.c,I(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,I(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,I(t).toString(),"inactive")),c(e.f,i,r)}B(e,"fontinactive",t),N(this)},W.prototype.load=function(t){this.c=new o(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],r=n.timeout;!function(t){t.g&&c(t.f,[t.a.c("wf","loading")]),B(t,"loading")}(e);i=function(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}(t.a,n,t.c);var o=new L(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){G(t,o,e,n,i)}))}(this,new k(this.c,t),t)},D.prototype.load=function(t){function e(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),a=[];if(r)for(var s=0;s<r.length;s++){var l=r[s].fontfamily;null!=r[s].fontStyle&&null!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,a.push(new w(l,n))):a.push(new w(l))}t(a)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var o=n.c.o;p(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(r?"?v="+r:""),(function(r){r?t([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},H.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new f;for(e=0,n=i.length;e<n;e++)d(this.c,i[e],g(a));var s=[];for(e=0,n=r.length;e<n;e++)if((i=r[e].split(":"))[1])for(var l=i[1].split(","),h=0;h<l.length;h+=1)s.push(new w(i[0],l[h]));else s.push(new w(i[0]));m(a,(function(){t(s,o)}))};var q="https://fonts.googleapis.com/css";function Z(t){this.f=t,this.a=[],this.c={}}var K={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},V={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Q={i:"i",italic:"i",n:"n",normal:"n"},$=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function J(t,e){this.c=t,this.a=e}var tt={Arimo:!0,Cousine:!0,Tinos:!0};function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.f=e,this.a=[]}J.prototype.load=function(t){var e=new f,n=this.c,i=new Y(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}(i,r);var o=new Z(r);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var a;if(a=[],s=i[1])for(var s,l=(s=s.split(",")).length,h=0;h<l;h++){var c;if((c=s[h]).match(/^[\w-]+$/))if(null==(u=$.exec(c.toLowerCase())))c="";else{if(c=null==(c=u[2])||""==c?"n":Q[c],null==(u=u[1])||""==u)u="4";else var u=V[u]||(isNaN(u)?"4":u.substr(0,1));c=[c,u].join("")}else c="";c&&a.push(c)}0<a.length&&(o=a),3==i.length&&(a=[],0<(i=(i=i[2])?i.split(","):a).length&&(i=K[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=K[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new w(r,o[i]))}}(o),d(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),g(e)),m(e,(function(){t(o.a,o.c,tt)}))},et.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],a=e[r+1],s=0;s<a.length;s++)i.push(new w(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},nt.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var a=n.fonts[r];i.a.push(new w(a.name,x("font-weight:"+a.weight+";font-style:"+a.style)))}t(i.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var it=new W(window);it.a.c.custom=function(t,e){return new H(e,t)},it.a.c.fontdeck=function(t,e){return new nt(e,t)},it.a.c.monotype=function(t,e){return new D(e,t)},it.a.c.typekit=function(t,e){return new et(e,t)},it.a.c.google=function(t,e){return new J(e,t)};var rt={load:i(it.load,it)};t.exports?t.exports=rt:(window.WebFont=rt,window.WebFontConfig&&it.load(window.WebFontConfig))}()})),jt=[{name:"symbol",url:"/peachImage/symbol.png"},{name:"peach_logo_black",url:"/peachImage/peach_logo_black.png"},{name:"basicscreen_icon",url:"/peachImage/basicscreen_icon.png"},{name:"card_icon_new",url:"/peachImage/card_icon_new.png"},{name:"paint_icon_new",url:"/peachImage/paint_icon_new.png"},{name:"arrow_left_new",url:"/peachImage/arrow_left_new.png"},{name:"arrow_right_new",url:"/peachImage/arrow_right_new.png"},{name:"two_way_arrow_new",url:"/peachImage/two_way_arrow_new.png"},{name:"check_new",url:"/peachImage/check_new.png"},{name:"hex_stroke_new",url:"/peachImage/hex_stroke_new.png"},{name:"down",url:"/peachImage/btn-down-hov.png"},{name:"triangleR",url:"/peachImage/triangleR.png"},{name:"triangleL",url:"/peachImage/triangleL.png"},{name:"bookmark_icon",url:"/peachImage/bookmark_icon.png"},{name:"card_icon",url:"/peachImage/card_icon.png"},{name:"fullscreen_icon",url:"/peachImage/fullscreen_icon.png"},{name:"paint_icon",url:"/peachImage/paint_icon.png"},{name:"print_icon",url:"/peachImage/print_icon.png"},{name:"thumb_icon",url:"/peachImage/thumb_icon.png"},{name:"audio_icon",url:"/peachImage/audio_icon.png"},{name:"finish_icon",url:"/peachImage/finish_icon.png"},{name:"inputBox",url:"/peachImage/inputBox.png"},{name:"explain_icon",url:"/peachImage/explain_icon.png"},{name:"topBox",url:"/peachImage/top_rounded_rec.png"},{name:"manual_long",url:"/peachImage/manual_long.png"},{name:"rounded_rec",url:"/peachImage/rounded_rec.png"},{name:"prince",url:"/peachImage/prince.jpg"},{name:"after10",url:"/peachImage/after10.png"},{name:"audio_next",url:"/peachImage/audio_next.png"},{name:"audio_pause",url:"/peachImage/audio_pause.png"},{name:"audio_play",url:"/peachImage/audio_play.png"},{name:"audio_prev",url:"/peachImage/audio_prev.png"},{name:"before10",url:"/peachImage/before10.png"},{name:"hl_icon",url:"/peachImage/hl_icon.png"},{name:"pen_icon",url:"/peachImage/pen_icon.png"},{name:"shapes_icon",url:"/peachImage/shapes_icon.png"},{name:"Q_icon",url:"/peachImage/Q_icon.png"},{name:"bookmark",url:"/peachImage/bookmark.png"},{name:"bookmark_star",url:"/peachImage/bookmark_star.png"},{name:"select_icon",url:"/peachImage/select_icon.png"},{name:"trash_icon",url:"/peachImage/trash_icon.png"},{name:"text_icon",url:"/peachImage/text_icon.png"},{name:"save_icon",url:"/peachImage/save_icon.png"},{name:"eraser_icon",url:"/peachImage/eraser_icon.png"},{name:"speedBtn",url:"/peachImage/speedBtn.png"},{name:"check",url:"/peachImage/check.png"},{name:"circle",url:"/peachImage/circle.png"},{name:"btn25",url:"/peachImage/btn25.png"},{name:"border25",url:"/peachImage/border25.png"},{name:"shapes_tooltip",url:"/peachImage/shapes_tooltip.png"},{name:"arrow_left",url:"/peachImage/arrow_left.png"},{name:"arrow_right",url:"/peachImage/arrow_right.png"},{name:"cir",url:"/peachImage/cir.png"},{name:"cir_stroke",url:"/peachImage/cir_stroke.png"},{name:"hex_stroke",url:"/peachImage/hex_stroke.png"},{name:"gather_icon",url:"/peachImage/gather_icon.png"},{name:"hex",url:"/peachImage/hex.png"},{name:"listenAll",url:"/peachImage/listenAll.png"},{name:"rec_stroke",url:"/peachImage/rec_stroke.png"},{name:"rec",url:"/peachImage/rec.png"},{name:"star",url:"/peachImage/star.png"},{name:"star_stroke",url:"/peachImage/star_stroke.png"},{name:"tri_stroke",url:"/peachImage/tri_stroke.png"},{name:"tri",url:"/peachImage/tri.png"},{name:"two_way_arrow",url:"/peachImage/two_way_arrow.png"},{name:"btn22",url:"/peachImage/btn22.png"},{name:"color",url:"/peachImage/color.png"},{name:"tutorial_next",url:"/peachImage/tutorial_next.png"},{name:"tutorial_prev",url:"/peachImage/tutorial_prev.png"},{name:"tutorial_txt",url:"/peachImage/tutorial_txt.png"},{name:"tutorial_x",url:"/peachImage/tutorial_x.png"},{name:"tutorial1",url:"/peachImage/tutorial1.png"},{name:"tutorial2_1",url:"/peachImage/tutorial2_1.png"},{name:"tutorial2_2",url:"/peachImage/tutorial2_2.png"},{name:"tutorial2_3",url:"/peachImage/tutorial2_3.png"},{name:"tutorial2_4",url:"/peachImage/tutorial2_4.png"},{name:"tutorial2_5",url:"/peachImage/tutorial2_5.png"},{name:"tutorial2_6",url:"/peachImage/tutorial2_6.png"},{name:"tutorial2_7",url:"/peachImage/tutorial2_7.png"},{name:"tutorial3_1",url:"/peachImage/tutorial3_1.png"},{name:"tutorial3_2",url:"/peachImage/tutorial3_2.png"},{name:"tutorial3_3",url:"/peachImage/tutorial3_3.png"},{name:"tutorial3_4",url:"/peachImage/tutorial3_4.png"},{name:"tutorial4_1",url:"/peachImage/tutorial4_1.png"},{name:"tutorial4_2",url:"/peachImage/tutorial4_2.png"},{name:"tutorial5_1",url:"/peachImage/tutorial5_1.png"},{name:"tutorial5_2",url:"/peachImage/tutorial5_2.png"},{name:"tutorial6_1",url:"/peachImage/tutorial6_1.png"},{name:"tutorial6_2",url:"/peachImage/tutorial6_2.png"},{name:"tutorial7_1",url:"/peachImage/tutorial7_1.png"},{name:"tutorial7_2",url:"/peachImage/tutorial7_2.png"},{name:"tutorial8_1",url:"/peachImage/tutorial8_1.png"},{name:"tutorial8_2",url:"/peachImage/tutorial8_2.png"},{name:"tutorial9_1",url:"/peachImage/tutorial9_1.png"},{name:"tutorial9_2",url:"/peachImage/tutorial9_2.png"},{name:"asc",url:"/peachImage/asc.png"},{name:"dsc",url:"/peachImage/dsc.png"}],Lt=[{name:"symbol",url:"/peachImage/symbol.png"},{name:"peach_logo_black",url:"/peachImage/peach_logo_black.png"},{name:"basicscreen_icon",url:"/peachImage/basicscreen_icon.png"},{name:"card_icon_new",url:"/peachImage/card_icon_new.png"},{name:"paint_icon_new",url:"/peachImage/paint_icon_new.png"},{name:"arrow_left_new",url:"/peachImage/arrow_left_new.png"},{name:"arrow_right_new",url:"/peachImage/arrow_right_new.png"},{name:"two_way_arrow_new",url:"/peachImage/two_way_arrow_new.png"},{name:"check_new",url:"/peachImage/check_new.png"},{name:"down",url:"/peachImage/btn-down-hov.png"},{name:"height_icon",url:"/peachImage/height.png"},{name:"listenAll",url:"/peachImage/listenAll.png"},{name:"btn25",url:"/peachImage/btn25.png"},{name:"border25",url:"/peachImage/border25.png"},{name:"speedBtn",url:"/peachImage/speedBtn.png"},{name:"after10",url:"/peachImage/after10.png"},{name:"audio_next",url:"/peachImage/audio_next.png"},{name:"audio_pause",url:"/peachImage/audio_pause.png"},{name:"audio_play",url:"/peachImage/audio_play.png"},{name:"audio_prev",url:"/peachImage/audio_prev.png"},{name:"before10",url:"/peachImage/before10.png"},{name:"prince",url:"/peachImage/prince.jpg"},{name:"plus",url:"/peachImage/plus.png"},{name:"dotSquare",url:"/peachImage/dotSquare.png"},{name:"rounded_rec",url:"/peachImage/rounded_rec.png"},{name:"asc",url:"/peachImage/asc.png"},{name:"dsc",url:"/peachImage/dsc.png"},{name:"tooltip",url:"/peachImage/tooltip.png"},{name:"manual_long",url:"/peachImage/manual_long.png"},{name:"topBox",url:"/peachImage/top_rounded_rec.png"},{name:"card_icon",url:"/peachImage/card_icon.png"},{name:"bookmark_icon",url:"/peachImage/bookmark_icon.png"},{name:"fullscreen_icon",url:"/peachImage/fullscreen_icon.png"},{name:"paint_icon",url:"/peachImage/paint_icon.png"},{name:"print_icon",url:"/peachImage/print_icon.png"},{name:"explain_icon",url:"/peachImage/explain_icon.png"},{name:"circle",url:"/peachImage/circle.png"},{name:"clampy",url:"/peachImage/clampy.png"},{name:"triangleR",url:"/peachImage/triangleR.png"},{name:"triangleL",url:"/peachImage/triangleL.png"},{name:"grid",url:"/peachImage/grid.png"},{name:"arrow",url:"/peachImage/arrow-down.png"},{name:"disk_icon",url:"/peachImage/disk_icon.png"},{name:"finish_icon",url:"/peachImage/finish_icon.png"},{name:"grid_icon",url:"/peachImage/grid_icon.png"},{name:"preview_icon",url:"/peachImage/preview_icon.png"},{name:"Q_icon",url:"/peachImage/Q_icon.png"},{name:"audio_icon",url:"/peachImage/audio_icon.png"},{name:"thumb_icon",url:"/peachImage/thumb_icon.png"},{name:"btn_02",url:"/peachImage/btn-02.png"},{name:"btn_03",url:"/peachImage/btn-03.png"},{name:"go_first",url:"/peachImage/go_first.png"},{name:"go_last",url:"/peachImage/go_last.png"},{name:"page_next",url:"/peachImage/page_next.png"},{name:"page_prev",url:"/peachImage/page_prev.png"},{name:"inputBox",url:"/peachImage/inputBox.png"},{name:"tutorial_next",url:"/peachImage/tutorial_next.png"},{name:"tutorial_prev",url:"/peachImage/tutorial_prev.png"},{name:"tutorial_txt",url:"/peachImage/tutorial_txt.png"},{name:"tutorial_x",url:"/peachImage/tutorial_x.png"},{name:"tutorial1",url:"/peachImage/tutorial1.png"},{name:"tutorial2_1",url:"/peachImage/tutorial2_1.png"},{name:"tutorial2_2",url:"/peachImage/tutorial2_2.png"},{name:"tutorial2_3",url:"/peachImage/tutorial2_3.png"},{name:"tutorial2_4",url:"/peachImage/tutorial2_4.png"},{name:"tutorial2_5",url:"/peachImage/tutorial2_5.png"},{name:"tutorial2_6",url:"/peachImage/tutorial2_6.png"},{name:"tutorial2_7",url:"/peachImage/tutorial2_7.png"},{name:"tutorial3_1",url:"/peachImage/tutorial3_1.png"},{name:"tutorial3_2",url:"/peachImage/tutorial3_2.png"},{name:"tutorial3_3",url:"/peachImage/tutorial3_3.png"},{name:"tutorial3_4",url:"/peachImage/tutorial3_4.png"},{name:"tutorial4_1",url:"/peachImage/tutorial4_1.png"},{name:"tutorial4_2",url:"/peachImage/tutorial4_2.png"},{name:"tutorial5_1",url:"/peachImage/tutorial5_1.png"},{name:"tutorial5_2",url:"/peachImage/tutorial5_2.png"},{name:"tutorial6_1",url:"/peachImage/tutorial6_1.png"},{name:"tutorial6_2",url:"/peachImage/tutorial6_2.png"},{name:"tutorial7_1",url:"/peachImage/tutorial7_1.png"},{name:"tutorial7_2",url:"/peachImage/tutorial7_2.png"},{name:"tutorial8_1",url:"/peachImage/tutorial8_1.png"},{name:"tutorial8_2",url:"/peachImage/tutorial8_2.png"},{name:"tutorial9_1",url:"/peachImage/tutorial9_1.png"},{name:"tutorial9_2",url:"/peachImage/tutorial9_2.png"}],Ot=function(t){this.graphic=new PIXI.Graphics;var e=t.lineColor||0,n=2;if(void 0!==t.line&&(n=t.line),this.graphic.lineStyle(n,e,1,1,!0),this.graphic.beginFill(16777215),t.rounded?this.graphic.drawRoundedRect(0,0,t.width,t.height,t.rounded):this.graphic.drawRect(0,0,t.width,t.height),this.graphic.endFill(),t.background?this.background=t.background:this.background=new ht(this.graphic),t.text){var i=t.text;this.buttonText=new PIXI.UI.Text(i.name,i.style),this.button=new PIXI.UI.Button({background:this.background,width:t.width,height:t.height,text:this.buttonText})}else this.button=new PIXI.UI.Button({background:this.background,width:t.width,height:t.height});if(t.img){var r=t.img;r.url&&this.addImage(r,t.bg)}t.tint&&(this.background.tint=t.tint)},Nt={text:{configurable:!0},changeBack:{configurable:!0},backgroundColor:{configurable:!0},bounds:{configurable:!0},alpha:{configurable:!0}};Nt.text.set=function(t){this.buttonText.text=t},Nt.text.get=function(){return this.buttonText},Nt.changeBack.set=function(t){this.button.background.sprite.texture=t},Nt.backgroundColor.set=function(t){this.button.background.tint=t},Ot.prototype.pos=function(t,e){this.button.x=t,this.button.y=e},Nt.bounds.get=function(){return this.target.getBoundingClientRect()},Nt.alpha.set=function(t){this.button.background.alpha=t},Ot.prototype.onHover=function(t){this.button.on("hover",t)},Ot.prototype.onClick=function(t){this.button.on("click",t)},Ot.prototype.addImage=function(t,e){e&&this.button.addChild(e);var n=new PIXI.Texture.from(t.url);this[t.url]=new PIXI.UI.Sprite(n),t.tint&&(this[t.url].tint=t.tint),this[t.url].interactive=!0,this[t.url].buttonMode=!0,t.width&&(this[t.url].width=t.width),t.height&&(this[t.url].height=t.height),this[t.url].pivotX=.5,this[t.url].pivotY=.5,this.button.addChild(this[t.url])},Ot.prototype.removeImage=function(t){this.button.removeChild(this[t.url])},Ot.prototype.addText=function(t){this[t.name]=new PIXI.UI.Text(t.text,t.style),this.button.addChild(this[t.name])},Ot.prototype.removeText=function(t){this.button.removeChild(this[t.name])},Ot.prototype.MakedisableTexture=function(t,e){this.graphic.clear(),this.graphic.lineStyle(2,e,1,1,!0),this.graphic.beginFill(t),this.graphic.drawRect(0,0,this.button.width,this.button.height),this.graphic.endFill(),this.disableT=G.app.renderer.generateTexture(this.graphic)},Ot.prototype.MakeactiveTexture=function(t,e){this.graphic.clear(),this.graphic.lineStyle(2,e),this.graphic.beginFill(t),this.graphic.drawRect(0,0,this.button.width,this.button.height),this.graphic.endFill(),this.activeT=G.app.renderer.generateTexture(this.graphic)},Object.defineProperties(Ot.prototype,Nt);var Wt,Gt=function(t){function e(e,n){var i=this;t.call(this,"100%","100%");var r=G.ratioX,o=G.ratioY;this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var a=new PIXI.Graphics;a.lineStyle(2,16777215,1),a.beginFill(16777215),a.drawRoundedRect(0,0,410*r,120*o,4),a.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(a)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var s=new Ot({width:120*r,height:40*o,lineColor:14342874,text:{name:"취소",style:L.Black14}}),l=new Ot({width:120*r,height:40*o,tint:737863,lineColor:737863,text:{name:"삭제",style:L.White14}});s.button.anchorLeft=l.button.anchorRight=75*r,s.button.anchorBottom=l.button.anchorBottom=18*o;var h=new PIXI.UI.Text(n,L.Black16);h.horizontalAlign="center",h.anchorTop=20*o,this.container.on("close",(function(){i.parent.removeChild(i)})),s.onClick((function(){i.container.emit("close")})),l.onClick((function(){e(),i.container.emit("close")})),this.card.addChild(s.button,l.button,h),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),Dt=function(t){function e(){var e=this,n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;r.lineStyle(1,O.bgBox),r.beginFill(O.bgBox),r.drawRect(0,0,221*n,window.innerHeight),r.endFill(),t.call(this,PIXI.Texture.EMPTY),this.back=new ht(r),r.clear(),r.lineStyle(1,O.white),r.beginFill(O.white),r.drawRect(0,0,270*n,window.innerHeight),r.endFill(),this.startClick=!1,this.listcon=new PIXI.UI.Sprite(PIXI.Texture.EMPTY),this.filter=new ht(r),this.filter.alpha=.5,this.width=270*n,this.height="100%",this.back.heigth="100%";var o=new ut(1,1020*i,O.line);o.anchorLeft=210*n,o.anchorBottom=0,this.picture=this.makeTitleSprite("그림단어"),this.voice=this.makeTitleSprite("음성"),this.listcon.heigth="100%",r.clear(),r.lineStyle(2,16777215),r.beginFill(16777215),r.drawRoundedRect(0,0,10,10,10),r.endFill();var a=G.app.renderer.generateTexture(r),s=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});s.width="100%",s.height="102%",s.anchorTop=61*i,s.dragThreshold=5,s.dragRestrictAxis="y",s.addChild(this.listcon),s.on("dragStart",(function(){})),s.on("dragEnd",(function(){}));var l=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(a,5),vertical:!0,scrollingContainer:s,autohide:!0});l.track.alpha=0,l.handle.width=8*n,l.anchorTop=61*i,l.anchorLeft=208*n,l.anchorBottom=0,l.handle.tint=O.green,this.ScrollingContainer=s,this.picture.sprite.on("show",(function(t){e._cardContainer&&(t?(e.picture.addChild(e._cardContainer),e.picture.height=45*i+e._cardContainer.height):(e.picture.removeChild(e._cardContainer),e.picture.height=45*i),e.sort())})),this.voice.sprite.on("show",(function(t){e._audioContainer&&(t?(e.voice.addChild(e._audioContainer),e.voice.height=45*i+e._audioContainer.height):(e.voice.removeChild(e._audioContainer),e.voice.height=45*i),e.sort())})),this.voice.y=this.picture.y+this.picture.height,this.listcon.addChild(this.picture,this.voice),this.addChild(this.back,o,l,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sort=function(){this.voice.y=this.picture.y+this.picture.height,this.listcon.height=this.voice.height+this.picture.height+80*G.ratioY},e.prototype.makeCardContainer=function(){var t=this;if(this._cardContainer)for(;this._cardContainer.children[0];)this._cardContainer.removeChild(this._cardContainer.children[0]);for(var e=zt.cardArr,n=G.ratioX,i=G.ratioY,r=document.getElementById("page_input").textContent-1,o=new PIXI.UI.Container(260*n,55*e.length*i),a=function(a){void 0!==t.lastNumc&&t.removeChild(e[a].list[t.lastNumc]);var s=new PIXI.UI.Sprite(PIXI.Texture.EMPTY),l=new PIXI.UI.Sprite(e[a].sprite.texture),h=new PIXI.UI.Sprite(PIXI.Texture.WHITE),c=new PIXI.UI.Text(e[a].title,L.Gray12_R),u=new PIXI.Texture.from("tooltip"),d=new PIXI.UI.Sprite(u);d.sprite.interactive=d.sprite.buttonMode=!0,s.width="100%",d.width=58*n,d.height=s.height=74*i;var p=42*n,f=23*i,g=new Ot({width:p,height:f,lineColor:O.white,text:{name:"수정",style:L.White12_R}}),m=new Ot({width:p,height:f,lineColor:O.white,text:{name:"삭제",style:L.White12_R}});if(m.text.tint=g.text.tint=O.textGray,m.button.anchorRight=g.button.anchorRight=5*n,g.button.anchorTop=10*i,m.button.anchorTop=38*i,h.sprite.interactive=h.sprite.buttonMode=!0,h.click=!1,l.width=l.height=35*i,l.anchorLeft=6*n,c.verticalAlign=l.verticalAlign="middle",c.anchorLeft=54*n,c.width>100*n){var _=c.width/e[a].title.length,v=Math.floor(90*n/_);c.text=e[a].title.substring(0,v)+" ..."}h.width=193*n,h.height=45*i;var w=new Ct(16777215,h.width,h.height,1);function b(t){t?(this.text.tint=O.white,this.background.tint=O.red):(this.text.tint=O.textGray,this.background.tint=O.white)}w.tint=O.line,d.anchorRight=3,s.y=55*i*a,h.addChild(w,c,l),s.addChild(h),m.onHover(b),g.onHover(b),g.onClick((function(){var n=e[a].list;t.parent.emit("editCard",a,(function(){c.text=zt.cardArr[a].title,l.sprite.texture=zt.cardArr[a].sprite.texture,n.map((function(t){t&&(t.title=zt.cardArr[a].title,t.uuid=zt.cardArr[a].uuid)})),zt.cardArr[a].list=n}))})),m.onClick((function(){var n=t,i=new Gt((function(){e[a].list.map((function(t){n.removeChild(t)})),e.splice(a,1),n.makeCardContainer(zt.cardArr)}),"그림단어를 삭제 하시겠습니까?");t.parent.addChild(i)}));var I=e[a].list[r];I&&(I.mather=w,t.addChild(I)),h.sprite.on("click",(function(){if(void 0===I)return I=lt(e[a].title,w),t.addChild(I),void(e[a].list[r]=I);h.click=!h.click,h.click?(s.addChild(d),w.tint=O.red):(s.removeChild(d),w.tint=O.line)})),h.sprite.on("pointerover",(function(){I&&(I.circle.visible=!0)})),h.sprite.on("pointerout",(function(){I&&(I.circle.visible=!1)})),d.addChild(m.button,g.button),o.addChild(s)},s=0;s<e.length;s++)a(s);o.anchorTop=45*i,this._cardContainer=o,this.lastNumc=r,0!==e.length&&this.picture.sprite.emit("click",null,!0)},e.prototype.makeAudioContainer=function(){var t=this,e=document.getElementById("page_input").textContent-1;if(this._audioContainer)for(;this._audioContainer.children[0];)this._audioContainer.removeChild(this._audioContainer.children[0]);void 0!==this.lastNuma&&zt.audioArr[this.lastNuma].forEach((function(e){t.removeChild(e.hl)}));var n=zt.audioArr[e];if(0===n.length)return this._audioContainer&&(this._audioContainer.height=0),void this.voice.sprite.emit("show",!0);for(var i=G.ratioX,r=G.ratioY,o=new PIXI.UI.Container(260*i,97*n.length*r),a=function(a){var s=new PIXI.UI.Sprite(PIXI.Texture.EMPTY),l=new PIXI.UI.Sprite(PIXI.Texture.WHITE),h=new PIXI.UI.Text(n[a].title,L.Gray12_R),c=new PIXI.UI.Text("음성길이",L.Gray12_R),u=new PIXI.UI.Text("",L.Gray12_R),d=new PIXI.Texture.from("tooltip"),p=new PIXI.UI.Sprite(d),f=new ut(180*i,1,O.line),g=24*r,m=42*i,_=new Ot({width:m,height:g,lineColor:O.white,text:{name:"수정",style:L.White12_R}}),v=new Ot({width:m,height:g,lineColor:O.white,text:{name:"삭제",style:L.White12_R}}),w=new Ot({width:m,height:g,lineColor:O.white,text:{name:"미리듣기",style:L.White10_R}}),b=Math.round(n[a].duration),I=Math.floor(b/60)||0,y=b-60*I||0;u.text=(I<10?"0":"")+I+":"+(y<10?"0":"")+y+"초",s.width="100%",s.y=97*r*a,p.sprite.interactive=p.sprite.buttonMode=!0,p.sprite._zIndex=10,p.width=60*i,p.height=s.height=97*r,p.anchorRight=3,v.text.tint=_.text.tint=w.text.tint=O.textGray,v.button.anchorRight=_.button.anchorRight=w.button.anchorRight=7*i,_.button.anchorTop=10*r,v.button.anchorTop=38*r,w.button.anchorTop=69*r,l.width=193*i,l.height=90*r;var x=t.makeSwapButton(a,8*i,l.height);if(h.width>160*i){var k=h.width/n[a].title.length,C=Math.floor(150*i/k);h.text=n[a].title.substring(0,C)+" ..."}l.sprite.interactive=l.sprite.buttonMode=!0,l.click=!1,h.anchorLeft=10*i,h.anchorTop=13*r,f.verticalAlign="middle",f.horizontalAlign="center",c.anchorLeft=10*i,c.anchorBottom=13*r,u.anchorRight=9*i,u.anchorBottom=13*r;var B=new Ct(16777215,l.width,l.height,1);function T(t){t?(this.text.tint=O.white,this.background.tint=O.red):(this.text.tint=O.textGray,this.background.tint=O.white)}B.tint=O.line,l.addChild(B,h,c,u,f),s.addChild(l),v.onHover(T),_.onHover(T),w.onHover(T),_.onClick((function(){t.parent.emit("editAudio",a,(function(){var t=zt.audioArr[e][a];n[a]=t,h.text=t.title;var i=Math.round(t.duration),r=Math.floor(i/60)||0,o=i-60*r||0;u.text=(r<10?"0":"")+r+":"+(o<10?"0":"")+o+"초"}))})),v.onClick((function(){var e=t,i=new Gt((function(){e.removeChild(n[a].hl),n.splice(a,1),e.makeAudioContainer()}),"음성을 삭제하시겠습니까?");t.parent.addChild(i)})),w.onClick((function(){n[a].sound.stop(),n[a].sound.volume(1),n[a].sound.play()})),l.sprite.on("click",(function(){if(!Wt){if(B.tint=O.red,void 0===n[a].hl){if(Wt=!0,l.dragable)return;return function(t,e,n,i){var r=G.ratioX,o=G.ratioY,a=new PIXI.Texture.from("dotSquare"),s=new PIXI.UI.Sprite(a);s.tint=O.red,s.width=s.height=0;var l=new PIXI.Graphics;l.lineStyle(2,O.line),l.beginFill(O.white),l.drawRoundedRect(0,0,100*r,71*o,2);var h=new ht(l),c=new Ot({width:98*r,height:34*o,lineColor:O.white,text:{name:"하이라이트 생성",style:L.Black12}}),u=new Ot({width:98*r,height:34*o,lineColor:O.white,text:{name:"하이라이트 삭제",style:L.Gray12}}),d=new ut(90*r,1,O.line);function p(e){this.dragging=!0,t.addChild(s),console.log("dotSprite:",s),this.dotStart={x:e.clientX,y:e.clientY},console.log("this.dotStart:",this.dotStart);var n=e.clientX-m,i=e.clientY-w;s.x=e.clientX,s.y=e.clientY,s.startPos={x:n/_,y:i/v}}function f(t){this.dragging=!1,console.log(s.endPos),document.removeEventListener("mousedown",p),document.removeEventListener("mouseup",f),document.removeEventListener("mouseupoutside",f),document.removeEventListener("mousemove",b),h.anchorRight=-h.width-20*r,h.verticalAlign="middle",s.addChild(h)}d.verticalAlign="middle",d.horizontalAlign=c.button.horizontalAlign=u.button.horizontalAlign="center",c.button.anchorTop=u.button.anchorBottom=1,h.addChild(c.button,u.button,d),c.onClick((function(){l.clear(),l.beginFill(O.red,.5),l.drawRoundedRect(0,0,s.width,zt.hlHeight,5),l.endFill(),Wt=!1;var e=new ht(l);e.startPos=s.startPos,e.endPos=s.endPos,e.x=s.x,e.y=s.y,e.pivotX=s.pivotX,e.pivotY=s.pivotY,t.removeChild(h,s),n.hl=e,t.addChild(e),setTimeout((function(){i.sprite.emit("click")}),500)})),u.onClick((function(){i.dragable=!1,Wt=!1,t.removeChild(h,s),e.tint=O.line}));var g=document.getElementById("view-canvas"),m=g.style.marginLeft,_=g.width,v=g.height;m=parseFloat(m);var w=g.style.marginTop;function b(t){if(this.dragging){var e=t.clientX-m,n=this.dotStart.y+zt.hlHeight-w;s.endPos={x:e/_,y:n/v};var i=t.clientX-this.dotStart.x,r=zt.hlHeight,o=Math.abs(i),a=r;s.pivotX=i>=0?0:1,s.pivotY=r>=0?0:1,s.width=o,s.height=a}}w=parseFloat(w),document.addEventListener("mousedown",p),document.addEventListener("mouseup",f),document.addEventListener("mouseupoutside",f),document.addEventListener("mousemove",b)}(t,B,n[a],l),void(l.dragable=!0)}l.click=!l.click,l.click?(s.addChild(p),n[a].hl.visible=!0):(s.removeChild(p),B.tint=O.line,n[a].hl.visible=!1)}})),n[a].hl&&(n[a].hl.mather=B,t.addChild(n[a].hl),n[a].hl.visible&&l.sprite.emit("click")),l.addChild(x),s.handle=x,p.addChild(v.button,_.button,w.button),o.addChild(s)},s=0;s<n.length;s++)a(s);o.anchorTop=45*r,this._audioContainer=o,this.lastNuma=e,this.voice.sprite.emit("click",null,!0)},e.prototype.filterOn=function(){this.interactiveChildren=!1,this.addChild(this.filter)},e.prototype.filterOff=function(){this.removeChild(this.filter),this.interactiveChildren=!0},e.prototype.makeTitleSprite=function(t){var e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);i.width=193*e,i.height=45*n,i.anchorLeft=14*e;var r=new PIXI.Texture.from("arrow"),o=new PIXI.Texture(r,null,null,null,2),a=new PIXI.UI.Sprite(o),s=new PIXI.UI.Text(t,L.GrayTitle);a.anchorTop=s.anchorTop=10*n,a.width=9*e,a.height=18*n,a.tint=7368816,a.anchorLeft=10*e,s.anchorLeft=48*e;var l=new ut(193*e,1,O.line);l.anchorBottom=0,i.addChild(a,s,l);var h=!0;return i.sprite.interactive=!0,i.sprite.buttonMode=!0,i.sprite.on("click",(function(t,s){s&&(h=!0),h?(a.sprite.texture=r,a.width=18*e,a.height=9*n,a.anchorTop=19*n,i.sprite.emit("show",!0)):(a.sprite.texture=o,a.width=9*e,a.height=18*n,a.anchorTop=10*n,i.sprite.emit("show",!1)),h=!h})),i},e.prototype.makeSwapButton=function(t,e,n){var i=this;document.getElementById("page_input").textContent;var r=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);r.number=t;var o=new Ot({line:0,width:e,height:n/2,tint:14869218,text:{name:"▲",style:L.Black12}}),a=new Ot({line:0,width:e,height:n/2,tint:14869218,text:{name:"▼",style:L.Black12}});return o.onClick((function(){var t=document.getElementById("page_input").textContent-1;if(0!==r.number){var e=zt.audioArr[t][r.number];zt.audioArr[t][r.number]=zt.audioArr[t][r.number-1],zt.audioArr[t][r.number-1]=e,i.makeAudioContainer()}})),a.onClick((function(){var t=document.getElementById("page_input").textContent-1;if(r.number!==zt.audioArr[t].length-1){var e=zt.audioArr[t][r.number];zt.audioArr[t][r.number]=zt.audioArr[t][r.number+1],zt.audioArr[t][r.number+1]=e,i.makeAudioContainer()}})),a.button.anchorTop=n/2,r.x=1,r.addChild(o.button,a.button),r},e}(PIXI.UI.Sprite);function Ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt=function(t){function e(e){var n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;r.lineStyle(1,O.bgBoxBorder),r.beginFill(O.bgBox),r.drawRect(0,0,85*n,window.innerHeight),r.endFill(),r.clear(),r.lineStyle(0),r.beginFill(O.bgBox),r.drawRect(0,0,85*n,window.innerHeight),r.endFill(),t.call(this,G.app.renderer.generateTexture(r)),this.filter=new ht(r),this.filter.alpha=.8,this.filter.anchorBottom=160*i,this.filter.sprite.interactive=!0,this.width=85*n,this.heigth="100%",this.tileGrid=e,this.heigth="100%",this.anchorRight=0;var o=27*n;this.cardBtn=this.makeBtn({url:"card_icon",width:o,height:o},"그림단어","cardBtn"),this.audioBtn=this.makeBtn({url:"audio_icon",width:o,height:o},"음성","audioBtn"),this.gridBtn=this.makeBtn({url:"grid_icon",width:o,height:o},"안내선","gridBtn"),this.hlBtn=this.makeBtn({url:"height_icon",width:o,height:o},"형광펜\n  높이","hlBtn"),this.previewBtn=this.makeBtn({url:"preview_icon",width:o,height:o},"미리보기","previewBtn"),this.gatherBtn=this.makeBtn({url:"thumb_icon",width:o,height:o},"모아보기","gatherBtn"),this.saveBtn=this.makeBtn({url:"disk_icon",width:o,height:o},"저장","saveBtn"),this.finBtn=this.makeBtn({url:"finish_icon",width:o,height:o},"종료","finBtn"),this.cardBtn.button.anchorTop=60*i,this.audioBtn.button.anchorTop=153*i,this.gridBtn.button.anchorTop=246*i,this.hlBtn.button.anchorTop=350*i,this.previewBtn.button.anchorBottom=349*i,this.gatherBtn.button.anchorBottom=256*i,this.saveBtn.button.anchorBottom=163*i,this.finBtn.button.anchorBottom=70*i,this.addChild(this.cardBtn.button,this.audioBtn.button,this.gridBtn.button,this.hlBtn.button,this.previewBtn.button,this.gatherBtn.button,this.saveBtn.button,this.finBtn.button),this.GridButtonChildren()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.filterOn=function(){this.addChild(this.filter)},e.prototype.filterOff=function(){this.removeChild(this.filter)},e.prototype.GridButtonChildren=function(){var t=this,e=G.ratioX,n=G.ratioY;this.gridBtn.addImage({url:"btn_02",width:30*e,height:25*n,tint:O.button}),this.gridBtn.addImage({url:"btn_03",width:30*e,height:25*n,tint:O.button});var i=new PIXI.UI.Text("+",L.Black14_bold),r=new PIXI.UI.Text("-",L.Black14_bold);i.verticalAlign=r.verticalAlign="middle",i.horizontalAlign=r.horizontalAlign="center",this.gridBtn.btn_02.addChild(r),this.gridBtn.btn_03.addChild(i),this.gridBtn.btn_02.anchorTop=this.gridBtn.btn_03.anchorTop=70*n,this.gridBtn.btn_02.anchorRight=this.gridBtn.btn_03.anchorLeft=26*e,this.gridBtn.btn_02.alpha=0,this.gridBtn.btn_03.alpha=0;var o=new PIXI.UI.Sprite(PIXI.Texture.EMPTY),a=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);o.width=a.width=30*e,o.height=a.height=25*n,o.anchorTop=a.anchorTop=316*n,o.anchorRight=12*e,a.anchorLeft=12*e,o.sprite.interactive=!0,o.sprite.buttonMode=!0,a.sprite.interactive=!0,a.sprite.buttonMode=!0,o.sprite.on("pointerover",(function(e){t.gridBtn.button.emit("hover",e)})),o.sprite.on("pointerout",(function(e){t.gridBtn.button.emit("hover")})),o.sprite.on("click",(function(){t.tileGrid.tileScale.x+=.1,t.tileGrid.tileScale.y+=.1})),a.sprite.on("pointerover",(function(e){t.gridBtn.button.emit("hover",e)})),a.sprite.on("pointerout",(function(){t.gridBtn.button.emit("hover")})),a.sprite.on("click",(function(){if(t.tileGrid.tileScale.x-.1<=.1)return t.tileGrid.tileScale.x=.1,void(t.tileGrid.tileScale.y=.1);t.tileGrid.tileScale.x-=.1,t.tileGrid.tileScale.y-=.1})),this.addChild(o,a)},e.prototype.girdEvent=function(t,e){e?(t.btn_02.alpha=1,t.btn_03.alpha=1):(t.btn_02.alpha=0,t.btn_03.alpha=0)},e.prototype.makeBtn=function(t,e,n){var i=this,r=G.ratioY,o=63*r;"hlBtn"===n&&(o=77*r);var a=new Ot({width:51*G.ratioX,height:o,tint:O.button,line:0,rounded:5,img:t});return a.addText(Ht({name:e,style:L.Black12},"name",n)),a.background.alpha=0,a[n].horizontalAlign="center",a[n].anchorBottom="hlBtn"===n?0:5*r,a[t.url].tint=3355443,a[t.url].anchorTop=5*r,a[t.url].horizontalAlign="center",a.button.horizontalAlign="center",a.onHover((function(t){"gridBtn"===n&&i.girdEvent(a,t),a.background.alpha=t?1:0})),a},e}(PIXI.UI.Sprite),qt=function(t){function e(e){var n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;r.lineStyle(1,16777215),r.beginFill(16777215),r.drawRect(0,0,e,window.innerHeight),r.endFill(),t.call(this,G.app.renderer.generateTexture(r)),this.width=e,this.heigth="100%";var o=new PIXI.Texture.from("triangleL"),a=new PIXI.UI.Sprite(o);a.horizontalAlign="center",a.y=.5*window.innerHeight,a.width=27*n,a.height=42*i,a.tint=O.arrow,this.sprite.interactive=!0,this.sprite.buttonMode=!0,this.sprite.on("mouseover",(function(){a.tint=O.red})),this.sprite.on("mouseout",(function(){a.tint=O.arrow})),this.addChild(a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite),Zt=function(t){function e(e){var n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;r.lineStyle(1,16777215),r.beginFill(16777215),r.drawRect(0,0,e,window.innerHeight),r.endFill(),t.call(this,G.app.renderer.generateTexture(r)),this.width=e,this.heigth="100%";var o=new PIXI.Texture.from("triangleR"),a=new PIXI.UI.Sprite(o);a.horizontalAlign="center",a.y=.5*window.innerHeight,a.width=27*n,a.height=42*i,a.tint=O.arrow,this.sprite.interactive=!0,this.sprite.buttonMode=!0,this.sprite.on("mouseover",(function(){a.tint=O.red})),this.sprite.on("mouseout",(function(){a.tint=O.arrow})),this.addChild(a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite),Kt=function(t,e,n,i,r,o){var a,s=G.ratioX,l=G.ratioY,h=t,c=window["pdfjs-dist/build/pdf"],u=[],d=null,p=1,f=!1,g=null,m=document.getElementById("view-canvas"),_=m.getContext("2d"),v=document.getElementById("page_input"),w=this;function b(t,n){G.pageNum=t,f=!0,d.getPage(t).then((function(i){a=Math.min(zt.viewWidth*s/i.view[2],zt.viewHeight*l/i.view[3]);var r=i.getViewport({scale:a});m.height=r.height,m.width=r.width;var o={canvasContext:_,viewport:r};i.render(o).promise.then((function(){f=!1,null!==g&&(b(g),g=null)})),n&&(n==e.const?n(d.numPages,t):n(t))})),v.textContent=t}function I(t){p=t,w.queueRenderPage(p)}function y(t){var e=t.getViewport({scale:1}),n=document.createElement("canvas");n.width=r*s,n.height=o*l;var i=Math.max(n.width/e.width,n.height/e.height);return t.render({canvasContext:n.getContext("2d"),viewport:t.getViewport({scale:i})}).promise.then((function(){return n}))}this.getPageNum=function(){return p},this.changeScalePage=function(t){f?g=p:b(p,t)},this.acessQueue=function(t){p=t,w.queueRenderPage(t)},this.queueRenderPage=function(t){f?g=t:b(t,e.update)},i.sprite.on("click",(function(){p<=1||(p--,w.queueRenderPage(p))})),n.sprite.on("click",(function(){p>=d.numPages?alert("마지막 페이지입니다.","#E95C63"):(p++,w.queueRenderPage(p))})),c.getDocument(h).promise.then((function(t){d=t,b(p,e.const);for(var n=new Map,i=[];i.length<d.numPages;)i.push(i.length+1);return Promise.all(i.map((function(t){return d.getPage(t).then(y).then((function(i){if(n.set(t,i),n.size==d.numPages){for(var r=1;r<=d.numPages;++r)u.push(n.get(r));e.thumb(u,I)}}))})))}))},Vt=function(t){function e(e,n){var i=this,r=G.ratioX,o=G.ratioY,a=new PIXI.Graphics,s=1614*r,l=G.height;t.call(this,PIXI.Texture.WHITE),this.width=s,this.height=l,a.clear(),a.lineStyle(2,16777215),a.beginFill(16777215),a.drawRoundedRect(0,0,10,10,10),a.endFill();var h=G.app.renderer.generateTexture(a);this.verticalAlign="middle",this.anchorLeft=221*r;var c=new PIXI.UI.Container("100%","100%"),u=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});u.anchorLeft=u.anchorRight=0,u.anchorTop=63*o,u.anchorBottom=40*o,u.dragThreshold=5,u.dragRestrictAxis="y",u.addChild(c),u.on("dragStart",(function(){})),u.on("dragEnd",(function(){}));var d=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(h,5),vertical:!0,scrollingContainer:u,autohide:!0});d.track.width=9*r,d.handle.width=8*r,d.track.pivotX=-.5,d.anchorTop=63*o,d.anchorBottom=40*o,d.anchorRight=0,d.track.tint=14408667,d.track.blendMode=0,d.handle.tint=O.green,c.anchorLeft=147*r;for(var p,f=function(t){var a=e[t],s=new PIXI.Texture.from(a),l=new PIXI.UI.Sprite(s);l.x=t%4*(l.width+40*r),l.y=Math.floor(t/4)*(l.height+30*o),c.height+=l.y,l.sprite.interactive=l.sprite.buttonMode=!0,l.sprite.on("click",(function(){0!==zt.state&&i.parent.emit("filterOff"),i.parent.removeChild(i),n(t+1)})),c.addChild(l)},g=0;g<e.length;g++)f(g);p=zt.isFirst?"스토리 제작하기":"스토리뷰어 수정하기",a.clear(),a.lineStyle(1,O.line,1,1,!0),a.beginFill(O.green),a.drawRect(0,0,s,40*o),a.endFill();var m=new ht(a);this.editBtn=new Ot({width:s,height:40*o,background:m,text:{name:p,style:L.White14}}),this.editBtn.MakedisableTexture(O.arrow,O.arrow),0===zt.state&&(this.editBtn.button.interactive=!1,this.editBtn.changeBack=this.editBtn.disableT),this.editBtn.background.tint=16777215,this.editBtn.button.anchorBottom=0,this.addChild(u,d,this.editBtn.button),this.editBtn.onClick((function(){i.parent.emit("filterOff"),i.parent.removeChild(i),n(1)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Sprite),Qt=function(){};Qt.from=function(t){var e=new Image;return e.crossOrigin="anonymous",e.src=t+"?timestamp="+(new Date).getTime(),PIXI.Texture.from(e)};var $t=function(t){function e(){var e=this,n=G.ratioY;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var i=new Jt;this.card=i,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var r=new te;this.editScroll=function(t,n){r.setCallFucn=n,r.setchildNum=t,e.removeChild(e.card),e.card=r,e.addChild(e.card)},this.selectScroll=function(){e.removeChild(e.card),e.card=i,e.addChild(e.card)},this.container.on("close",(function(){e.card.items.map((function(t){e.card.listCon.removeChild(t)})),e.card.Sitems.map((function(t){e.card.selectedListCon.removeChild(t)})),e.card.Sitems=[],e.card.textinput.text="",e.card.textinput.emit("blur"),e.card.height=375*n,e.card.sprite.texture=e.card.minTexture,e.card.title.text="그림단어",e.parent.removeChild(e)})),this.addChild(this.filter)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),Jt=function(t){function e(){var e=this,n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics,o=1412*n,a=918*i,s=52*i,l=7*i;ee(r,o,375*i,s,l,3);var h=G.app.renderer.generateTexture(r);t.call(this,h),this.items=[],this.Sitems=[],ee(r,o,a,s,l,3);var c=G.app.renderer.generateTexture(r);r.clear(),r.lineStyle(2,16777215),r.beginFill(16777215),r.drawRoundedRect(0,0,10,10,10),r.endFill();var u=G.app.renderer.generateTexture(r);this.verticalAlign="middle",this.horizontalAlign="center";var d=new PIXI.UI.Text("검색결과 없음",L.Black16);d.anchorTop=250*i,d.horizontalAlign="center",this.noResearch=d;var p=new PIXI.UI.Text("그림단어",L.WhiteTitle);p.anchorTop=14*i,p.anchorLeft=39*n;var f=Bt(18*n),g=new PIXI.UI.Sprite(f);g.anchorTop=17*i,g.anchorRight=20*n,g.sprite.interactive=g.sprite.buttonMode=!0,g.sprite.on("click",(function(){e.parent.container.emit("close")}));var m=new PIXI.UI.Container("100%","100%"),_=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});_.width="100%",_.height=290*i,_.anchorTop=160*i,_.dragThreshold=5,_.dragRestrictAxis="y",_.addChild(m),_.on("dragStart",(function(){})),_.on("dragEnd",(function(){}));var v=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(u,5),vertical:!0,scrollingContainer:_,autohide:!0});v.track.width=v.handle.width=8*n,v.track.pivotX=-.5,v.anchorTop=160*i,v.anchorBottom=514*i,v.anchorRight=0,v.track.blendMode=0,v.handle.tint=O.green;var w=new ut(1306*n,2,O.line);w.verticalAlign="middle",w.horizontalAlign="center",m.anchorLeft=54*n;var b=new PIXI.UI.Text("선택한 그림단어",L.Black14);b.anchorTop=40*i,w.addChild(b),this.cardAreaConatainer(u);var I=this.searchContainer();this.minTexture=h,this.maxTexture=c,this.title=p,this.listCon=m,this.ScrollingContainer=_;var y=new Ot({width:1306*n,height:40*i,line:1,lineColor:O.line,tint:O.green,text:{name:"등록하기",style:L.White12_R}});y.button.anchorBottom=46*i,y.button.horizontalAlign="center",y.onClick((function(){var t;(t=zt.cardArr).push.apply(t,e.selectedListCon.children),e.parent.parent.emit("selectCard"),e.parent.container.emit("close")})),this.addChild(p,g,_,v,I,y.button,w)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.cardAreaConatainer=function(t){var e=this,n=G.ratioX,i=G.ratioY,r=zt.pageNum,o=new PIXI.UI.Container("100%","100%"),a=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});a.width="100%",a.height=290*i,a.anchorBottom=100*i,a.dragThreshold=5,a.dragRestrictAxis="y",a.addChild(o),a.on("dragStart",(function(){})),a.on("dragEnd",(function(){}));var s=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(t,5),vertical:!0,scrollingContainer:a,autohide:!0});s.track.width=s.handle.width=8*n,s.track.pivotX=-.5,s.anchorTop=567*i,s.anchorBottom=100*i,s.anchorRight=0,s.track.blendMode=0,s.handle.tint=O.green,o.anchorLeft=54*n,this.selectedListCon=o;this.selectedListCon.container.on("select",(function(t,n,i,o){var a=new PIXI.UI.Sprite(n.sprite.texture),s=new Ot({width:t.button.width,height:t.button.height,line:1,tint:"#000000",text:{name:"선택 해제",style:L.White12_R}});s.background.alpha=.8,s.button.interactive=!1,s.button.anchorBottom=0,a.width=n.width,a.height=n.height,a.addChild(s.button),a.uuid=i;var l=e.selectedListCon.children.length;a.x=l%6*(a.width+o),a.y=Math.floor(l/6)*(a.height+o),e.selectedListCon.height=a.y+a.height+o,a.sprite.interactive=!0,a.title=n.title,a.list=new Array(r),e.Sitems.push(a),a.sprite.on("click",(function(){n.removeChild(t.button),e.selectedListCon.removeChild(a),function(t){e.selectedListCon.children.map((function(e,n){e.x=n%6*(e.width+t),e.y=Math.floor(n/6)*(e.height+t)}))}(o)})),e.selectedListCon.addChild(a)})),this.selectedContainer=a,this.addChild(a,s)},e.prototype.removeChildren=function(){var t=this,e=G.ratioY;this.items.map((function(e){t.listCon.removeChild(e)})),this.items=[],this.height=375*e,this.sprite.texture=this.minTexture,this.title.text="그림단어"},e.prototype.addchildren=function(){var t=this,e=G.ratioY;this.items.map((function(e){t.listCon.removeChild(e)})),this.items=[],this.height=918*e,this.sprite.texture=this.maxTexture,this.title.text="그림단어 보관함"},e.prototype.searchContainer=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container(1306*e,250*n),r=new PIXI.Texture.from("manual_long"),o=new PIXI.UI.Sprite(r);o.width=415*e,o.height=46*n,o.anchorLeft=860*e,o.anchorTop=10*n,o.alpha=0;var a=new PIXI.Graphics;a.clear(),a.lineStyle(0),a.beginFill(O.red),a.drawRoundedRect(0,0,1185*e,3,3),a.endFill();var s=new ht(a);s.anchorTop=30*n,i.anchorTop=106*n,i.horizontalAlign="center";var l="검색할 단어를 입력하세요.";this.textinput=new PIXI.UI.TextInput({background:PIXI.UI.Sprite(PIXI.Texture.WHITE),value:l,style:L.Black14,lineHeight:30*n,paddingLeft:10*e,width:"90%",height:30}),this.textinput.alpha=.5;var h=new PIXI.Texture.from("Q_icon"),c=new PIXI.UI.Sprite(h);c.tint=O.red,c.anchorRight=2*e,c.anchorBottom=3*n,c.width=c.height=20*e,s.addChild(c);var u=new PIXI.Texture.from("explain_icon"),d=new PIXI.UI.Sprite(u);return d.anchorRight=0,d.anchorTop=13*n,d.width=d.height=18*e,i.addChild(s,d,o),this.textinput.on("keyup",(function(e){13===e.keyCode&&(t.textinput.value=t.textinput._lastValue,t.textinput.emit("blur"),c.sprite.emit("click"))})),this.textinput.on("focus",(function(){t.textinput.value===l&&(t.textinput.value="",t.textinput.alpha=1)})),this.textinput.on("blur",(function(){""===t.textinput.value&&(t.textinput.value=l,t.textinput.alpha=.5)})),i.addChild(this.textinput),c.sprite.interactive=c.sprite.buttonMode=!0,d.sprite.interactive=d.sprite.buttonMode=!0,c.sprite.on("click",(function(){t.addchildren(),Q(t.textinput.value.replace(/,/g,"#"),(function(e){0===e.code&&(0===e.data.total?t.addChild(t.noResearch):t.removeChild(t.noResearch),t.listItem(e.data.pageList))}))})),d.sprite.on("pointerover",(function(){o.alpha=1})),d.sprite.on("pointerout",(function(){o.alpha=0})),i},e.prototype.listItem=function(t){for(var e=this,n=G.ratioX,i=G.ratioY,r=t.length,o=0,a=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),s=function(r){var s=e.listCon.children.length,l=t[r].data_uuid,h=Qt.from(a+"/"+l,!0),c=new PIXI.UI.Sprite(h);e.listCon.addChild(c),c.width=200*n,c.height=271*i,c.sprite.interactive=!0;var u=c._width,d=c._height/5,p=new Ot({width:u,height:d,line:1,lineColor:O.red,tint:O.red,text:{name:"선택",style:L.White12_R}});p.background.alpha=.8,p.button.interactive=!1,p.button.anchorBottom=0;var f=20*n;c.x=s%6*(c.width+f),c.y=Math.floor(s/6)*(c.height+f),c.title=t[r].title,o+=c.height+f,c.sprite.on("click",(function(){p.button.parent||(e.selectedListCon.container.emit("select",p,c,l,f),c.addChild(p.button))})),e.items.push(c)},l=0;l<r;l++)s(l);this.listCon.height=o},e}(PIXI.UI.Sprite),te=function(t){function e(){var e=this,n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics,o=1412*n,a=918*i,s=52*i,l=7*i;ee(r,o,375*i,s,l,3);var h=G.app.renderer.generateTexture(r);t.call(this,h),this.items=[],this.Sitems=[],this.childNum=0,ee(r,o,a,s,l,3);var c=G.app.renderer.generateTexture(r);r.clear(),r.lineStyle(2,16777215),r.beginFill(16777215),r.drawRoundedRect(0,0,10,10,10),r.endFill();var u=G.app.renderer.generateTexture(r);this.verticalAlign="middle",this.horizontalAlign="center";var d=new PIXI.UI.Text("그림단어",L.WhiteTitle);d.anchorTop=14*i,d.anchorLeft=39*n;var p=new PIXI.UI.Text("검색결과 없음",L.Black16);p.anchorTop=250*i,p.horizontalAlign="center",this.noResearche=p;var f=Bt(18*n),g=new PIXI.UI.Sprite(f);g.width=g.height=18*n,g.anchorTop=17*i,g.anchorRight=20*n,g.sprite.interactive=g.sprite.buttonMode=!0,g.sprite.on("click",(function(){e.parent.container.emit("close")}));var m=new PIXI.UI.Container(1306*i,"100%"),_=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});_.width="100%",_.height=290*i,_.anchorTop=160*i,_.dragThreshold=5,_.dragRestrictAxis="y",_.addChild(m),_.on("dragStart",(function(){})),_.on("dragEnd",(function(){}));var v=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(u,5),vertical:!0,scrollingContainer:_,autohide:!0});v.track.width=v.handle.width=8*n,v.track.pivotX=-.5,v.anchorTop=160*i,v.anchorBottom=514*i,v.anchorRight=0,v.track.blendMode=0,v.handle.tint=O.green;var w=new ut(1306*n,2,O.line);w.verticalAlign="middle",w.horizontalAlign="center",m.anchorLeft=54*n;var b=new PIXI.UI.Text("선택한 그림단어",L.Black14);b.anchorTop=40*i,w.addChild(b),this.cardAreaConatainere();var I=this.searchContainere();this.minTexture=h,this.maxTexture=c,this.title=d,this.listCon=m,this.ScrollingContainer=_;var y=new Ot({width:1306*n,height:40*i,line:1,lineColor:O.line,tint:O.green,text:{name:"등록하기",style:L.White12_R}});y.button.anchorBottom=46*i,y.button.horizontalAlign="center",y.onClick((function(){zt.cardArr[e.childNum]=e.selectedListCon.children[0],e.parent.container.emit("close"),e.selectedListCon.removeChild(e.selectedListCon.children[0]),e.callFucn()})),this.addChild(d,g,_,v,I,y.button,w)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={setchildNum:{configurable:!0},setCallFucn:{configurable:!0}};return n.setchildNum.set=function(t){this.childNum=t},n.setCallFucn.set=function(t){this.callFucn=t},e.prototype.cardAreaConatainere=function(){var t=this,e=G.ratioX,n=G.ratioY,i=zt.pageNum,r=new PIXI.UI.Container(1306*n,"100%");r.anchorLeft=54*e,r.anchorTop=567*n,this.selectedListCon=r,this.selectedListCon.container.on("change",(function(e,n,r){var o=new PIXI.UI.Sprite(n.sprite.texture),a=new Ot({width:e.button.width,height:e.button.height,line:1,tint:"#000000",text:{name:"선택 해제",style:L.White12_R}});a.background.alpha=.8,a.button.interactive=!1,a.button.anchorBottom=0,o.width=n.width,o.height=n.height,o.addChild(a.button),o.uuid=r,o.sprite.interactive=!0,o.title=n.title,o.list=new Array(i),t.Sitems.push(o),o.sprite.on("click",(function(){n.removeChild(e.button),t.selectedListCon.removeChild(o)})),t.selectedListCon.children.length?(t.selectedListCon.removeChild(t.selectedListCon.children[0]),t.selectedListCon.addChild(o)):t.selectedListCon.addChild(o)})),this.addChild(this.selectedListCon)},e.prototype.removeChildren=function(){var t=this,e=G.ratioY;this.items.map((function(e){t.listCon.removeChild(e)})),this.items=[],this.height=375*e,this.sprite.texture=this.minTexture,this.title.text="그림단어"},e.prototype.addchildrene=function(){var t=this,e=G.ratioY;this.items.map((function(e){t.listCon.removeChild(e)})),this.items=[],this.height=918*e,this.sprite.texture=this.maxTexture,this.title.text="그림단어 보관함"},e.prototype.searchContainere=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container(1306*e,250*n),r=new PIXI.UI.Sprite(PIXI.Texture.WHITE);r.tint=16751069,r.width=403*e,r.height=22*n,r.anchorRight=30*e,r.anchorTop=13*n,r.alpha=0;var o=new PIXI.Graphics;o.clear(),o.lineStyle(0),o.beginFill(O.red),o.drawRoundedRect(0,0,1185*e,3,3),o.endFill();var a=new ht(o);a.anchorTop=30*n,i.anchorTop=106*n,i.horizontalAlign="center";var s="검색할 단어를 입력하세요.";this.textinput=new PIXI.UI.TextInput({background:PIXI.UI.Sprite(PIXI.Texture.WHITE),value:s,style:L.Black14,lineHeight:30*n,paddingLeft:10*e,width:"90%",height:30}),this.textinput.alpha=.5;var l=new PIXI.Texture.from("Q_icon"),h=new PIXI.UI.Sprite(l);h.tint=O.red,h.anchorRight=2*e,h.anchorBottom=3*n,h.width=h.height=20*e,a.addChild(h);var c=new PIXI.Texture.from("explain_icon"),u=new PIXI.UI.Sprite(c);return u.anchorRight=0,u.anchorTop=13*n,u.width=u.height=18*e,i.addChild(a,u,r),this.textinput.on("keyup",(function(e){13===e.keyCode&&(t.textinput.value=t.textinput._lastValue,t.textinput.emit("blur"),h.sprite.emit("click"))})),this.textinput.on("focus",(function(){t.textinput.value===s&&(t.textinput.value="",t.textinput.alpha=1)})),this.textinput.on("blur",(function(){""===t.textinput.value&&(t.textinput.value=s,t.textinput.alpha=.5)})),i.addChild(this.textinput),h.sprite.interactive=h.sprite.buttonMode=!0,u.sprite.interactive=u.sprite.buttonMode=!0,h.sprite.on("click",(function(){t.addchildrene(),Q(t.textinput.value.replace(/,/g,"#"),(function(e){0===e.code&&(0===e.data.total?t.addChild(t.noResearche):t.removeChild(t.noResearche),t.listIteme(e.data.pageList))}))})),u.sprite.on("pointerover",(function(){r.alpha=1})),u.sprite.on("pointerout",(function(){r.alpha=0})),i},e.prototype.listIteme=function(t){for(var e=this,n=G.ratioX,i=G.ratioY,r=t.length,o=0,a=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),s=function(r){var s=e.listCon.children.length,l=t[r].data_uuid,h=Qt.from(a+"/"+l,!0),c=new PIXI.UI.Sprite(h);e.listCon.addChild(c),c.width=200*n,c.height=271*i,c.sprite.interactive=!0;var u=c._width,d=c._height/5,p=new Ot({width:u,height:d,line:1,lineColor:O.red,tint:O.red,text:{name:"선택",style:L.White12_R}});p.background.alpha=.8,p.button.interactive=!1,p.button.anchorBottom=0;var f=20*n;c.x=s%6*(c.width+f),c.y=Math.floor(s/6)*(c.height+f),c.title=t[r].title,o+=c.height+f,c.sprite.on("click",(function(){p.button.parent||(void 0!==e.temps&&e.temps[1].removeChild(e.temps[0].button),e.selectedListCon.container.emit("change",p,c,l),c.addChild(p.button),e.temps=[p,c])})),e.items.push(c)},l=0;l<r;l++)s(l);this.listCon.height=o},Object.defineProperties(e.prototype,n),e}(PIXI.UI.Sprite);function ee(t,e,n,i,r,o){t.clear(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(737863),t.drawRoundedRect(0,0,e,n-i-r,o),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRect(0,i,e,2*r),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRoundedRect(0,i+r,e,n-i-r,o),t.endFill()}PIXI.UI.Container;var ne=function(t){function e(){var e=G.ratioX,n=G.ratioY,i=23*e;this.graphic=new PIXI.Graphics,this.graphic.lineStyle(1,O.bgBoxBorder),this.graphic.beginFill(O.bgBox),this.graphic.drawRect(0,0,200*e,window.innerHeight),this.graphic.endFill(),t.call(this,G.app.renderer.generateTexture(this.graphic)),this.heigth="100%",this.anchorRight=0;var r=new PIXI.Graphics;r.lineStyle(1,O.bgBoxBorder),r.beginFill(O.bgBox),r.moveTo(20*e,0),r.lineTo(47*e,0),r.lineTo(47*e,285*n),r.lineTo(20*e,285*n),r.arcTo(0,285*n,0,265*n,20),r.lineTo(0,20*n),r.arcTo(0,0,20*e,0,20),r.endFill(),this.menuBg=new ht(r),this.menuBg.anchorTop=60*n,this.menuBg.anchorRight=201*e,this.menuBg.interactive=!0,this.menuBg.buttonMode=!0,this.menuBg.on("mouseover",(function(){})),this.cardBtn=this.makeBtn({url:"card_icon_new",width:i,height:i,text:{name:"그림단어",style:L.Black15_R}}),this.audioBtn=this.makeBtn({url:"audio_icon",width:i,height:i,text:{name:"음성",text:"음성",style:L.Black15_R}}),this.paintBtn=this.makeBtn({url:"paint_icon_new",width:i,height:i,text:{name:"판서",text:"판서",style:L.Black15_R}}),this.bookmarkBtn=this.makeBtn({url:"bookmark_icon",width:i,height:i,text:{name:"책갈피",text:"책갈피",style:L.Black15_R}}),this.fullscreenBtn=this.makeBtn({url:"fullscreen_icon",width:i,height:i,text:{name:"전체화면",text:"전체화면",style:L.Black15_R}}),this.gatherBtn=this.makeBox({width:83*e,height:33*e,tint:O.white,line:5,text:{name:"모아보기",style:L.Black15_R},rounded:11,lineColor:7368816}),this.printBtn=this.makeBox({width:83*e,height:33*e,tint:O.white,line:5,text:{name:"인쇄하기",style:L.Black15_R},rounded:11,lineColor:7368816}),this.finBtn=this.makeBox({width:168*e,height:40*e,tint:O.white,line:5,text:{name:"스토리 닫기",style:L.Black15_R},rounded:6,lineColor:15855856}),this.finBtn.button.anchorLeft=20*e,this.cardBtn.button.anchorRight=this.audioBtn.button.anchorRight=this.paintBtn.button.anchorRight=this.bookmarkBtn.button.anchorRight=this.fullscreenBtn.button.anchorRight=205*e,this.gatherBtn.button.anchorLeft=15*e,this.printBtn.button.anchorLeft=105*e,this.finBtn.button.anchorTop=10*n,this.cardBtn.button.anchorTop=70*n,this.audioBtn.button.anchorTop=123*n,this.paintBtn.button.anchorTop=176*n,this.bookmarkBtn.button.anchorTop=229*n,this.fullscreenBtn.button.anchorTop=282*n,this.gatherBtn.button.anchorTop=this.printBtn.button.anchorTop=1035*n,this.finBtn.alpha=this.gatherBtn.alpha=this.printBtn.alpha=1,this.addChild(this.menuBg,this.cardBtn.button,this.paintBtn.button,this.audioBtn.button,this.bookmarkBtn.button,this.fullscreenBtn.button,this.finBtn.button,this.gatherBtn.button,this.printBtn.button),this.buttonArray=[this.cardBtn,this.paintBtn,this.audioBtn,this.bookmarkBtn,this.fullscreenBtn]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeContentsBox=function(){var t=G.ratioY;this.contentsBox=new PIXI.UI.Container("100%","100%"),this.contents=this.webCard,this.contentsBox.addChild(this.contents),this.contents.anchorTop=23*t},e.prototype.clickEventHandler=function(t){G.isPrev?G.currentScene.con.container.emit("previewblurOff"):G.currentScene.con.container.emit("buttonblurOff");var e=document.getElementById("paint_canvas");if(e.style.display="none",void 0===this.contentsBox&&this.makeContentsBox(),t)switch("음성"!==t.buttonText&&void 0!==this.webAudio.player&&null!==this.webAudio.player.playlist[this.webAudio.player.index].howl&&(this.webAudio.pauseBtn.sprite.emit("click"),this.webAudio.highlighter.visible=!1),t.buttonText){case"그림단어":G.isCard?(this.removeChild(this.contentsBox),G.isCard=!1,t.backgroundColor=O.bgBox):(this.contentsBox.removeChild(this.contents),this.contents=this.webCard,this.contentsBox.addChild(this.contents),this.addChild(this.contentsBox),G.isCard=!0,G.isPaint=!1,G.isAudio=!1,G.isBookmark=!1,t.backgroundColor=O.button);break;case"음성":G.isAudio?(this.removeChild(this.contentsBox),G.isAudio=!1,t.backgroundColor=O.bgBox):(this.contentsBox.removeChild(this.contents),this.contents=this.webAudio,this.contentsBox.addChild(this.contents),this.addChild(this.contentsBox),G.isAudio=!0,G.isCard=!1,G.isQ=!1,G.isPaint=!1,G.isBookmark=!1,t.backgroundColor=O.button);break;case"판서":G.isPaint?(this.removeChild(this.contentsBox),G.isPaint=!1,t.backgroundColor=O.bgBox):(this.contentsBox.removeChild(this.contents),this.contents=this.webPaint,this.contentsBox.addChild(this.contents),this.addChild(this.contentsBox),e.style.display="block",G.isPaint=!0,G.isCard=!1,G.isQ=!1,G.isAudio=!1,G.isBookmark=!1,t.backgroundColor=O.button);break;case"책갈피":G.isBookmark?(this.removeChild(this.contentsBox),G.isBookmark=!1,t.backgroundColor=O.bgBox):(this.contentsBox.removeChild(this.contents),this.contents=this.webBookmark,this.contentsBox.addChild(this.contents),this.addChild(this.contentsBox),G.isBookmark=!0,G.isCard=!1,G.isQ=!1,G.isPaint=!1,G.isAudio=!1,t.backgroundColor=O.button);break;case"모아보기":this.removeChild(this.contentsBox),G.isGather||(G.currentScene.con.container.emit("buttonblurOn"),G.isCard=!1,G.isQ=!1),G.isCard=!1,G.isQ=!1;break;case"전체화면":this.removeChild(this.contentsBox),G.isCard=!1,G.isQ=!1;break;case"인쇄하기":this.removeChild(this.contentsBox),G.currentScene.con.container.emit("buttonblurOn");break;case"스토리 닫기":this.removeChild(this.contentsBox)}},e.prototype.makeBox=function(t){var e=this,n=t.width,i=t.height,r=t.tint,o=t.line,a=t.text,s=t.rounded,l=t.lineColor,h=new Ot({width:n,height:i,tint:r,line:o,text:a,rounded:s,lineColor:l});return h.buttonText=t.text.name,h.onClick((function(){e.selectedBtn=h,G.currentScene.webMenu.clickEventHandler(h)})),h.onHover((function(t){if(t)if(h===e.finBtn){var n=new PIXI.UI.Text(a.name,L.White15_R);n.horizontalAlign="center",n.verticalAlign="middle",h.backgroundColor=O.red,h.button.removeChild(h.button.children[1]),h.button.addChild(n)}else h.backgroundColor=O.button;else{if(h===e.finBtn){var i=new PIXI.UI.Text(a.name,L.Black15_R);i.horizontalAlign="center",i.verticalAlign="middle",h.button.removeChild(h.button.children[1]),h.button.addChild(i)}h.backgroundColor=O.white}})),h},e.prototype.makeBtn=function(t){var e=this,n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;r.lineStyle(0,16777215),r.beginFill(O.lightGray),r.drawRoundedRect(0,0,120*n,45*n,10),r.endFill();var o=new ht(r);o.alpha=0,o.anchorRight=0;var a=new Ot({width:35*n,height:35*n,tint:O.button,line:0,rounded:10,img:t,bg:o});return a.background.alpha=0,a.buttonText=t.text.name,t&&(a[t.url].anchorRight=5*n,a[t.url].anchorBottom=5*i,a[t.url].tint=3355443,a.button.on("disable",(function(){a[t.url].tint=15395562})),a.button.on("active",(function(){a[t.url].tint=3355443}))),a.onClick((function(){a.backgroundColor=O.lightGray,e.buttonArray.map((function(t){"전체화면"!==t.buttonText&&(t===a?a.background.alpha=1:t.background.alpha=0)})),e.selectedBtn=a,G.currentScene.webMenu.clickEventHandler(a)})),a.onHover((function(e){e?(a.addText({name:t.text.name,text:t.text.name,style:t.text.style}),a[t.text.name].x=-70*n,a[t.text.name].y=15*i,o.anchorRight=0,o.alpha=1):(a.removeText({name:t.text.name,text:t.text.name,style:L.Black15_R}),o.alpha=0)})),a},e}(PIXI.UI.Sprite),ie=function(t){function e(){var e=this;t.call(this,"100%","100%");var n=G.ratioX,i=G.ratioY;this.filter=new dt("100%","100%"),this.card=new PIXI.UI.Sprite(PIXI.Texture.WHITE),this.card.width=490*n,this.card.height=682*i,this.card.verticalAlign="middle",this.card.horizontalAlign="center",this.container.on("close",(function(){e.parent.removeChild(e)})),this.filter.sprite.on("click",(function(){e.filter.parent.container.emit("close")})),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),re=function(t){function e(e){var n=G.ratioY;t.call(this,"100%",1e3*n),this.cardArr=e,this.searchArr=[],this.generateSearch(),this.ShowRegisteredCard()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateSaveCard=function(t){var e=G.ratioX,n=G.ratioY;this.listCon.height=232*t.length*n,t.length<=3?this.savedLine.alpha=0:this.savedLine.alpha=1;for(var i=0;i<t.length;i++){var r=t[i];r.width=143*e,r.height=190*n,r.horizontalAlign="center",r.y=(220*i+10)*n,this.listCon.addChild(r)}this.count.text=t.length},e.prototype.updateSearchCard=function(t,e){this.searchArr=t;var n=G.ratioX,i=G.ratioY;e.height=232*t.length*i;for(var r=0;r<t.length;r++){var o=t[r];o.width=143*n,o.height=190*i,o.horizontalAlign="center",o.y=(220*r+10)*i,e.addChild(o)}},e.prototype.changeCard=function(t){var e=this;this.cardArr.forEach((function(t){e.listCon.removeChild(t)})),this.cardArr=t,this.updateSaveCard(this.cardArr)},e.prototype.generateSearch=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container("100%","100%"),r=new PIXI.UI.Container("100%","100%"),o=new PIXI.UI.Text("단어검색",L.Black16_R);o.horizontalAlign="center",o.anchorTop=18*n;var a=new PIXI.UI.Text("등록된 단어가 없습니다.",L.Black14_R);a.horizontalAlign="center",a.anchorTop=222*n,a.visible=!1;var s=new PIXI.Texture.from("inputBox"),l=new PIXI.UI.Sprite(s);l.width="90%",l.height=43*n,l.horizontalAlign="center",l.anchorTop=56*n;this.textinput=new PIXI.UI.TextInput({background:PIXI.UI.Sprite(PIXI.Texture.WHITE),style:L.Black14,lineHeight:40*n,paddingLeft:10*e,width:160*e,height:40*n,value:"단어 검색"}),this.textinput.alpha=.5,this.textinput.anchorLeft=10*e;var h=new PIXI.Texture.from("Q_icon"),c=new PIXI.UI.Sprite(h);c.tint=O.Black,c.anchorRight=10*e,c.verticalAlign="middle",c.width=c.height=20*e;var u=new PIXI.Texture.from("explain_icon"),d=new PIXI.UI.Sprite(u);d.anchorRight=14*e,d.width=d.height=20*e,d.verticalAlign="middle";var p=new PIXI.UI.Sprite(PIXI.Texture.WHITE);p.visible=!1,p.width=199*e,p.height=45*n,p.horizontalAlign="center",p.anchorTop=130*n,p.tint=O.lightGray;var f=new ut(p.width,2,O.Gray);f.alpha=.5,f.anchorBottom=0;var g=new PIXI.UI.Text("검색 결과 ",L.Black14_R),m=new PIXI.UI.Text("1",L.Red16),_=new PIXI.UI.Text("개",L.Black14_R);g.verticalAlign=_.verticalAlign=m.verticalAlign="middle",g.anchorLeft=43*e,m.x=g.anchorLeft+g.width,_.x=m.x+m.width+5*e;var v=new Ot({line:3,lineColor:O.vividGray,text:{name:"검색 결과 닫기",style:L.Black12},rounded:2,width:143*e,height:36*n});v.button.horizontalAlign="center",v.button.anchorBottom=0,v.button.visible=!1,v.button.interactive=!0,v.button.buttonMode=!0,this.textinput.on("keyup",(function(e){if("\n"!==t.textinput.value)return 13===e.keyCode?(t.textinput.value=t.textinput._lastValue,void c.sprite.emit("click")):void 0})),this.textinput.on("blur",(function(e){if(0===t.searchArr.length&&(p.visible=a.visible=v.button.visible=!1,t.addChild(t.savedCon),i))for(;i.children[0];)i.removeChild(i.children[0])})),this.textinput.on("focus",(function(){t.textinput.text=""}));var w=new PIXI.Texture.from("manual_long"),b=new PIXI.UI.Sprite(w);b.width=415*e,b.height=46*n,b.anchorRight=-d.width/2,b.anchorBottom=d.height,d.sprite.interactive=d.sprite.buttonMode=!0,b.visible=!1,d.sprite.on("pointerover",(function(){b.visible=!0})),d.sprite.on("pointerout",(function(){b.visible=!1})),d.addChild(b);var I=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw");c.sprite.interactive=c.sprite.buttonMode=!0,c.sprite.interactive=c.sprite.buttonMode=!0,c.sprite.on("click",(function(){if(""!==t.textinput.value){if(i)for(;i.children[0];)i.removeChild(i.children[0]);p.visible=v.button.visible=!0,t.removeChild(t.savedCon),Q(t.textinput.value,(function(n){var r=[];0===n.code&&(n.data.pageList.forEach((function(t){var e=t.data_uuid,n=Qt.from(I+"/"+e,!0),i=new PIXI.UI.Sprite(n);i.sprite.interactive=i.sprite.buttonMode=!0,i.sprite.on("click",(function(){G.currentScene.prevCard.card.sprite.texture=n,G.currentScene.con.addChild(G.currentScene.prevCard)})),r.push(i)})),m.text=r.length,r.length>3?B.alpha=1:B.alpha=0,0===r.length?(a.visible=!0,t.searchArr=[]):(t.updateSearchCard(r,i),a.visible=!1)),_.x=m.x+m.width+5*e}))}})),v.onClick((function(){t.textinput.text="",B.alpha=0,t.textinput.emit("blur")}));var y=new PIXI.Graphics;y.lineStyle(2,16777215),y.beginFill(16777215),y.drawRoundedRect(0,0,10,10,10),y.endFill();var x=G.app.renderer.generateTexture(y),k=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});k.width="100%",k.dragThreshold=5,k.dragRestrictAxis="y",k.addChild(i);var C=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(x,5),vertical:!0,scrollingContainer:k,autohide:!0});k.height=C.height=657*n,C.track.width=8*e,C.handle.width=5*e,C.track.tint=O.bgBox,C.handle.tint=O.handle,C.handle.pivotX=0,C.anchorRight=0,C.anchorTop=k.anchorTop=188*n;var B=new ut(2,657*n,O.line);B.anchorRight=13*e,B.anchorTop=188*n,B.alpha=0,p.addChild(f,g,_,m,d),l.addChild(this.textinput,c),this.back=p,r.addChild(l,p,k,C,a,B),this.addChild(r,v.button)},e.prototype.ShowRegisteredCard=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container("100%",765*n),r=new PIXI.UI.Sprite(PIXI.Texture.WHITE);r.width=198*e,r.height=45*n,r.horizontalAlign="center",r.tint=O.lightGray,r.anchorTop=-17.5*n;var o=new ut(r.width,2,O.Gray);o.alpha=.5,o.anchorBottom=0,i.anchorTop=130*n;var a=new PIXI.UI.Text("등록된 단어 ",L.Black14_R);this.count=new PIXI.UI.Text("",L.Red16);var s=new PIXI.UI.Text("개",L.Black14_R);a.anchorLeft=24*e,this.count.x=a.anchorLeft+a.width,s.x=this.count.x+this.count.width+5*e,this.count.on("change",(function(n){t.count.text=n,s.x=t.count.x+t.count.width+5*e}));var l=new PIXI.Texture.from("explain_icon"),h=new PIXI.UI.Sprite(l);h.anchorRight=14*e,h.width=h.height=20*e;var c=new PIXI.Texture.from("manual_long"),u=new PIXI.UI.Sprite(c);u.width=415*e,u.height=46*n,u.anchorRight=-h.width/2,u.anchorBottom=h.height,h.sprite.interactive=h.sprite.buttonMode=!0,u.visible=!1,h.sprite.on("pointerover",(function(){u.visible=!0})),h.sprite.on("pointerout",(function(){u.visible=!1})),h.addChild(u),a.verticalAlign=s.verticalAlign=this.count.verticalAlign=h.verticalAlign="middle",r.addChild(o,a,s,this.count,h);var d=new PIXI.Graphics;d.lineStyle(2,16777215),d.beginFill(16777215),d.drawRoundedRect(0,0,10,10,10),d.endFill();var p=G.app.renderer.generateTexture(d),f=new PIXI.UI.Container("100%",0),g=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0});g.width="100%",g.dragThreshold=5,g.dragRestrictAxis="y",g.addChild(f);var m=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(p,5),vertical:!0,scrollingContainer:g,autohide:!0});g.height=m.height=657*n,m.track.width=m.handle.width=8*e,m.track.tint=O.bgBox,m.handle.tint=O.handle,m.anchorTop=g.anchorTop=50*n,m.anchorRight=0,m.track.blendMode=0;var _=new ut(2,657*n,O.line);_.anchorRight=13*e,_.anchorTop=50*e,_.alpha=0,this.savedLine=_,this.listCon=f,this.cardScrollingCon=g,this.savedCon=i,i.addChild(r,g,m,_),this.addChild(i),this.updateSaveCard(this.cardArr)},e}(PIXI.UI.Container),oe=function(t){function e(e,n){t.call(this,e,n),this.save={width:0,height:0},this.setupMask()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupMask=function(){var t=new PIXI.Graphics;this.container.addChild(t),this.container.mask=t,this.resizeUpdate()},e.prototype.resizeUpdate=function(){this.actual_width===this.save.width&&this.actual_height===this.save.height||(this.container.mask.clear(),this.container.mask.lineStyle(0),this.container.mask.beginFill(16777215,1),this.save.width=this.actual_width,this.save.height=this.actual_height,this.container.mask.drawCircle(.5*this.save.width,.5*this.save.width,.5*this.save.width),this.container.mask.endFill())},e}(PIXI.UI.Container),ae=function(t,e,n,i,r,o,a,s,l,h,c,u){this.playlist=t,this.index=0,this.total=e,this.audio_progress=n,this.pauseBtn=i,this.playBtn=r,this.duration=o,this.timer=a,this.RightBtn=l,this.LeftBtn=s,this.nowPage=h,this.highlighter=c,this.idxArray=u,this.ended=!1,this.gs=0};ae.prototype={play:function(t,e){if(null!=e){var n,i=document.getElementById("view-canvas"),r=document.getElementById("speed_input").textContent,o=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),a=i.style.marginLeft,s=i.style.marginTop,l=this,h=l.playlist[e];if(a=parseFloat(a),s=parseFloat(s),e="number"==typeof e?e:l.index,h.endPos){l.highlighter.visible=!0;var c=h.startPos.x*i.width+a,u=h.startPos.y*i.height+s,d=(h.endPos.x-h.startPos.x)*i.width,p=(h.endPos.y-h.startPos.y)*i.height;l.highlighter.fill.clear(),l.highlighter.redraw(d,p),l.highlighter.position(c,u)}else l.highlighter.visible=!1;n=h.howl?h.howl:h.howl=new st({src:[o+"/"+h.uuid],html5:!0,onplay:function(){requestAnimationFrame(l.step.bind(l)),l.pauseBtn.visible=!0,l.playBtn.visible=!1,l.ended=!1},onload:function(){l.duration.text=l.formatTime(Math.round(n.duration()))},onend:function(){l.index===l.playlist.length-1?(l.total.flag=!1,l.index=l.idxArray[l.nowPage],l.index>l.playlist.length-1&&(l.index=0),l.playBtn.visible=!0,l.pauseBtn.visible=!1,l.highlighter.visible=!1,l.duration.text=l.formatTime(Math.round(n.duration())),G.currentScene.con.container.emit("storyEnd")):(l.ended=!0,l.skip("next",!0))},onseek:function(){requestAnimationFrame(l.step.bind(l))}}),l.index=e,2===l.gs&&(l.gs=0,l.RightBtn.sprite.emit("click")),t?(l.speed(r),n.play(),"loaded"===n.state()?(l.playBtn.visible=!1,l.pauseBtn.visible=!0):(l.playBtn.visible=!0,l.pauseBtn.visible=!1)):(l.playBtn.visible=!0,l.pauseBtn.visible=!1,l.highlighter.visible=!1,l.duration.text=l.formatTime(Math.round(n.duration())))}},pause:function(){var t=this;t.playlist[t.index].howl.pause(),t.playBtn.visible=!0,t.pauseBtn.visible=!1,t.highlighter.go=!1},skip:function(t,e){void 0===e&&(e=!1);var n=this;console.log("skip@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");var i=0,r=null;if("prev"===t)r=n.LeftBtn,(i=n.index-1)<=0&&(i=0);else if(r=n.RightBtn,(i=n.index+1)>=n.playlist.length)return;n.playlist[i].num===n.nowPage?n.skipTo(i,3):e?n.total.flag?r.sprite.emit("click"):n.skipTo(i,2):n.total.flag||r.sprite.emit("click")},skipTo:function(t,e){var n=this,i=!1;switch(n.playlist[n.index].howl&&(i=n.playlist[n.index].howl.playing(),n.playlist[n.index].howl.stop()),n.audio_progress.width=0,e){case 1:n.ended&&n.total.flag&&(i=!0),i?n.play(!0,t):(console.log("1111111"),n.play(!1,t));break;case 2:n.gs=1,n.play(!1,t);break;case 3:n.play(!0,t)}},seek:function(t){var e=this.playlist[this.index].howl;e.playing()&&((t=e.seek()+t)<0&&(t=0),e.seek(t))},step:function(){var t=this,e=t.playlist[t.index].howl,n=e.seek()||0;t.timer.text=t.formatTime(Math.round(n));var i=n/e.duration()||0;t.audio_progress.width=100*i+"%",t.highlighter.startLine(i),e.playing()&&requestAnimationFrame(t.step.bind(t))},formatTime:function(t){var e=Math.floor(t/60)||0,n=t-60*e||0;return e+":"+(n<10?"0":"")+n},speed:function(t){this.playlist[this.index].howl.rate(t)}};var se=function(t){function e(e,n,i,r,o){var a=this,s=G.ratioX,l=G.ratioY;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var h=new PIXI.Graphics;h.lineStyle(1,16777215,1),h.beginFill(16777215),h.drawRoundedRect(0,0,490*s,520*l,51),h.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(h)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center",h.clear(),h.lineStyle(2,O.red,1,1,!0),h.beginFill(O.white),h.drawRoundedRect(0,0,200*s,51*l,16*s),h.endFill();var c=new PIXI.Texture.from("btn25"),u=new PIXI.Texture.from("border25"),d=new PIXI.UI.Sprite(c),p=new PIXI.UI.Sprite(u);p.tint=O.red,p.width=202.7*s,p.height=51.3*s,d.addChild(p);var f=new PIXI.UI.Sprite(c),g=new Ot({width:202.7*s,height:51.3*s,background:d,text:{name:e,style:L.Red17_M}}),m=new Ot({width:202.7*s,height:51.3*s,tint:O.red,background:f,text:{name:n,style:L.White17_M}}),_=185*s,v=new oe(_,_),w=zt.thumb_texture||PIXI.Texture.WHITE,b=new PIXI.UI.Sprite(w);b.width=b.height="100%",v.addChild(b),v.horizontalAlign="center",v.anchorTop=57*l;var I=Bt(21*l,4868682),y=new PIXI.UI.Sprite(I);if(y.anchorTop=28*l,y.anchorRight=28*s,y.sprite.interactive=y.sprite.buttonMode=!0,y.sprite.on("click",(function(){a.container.emit("close")})),zt.title.length>25){var x=zt.title.slice(0,12),k=zt.title.slice(13),C=new PIXI.UI.Text(""+x,L.Red19_M),B=new PIXI.UI.Text(""+k,L.Red19_M);C.anchorTop=287*l,B.anchorTop=310*l,C.horizontalAlign=B.horizontalAlign="center",this.card.addChild(C,B)}else{var T=zt.title,S=new PIXI.UI.Text(""+T,L.Red19_M);S.anchorTop=300*l,S.horizontalAlign="center",this.card.addChild(S)}var P=new PIXI.UI.Text(o,L.Dark19_M);P.horizontalAlign="center",P.y=350*l,g.button.anchorRight=m.button.anchorLeft=33*s,g.button.anchorBottom=m.button.anchorBottom=60*l,this.container.on("close",(function(){null!==a.parent&&a.parent.removeChild(a)})),g.onClick((function(){r(),a.container.emit("close")})),m.onClick((function(){m.button.blur(),i(),a.container.emit("close")})),this.card.addChild(g.button,m.button,v,y,P),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),le=function(t){function e(e,n){var i=this,r=G.ratioX,o=G.ratioY;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var a=new PIXI.Graphics;a.lineStyle(2,14408667,1),a.beginFill(16777215),a.drawRoundedRect(0,0,350*r,470*o,51),a.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(a)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var s=new PIXI.Texture.from("btn25"),l=new Ot({width:202*r,height:51*o,background:new PIXI.UI.Sprite(s),tint:O.red,text:{name:"스토리 닫기",style:L.White16}}),h=new Ot({width:202*r,height:24*o,lineColor:O.white,text:{name:"처음부터 읽기",style:L.line16}}),c=new ut(h.text.width,1,O.line);c.anchorBottom=0,c.horizontalAlign="center",h.button.addChild(c);var u=150*r,d=new oe(u,u),p=zt.thumb_texture||PIXI.Texture.WHITE,f=new PIXI.UI.Sprite(p);f.width=f.height="100%",d.addChild(f),d.horizontalAlign="center",d.anchorTop=42*o;var g=Bt(18*r),m=new PIXI.UI.Sprite(g);m.tint=4868682,m.width=m.height=21*r,m.anchorTop=28*o,m.anchorRight=28*r,m.sprite.interactive=m.sprite.buttonMode=!0,m.sprite.on("click",(function(){i.container.emit("close")}));var _=zt.title,v=new PIXI.UI.Text(""+_,L.Red19),w=new PIXI.UI.Text("이야기를 다 읽었습니다.",L.Black19);w.horizontalAlign=v.horizontalAlign="center",w.anchorBottom=152*o,v.anchorTop=260*o,l.button.horizontalAlign=h.button.horizontalAlign="center",l.button.anchorBottom=66*o,h.button.anchorBottom=22*o,this.container.on("close",(function(){null!==i.parent&&i.parent.removeChild(i)})),l.onClick((function(){l.button.blur(),n(),i.container.emit("close")})),h.onClick((function(){e(),i.container.emit("close")})),this.card.addChild(l.button,h.button,d,m,w,v),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),he=function(t){function e(e,n,i,r,o,a,s){var l=this;void 0===s&&(s=1);var h=G.ratioY;t.call(this,"100%",902*h),this.state=s,this.anchorTop=51*h,this.representationImg(),this.someButtons(),this.MakeprogressBar(),this.listenToAll(),this.page=n-1,this.nowPage=i-1,this.idxArray=e.idx,this.highlighter=a,0!==e.playlist.length&&(this.player=new ae(e.playlist,{flag:!1},this.audio_progress,this.pauseBtn,this.playBtn,this.duration,this.timer,r,o,this.nowPage,a,this.idxArray),this.setHowler(),this.container.on("pause",(function(){try{l.player.pause()}catch(t){}})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateIndex=function(t){var e=t-1;void 0!==this.player&&(this.player.nowPage=e,this.player.skipTo(this.idxArray[e],1))},e.prototype.setHowler=function(){var t,e=this;this.player.play(!1),this.playBtn.sprite.on("click",(function(){var t=document.getElementById("page_input").textContent-1;null!==e.idxArray[t]&&(1===e.player.gs&&(e.player.gs=3,e.updateIndex(t+1)),e.player.play(!0,e.player.index))})),this.pauseBtn.sprite.on("click",(function(){e.player.pause()})),this.prevBtn.sprite.on("click",(function(){e.player.skip("prev")})),this.nextBtn.sprite.on("click",(function(){e.player.skip("next")})),this.before10.sprite.on("click",(function(){e.player.seek(-10)})),this.after10.sprite.on("click",(function(){e.player.seek(10)}));for(var n=0;n<this.idxArray.length;n++){if(0===this.idxArray[n]){t=n+1;break}}var i=new se("현재 페이지부터 듣기","처음부터 듣기",(function(){var n=e.player.playlist[e.player.index].howl;e.player.total.flag=!0,e.state?G.currentScene.con.container.emit("goFirst",t):0==e.player.index?n.seek(0):e.player.skipTo(0)}),(function(){var n=document.getElementById("page_input").textContent-1;e.player.total.flag=!0;var i=e.player.playlist[e.player.index].howl;null!==e.idxArray[n]?i.seek(0):G.currentScene.con.container.emit("goFirst",t)}),"전체듣기를 시작할까요?");this.allBtn.onClick((function(){e.parent.parent.parent.addChild(i)}));var r=document.getElementById("speed_input");r.textContent=1,this.slowDownBtn.button.on("click",(function(){e.slowDownBtn.backgroundColor=O.red,e.speedOrigin.backgroundColor=O.vividGray,e.speedUpBtn.backgroundColor=O.vividGray,r.textContent=.8,e.player.speed(.8)})),this.speedOrigin.button.on("click",(function(){e.slowDownBtn.backgroundColor=O.vividGray,e.speedOrigin.backgroundColor=O.red,e.speedUpBtn.backgroundColor=O.vividGray,r.textContent=1,e.player.speed(1)})),this.speedUpBtn.button.on("click",(function(){e.slowDownBtn.backgroundColor=O.vividGray,e.speedOrigin.backgroundColor=O.vividGray,e.speedUpBtn.backgroundColor=O.red,r.textContent=1.2,e.player.speed(1.2)}))},e.prototype.listenToAll=function(){var t=G.ratioX,e=G.ratioY,n=new Ot({lineColor:11842740,line:1.5,rounded:6,width:168*t,height:36*e,text:{name:"    전체듣기",style:L.Black14_R}}),i=new PIXI.Texture.from("listenAll"),r=new PIXI.UI.Sprite(i);r.width=17*t,r.height=13*e,n.button.addChild(r),n.button.anchorBottom=440*e,n.button.horizontalAlign="center",r.verticalAlign="middle",r.anchorLeft=37*t,this.allBtn=n,this.addChild(n.button)},e.prototype.someButtons=function(){var t=G.ratioX,e=G.ratioY,n=new PIXI.Texture.from("before10"),i=new PIXI.Texture.from("after10"),r=new PIXI.Texture.from("audio_pause"),o=new PIXI.Texture.from("audio_play"),a=new PIXI.Texture.from("audio_prev"),s=new PIXI.Texture.from("audio_next"),l=new PIXI.UI.Sprite(a),h=new PIXI.UI.Sprite(o),c=new PIXI.UI.Sprite(s),u=new PIXI.UI.Sprite(n),d=new PIXI.UI.Sprite(i),p=new PIXI.UI.Sprite(r);l.sprite.interactive=l.sprite.buttonMode=h.sprite.interactive=h.sprite.buttonMode=c.sprite.interactive=c.sprite.buttonMode=u.sprite.interactive=u.sprite.buttonMode=d.sprite.interactive=d.sprite.buttonMode=p.sprite.interactive=p.sprite.buttonMode=!0,l.width=23*t,l.height=26*e,l.anchorLeft=20*t,l.anchorTop=249*e,h.width=h.height=56*t,h.horizontalAlign="center",h.anchorTop=234*e,p.width=p.height=56*t,p.horizontalAlign="center",p.anchorTop=234*e,c.width=23*t,c.height=26*e,c.anchorRight=20*t,c.anchorTop=249*e,u.width=u.height=37*t,u.anchorLeft=18*t,u.anchorTop=300*e,d.width=d.height=37*t,d.anchorRight=18*t,d.anchorTop=300*e,p.visible=!1;var f=new PIXI.Texture.from("speedBtn"),g=function(n,i){var r=new PIXI.UI.Sprite(f),o=new Ot({background:r,width:55*t,height:30*e,text:{name:n,style:L.White15_R}});return o.click=i,o.button.anchorTop=365*e,o.backgroundColor=o.click?O.red:O.vividGray,o},m=g("0.8x",!1),_=g("1x",!0),v=g("1.2x",!1);m.button.anchorLeft=12*t,_.button.horizontalAlign="center",v.button.anchorRight=12*t,this.slowDownBtn=m,this.speedOrigin=_,this.speedUpBtn=v,this.prevBtn=l,this.playBtn=h,this.pauseBtn=p,this.nextBtn=c,this.before10=u,this.after10=d,this.addChild(l,h,c,p,m.button,_.button,v.button,u,d)},e.prototype.representationImg=function(){var t=G.ratioX,e=G.ratioY,n=new ut(199*t,220*e,O.lightGray),i=new ut(199*t,2,O.Gray);n.anchorLeft=1*t,n.anchorTop=10*e;var r=130*t,o=new oe(r,r),a=zt.thumb_texture||PIXI.Texture.WHITE,s=new PIXI.UI.Sprite(a);s.width=s.height="100%",o.addChild(s),o.horizontalAlign="center",o.anchorTop=22*e,i.alpha=.5,i.anchorBottom=0,n.addChild(i,o),this.addChild(n)},e.prototype.MakeprogressBar=function(){var t=G.ratioX,e=G.ratioY,n=new PIXI.Graphics;n.lineStyle(1,16777215),n.beginFill(16777215),n.drawRoundedRect(0,0,170*t,12*e,6),n.endFill();var i=new ht(n),r=new ct(n),o=new PIXI.UI.SliceSprite(r,2);i.tint=O.Gray,o.tint=O.red;var a=new PIXI.UI.Text("0:00",L.Black15_R),s=new PIXI.UI.Text("0:00",L.Black15_R);i.addChild(a,s,o),o.width=0,a.anchorTop=s.anchorTop=16*e,a.anchorRight=0,i.anchorTop=182*e,i.horizontalAlign="center",this.timer=s,this.duration=a,this.audio_progress=o,this.addChild(i)},e}(PIXI.UI.Container),ce=function(t){function e(){t.call(this,window.innerWidth,window.innerHeight),this.fill=new PIXI.Graphics,this.lineWidth=100,this.fill.beginFill(O.red,.4),this.fill.drawRoundedRect(0,0,100,100,4),this.fill.endFill(),this.texture=G.app.renderer.generateTexture(this.fill),this.sprite=new PIXI.UI.SliceSprite(this.texture,2),this.sprite.width=0,this.addChild(this.sprite)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.startLine=function(t){this.sprite.width=this.lineWidth*t},e.prototype.position=function(t,e){this.x=t,this.y=e},e.prototype.redraw=function(t,e){this.fill.beginFill(O.red,.5),this.fill.drawRoundedRect(0,0,t,e,5),this.fill.endFill(),this.lineWidth=t,this.texture=G.app.renderer.generateTexture(this.fill),this.sprite.texture=this.texture,this.sprite.width=0,this.sprite.height=e},e}(PIXI.UI.Container),ue=function(t){var e=this,n=G.ratioX,i=document.getElementById("view-canvas");this.con=new PIXI.UI.Container("100%","100%"),this.LeftBtn=new qt(52*n),this.RightBtn=new Zt(54*n),this.RightBtn.anchorRight=199*n;var r=new ce;i.style.marginLeft=((G.width-i.width-305)/2+52)*n+"px",i.style.marginTop=(G.height-i.height)/2+"px",this.webMenu=new ne,this.webMenu.gatherBtn.button.interactive=this.webMenu.fullscreenBtn.button.interactive=this.webMenu.paintBtn.button.interactive=this.webMenu.bookmarkBtn.button.interactive=this.webMenu.printBtn.button.interactive=!1,this.webMenu.gatherBtn.button.emit("disable"),this.webMenu.fullscreenBtn.button.emit("disable"),this.webMenu.paintBtn.button.emit("disable"),this.webMenu.bookmarkBtn.button.emit("disable"),this.webMenu.printBtn.button.emit("disable"),this.con.addChild(this.LeftBtn,this.RightBtn,this.webMenu,r);var o,a,s=document.getElementById("page_input").textContent-1,l=zt.audioArr[s],h=[],c=new Array(zt.audioArr.length);c[s]=l.length;for(var u=0;u<l.length;u++){var d=l[u];void 0===d.hl?(o=null,a=null):(o=d.hl.endPos,a=d.hl.startPos),h.push({num:s,uuid:d.uuid,howl:null,endPos:o,startPos:a})}var p={playlist:h,idx:c};this.prevCard=new ie;var f=i.style.marginLeft,g=i.style.marginTop;f=parseFloat(f),g=parseFloat(g);var m=[];zt.cardArr.forEach((function(t){var n=t.list[s];if(void 0!==n){var r=t.sprite.texture,o=new PIXI.UI.Sprite(n.sprite.texture);o.width=n.width,o.height=n.height,o.x=n.relatePos.x*i.width+f,o.y=n.relatePos.y*i.height+g,o.tint=O.red,o.sprite.interactive=o.sprite.buttonMode=!0,o.sprite.on("click",(function(){e.prevCard.card.sprite.texture=r,e.con.addChild(e.prevCard)})),e.con.addChild(o);var a=new PIXI.UI.Sprite(t.sprite.texture);a.sprite.interactive=a.sprite.buttonMode=!0,a.sprite.on("click",(function(){e.prevCard.card.sprite.texture=a.sprite.texture,e.con.addChild(e.prevCard)})),m.push(a)}})),this.webMenu.webCard=new re(m),this.webMenu.webAudio=new he(p,s+1,s+1,this.LeftBtn,this.RightBtn,r),this.webMenu.webAudio.allBtn.button.interactive=!1,this.webMenu.cardBtn.button.emit("click"),this.webMenu.finBtn.button.on("click",(function(){e.webMenu.webAudio.container.emit("pause"),zt.viewWidth=1400,t.viewer.changeScalePage((function(){G.changeScene(t),i.style.marginLeft=((G.width-i.width-520)/2+328)*n+"px",i.style.marginTop=(G.height-i.height)/2+"px"}))}))};ue.prototype.update=function(t){},ue.prototype.resize=function(t,e){};var de=function(t){function e(e){var n=this,i=G.ratioX,r=G.ratioY;t.call(this,559*i,31*r),this.pageNum=10,this.pageSize=15,this.nowPage=1,this.buttonArray=[],this.buttonarr=[],this.max=Math.ceil(e/this.pageSize),this.max<this.pageNum&&(this.pageNum=this.max,this.short=!0,this.width=35*(this.max+4)*i),this.gofirstBtn=this.makeImagebtn({url:"go_first",width:20*i,height:20*i},0),this.gofirstBtn.onClick((function(){n.start()})),this.prevBtn=this.makeImagebtn({url:"page_prev",width:20*i,height:20*i},36*r),this.prevBtn.onClick((function(){n.preview()}));for(var o=36*i,a=function(t){o+=36*i;var e=n.makeTextBtn(t,o);e.onClick((function(){n.nowPage=Number(e.text.text),n.selectedBtn!==e&&n.change(e)})),t===n.nowPage?(n.selectedBtn=e,e.background.alpha=1):e.text._text.tint=O.textGray,n.buttonArray.push(e),n.buttonarr.push(e),n.addChild(e.button)},s=1;s<=n.pageNum;s++)a(s);this.nextBtn=this.makeImagebtn({url:"page_next",width:20*i,height:20*i},o+36*i),this.golastBtn=this.makeImagebtn({url:"go_last",width:20*i,height:20*i},o+72*i),this.nextBtn.onClick((function(){n.next()})),this.golastBtn.onClick((function(){n.end()})),1!==this.max&&this.addChild(this.nextBtn.button,this.golastBtn.button),this.short&&this.removeChild(this.golastBtn.button)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.check=function(){var t=this.max%this.pageNum;this.removeChild(this.prevBtn.button,this.gofirstBtn.button,this.nextBtn.button,this.golastBtn.button),1!==this.max&&(this.short?1===this.nowPage?this.addChild(this.nextBtn.button):this.nowPage<this.pageNum?this.addChild(this.prevBtn.button,this.nextBtn.button):this.nowPage===this.max&&this.addChild(this.prevBtn.button):1===this.nowPage?this.addChild(this.nextBtn.button,this.golastBtn.button):this.nowPage<=this.pageNum?this.addChild(this.prevBtn.button,this.nextBtn.button,this.golastBtn.button):this.pageNum<this.nowPage&&this.nowPage<=this.max-t?this.addChild(this.prevBtn.button,this.gofirstBtn.button,this.nextBtn.button,this.golastBtn.button):this.max-t<this.nowPage&&this.nowPage<this.max?this.addChild(this.prevBtn.button,this.gofirstBtn.button,this.nextBtn.button):this.nowPage===this.max&&this.addChild(this.prevBtn.button,this.gofirstBtn.button))},e.prototype.change=function(t){this.selectedBtn.background.alpha=0,this.selectedBtn.text._text.tint=O.textGray,t.background.alpha=1,t.text._text.tint=O.white,this.selectedBtn=t,this.container.emit("changePage",this.nowPage),this.check()},e.prototype.start=function(){this.buttonArray=this.buttonarr,this.pageNum=Number(this.pageNum);for(var t=Math.floor(this.nowPage/this.pageNum)-1,e=0;e<this.buttonArray.length;e++){var n=this.buttonArray[e];n.text.text=this.pageNum*t+e+1,this.addChild(n.button)}this.nowPage=this.pageNum*t+1,this.change(this.buttonArray[0])},e.prototype.end=function(){var t=this.max%this.pageNum,e=Math.floor(this.nowPage/this.pageNum)+1;if(this.nowPage=this.pageNum*e+1,this.nowPage<=this.max-t)for(var n=0;n<this.buttonArray.length;n++){this.buttonArray[n].text.text=this.pageNum*e+n+1}else{for(var i=[],r=0;r<this.buttonArray.length;r++){var o=this.buttonArray[r];if(r>=t)this.removeChild(o.button);else i.push(o),this.buttonArray[r].text.text=this.max-t+r+1}this.buttonArray=i}this.change(this.buttonArray[0])},e.prototype.next=function(){var t=this.max%this.pageNum;this.nowPage+=1;var e=this.nowPage%this.pageNum;if(0==e&&(e=this.pageNum),this.nowPage<=this.max-t)for(var n=0;n<this.buttonArray.length;n++){this.buttonArray[n].text.text=this.nowPage-e+1+n}else{for(var i=[],r=0;r<this.buttonArray.length;r++){var o=this.buttonArray[r];if(r>=t)this.removeChild(o.button);else i.push(o),this.buttonArray[r].text.text=this.max-t+r+1}this.buttonArray=i}var a=this.nowPage%this.pageNum-1;a<0&&(a=this.buttonArray.length-1),this.change(this.buttonArray[a])},e.prototype.preview=function(){this.pageNum=Number(this.pageNum);var t=this.max%this.pageNum;this.nowPage-=1;var e=this.nowPage%this.pageNum;if(0==e&&(e=this.pageNum),this.nowPage<=this.max-t){this.buttonArray=this.buttonarr;for(var n=0;n<this.buttonArray.length;n++){var i=this.buttonArray[n];i.text.text=this.nowPage-e+n+1,this.addChild(i.button)}}else{for(var r=[],o=0;o<this.buttonArray.length;o++){var a=this.buttonArray[o];if(o>=t)this.removeChild(a.button);else r.push(a),this.buttonArray[o].text.text=this.max-t+o+1}this.buttonArray=r}var s=this.nowPage%this.pageNum-1;s<0&&(s=this.buttonArray.length-1),this.change(this.buttonArray[s])},e.prototype.makeImagebtn=function(t,e){var n=G.ratioX,i=new Ot({width:31*n,height:31*n,line:1,lineColor:14671839,img:t,background:new PIXI.UI.Sprite(PIXI.Texture.EMPTY)});return i[t.url].anchorTop=9,i[t.url].tint=0,i[t.url].horizontalAlign="center",i[t.url].verticalAlign="middle",i.button.x=e,i},e.prototype.makeTextBtn=function(t,e){var n=G.ratioX,i=new Ot({width:31*n,height:31*n,line:1,tint:O.red,lineColor:O.red,text:{name:t,style:L.White12_R}});return i.background.alpha=0,i.button.x=e,i},e}(PIXI.UI.Container),pe=function(t){this.check=!1;var e=new ge(t),n=new fe(t),i=G.app.renderer.generateTexture(e),r=G.app.renderer.generateTexture(n);return this.checkbox=new PIXI.UI.CheckBox({checked:t.checked,background:new PIXI.UI.Sprite(r),checkmark:new PIXI.UI.Sprite(i),checkgroup:t.group,value:t.value}),this.checkbox},fe=function(t){function e(e){t.call(this),this.UCsize=e.size,void 0!==e.lineColor?this.UClineColor=e.lineColor:this.UClineColor=0,void 0!==e.line?this.UCline=e.line:this.UCline=2,this.lineStyle(this.UCline,this.UClineColor,1,1,!0),this.drawRect(0,0,this.UCsize,this.UCsize),this.endFill()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.Graphics),ge=function(t){function e(e){t.call(this),this.Csize=e.size,void 0!==e.lineColor?this.ClineColor=e.lineColor:this.ClineColor=0,void 0!==e.insideColor?this.CinsideColor=e.insideColor:this.CinsideColor=16711680,void 0!==e.line?this.Cline=e.line:this.Cline=2;var n=.7*this.Csize,i=(this.Csize-n)/2;this.lineStyle(this.Cline,this.ClineColor,1,1,!0),this.beginFill(16777215),this.drawRect(0,0,this.Csize,this.Csize),this.endFill(),this.lineStyle(null),this.beginFill(this.CinsideColor),this.drawRect(i,i,n,n),this.endFill()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.Graphics),me=function(t){function e(){var e=this;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var n=new ve;this.card=n,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var i=new we;this.radioBox=function(t,n){i.setCallFucn=n,i.setchildNum=t,e.removeChild(e.card),e.card=i,e.addChild(e.card)},this.checkBox=function(){e.removeChild(e.card),e.card=n,e.addChild(e.card)},this.container.on("close",(function(){for(;e.card.listCon.children[0];)e.card.listCon.removeChild(e.card.listCon.children[0]);e.card.textinput.text="",e.card.textinput.emit("blur"),e.card.removeChild(e.card.pagenation),e.parent.emit("selectAudio"),e.parent.removeChild(e)})),this.addChild(this.filter)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),_e=function(t){function e(){var e=this,n=G.ratioX,i=G.ratioY,r=new PIXI.Graphics;!function(t,e,n,i,r,o){t.clear(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(737863),t.drawRoundedRect(0,0,e,n-i-r,o),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRect(0,i,e,2*r),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRoundedRect(0,i+r,e,n-i-r,o),t.endFill()}(r,1412*n,1051*i,52*i,7*i,3);var o=G.app.renderer.generateTexture(r);t.call(this,o),this.order_num=2,this.verticalAlign="middle",this.horizontalAlign="center",this.sortingContainer();var a=new PIXI.UI.Text("음성 / TTS 보관함",L.WhiteTitle);a.anchorTop=14*i,a.anchorLeft=39*n;var s=Bt(18*n),l=new PIXI.UI.Sprite(s);l.anchorTop=17*i,l.anchorRight=20*n,l.sprite.interactive=l.sprite.buttonMode=!0,l.sprite.on("click",(function(){e.parent.container.emit("close")}));var h=this.searchContainer(),c=new Ot({width:1306*n,height:40*i,line:1,lineColor:O.line,tint:O.green,text:{name:"등록하기",style:L.White12_R}});c.button.anchorBottom=10*i,c.button.horizontalAlign="center",this.enrollBtn=c,this.addChild(a,l,h,c.button)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={setCallFucn:{configurable:!0},setchildNum:{configurable:!0}};return n.setCallFucn.set=function(t){this.callFucn=t},n.setchildNum.set=function(t){this.childNum=t},e.prototype.makePageNation=function(t){var e=this;this.removeChild(this.pagenation);var n=G.ratioY,i=new de(t);i.container.on("changePage",(function(t,n){if(n){var i=n;e.container.emit("setList",i)}else et(t,e.order_num,e.textinput.value,(function(t){if(0===t.code){var n=t.data.pageList;e.container.emit("setList",n)}}))})),i.anchorBottom=70*n,i.horizontalAlign="center",this.pagenation=i,this.addChild(i)},e.prototype.sortingContainer=function(){var t=G.ratioX,e=G.ratioY,n=new PIXI.UI.Container(1250*t,52*e+3),i=new pe({size:11*t,value:"manager",line:3,insideColor:O.red}),r=new ut(n.width,1,O.line),o=new ut(n.width,2,O.line),a=be(75*t,53*e,"번호"),s=be(235*t,53*e,"제목"),l=be(115*t,53*e,"등록일"),h=be(115*t,53*e,"최근수정일"),c=new PIXI.UI.Text("미리듣기",L.Black12);i.verticalAlign="middle",i.anchorLeft=13*t,a.anchorLeft=36*t,s.anchorLeft=131*t,l.anchorRight=70*t,h.anchorRight=0,c.anchorRight=304*t,c.verticalAlign="middle",n.anchorLeft=53*t,n.anchorTop=160*e,r.anchorTop=0,o.anchorBottom=0,this.listCon=new PIXI.UI.Container(n.width,713*e),this.listCon.anchorLeft=53*t,this.listCon.anchorTop=n.anchorTop+n.height,this.managerCb=i,n.addChild(i,o,a,s,l,c,r),this.addChild(n,this.listCon)},e.prototype.searchContainer=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container(1304*e,220*n),r=new PIXI.Graphics;r.lineStyle(0),r.beginFill(O.red),r.drawRoundedRect(0,0,100*e,3,3),r.endFill();var o=new ht(r),a=new PIXI.UI.Text("제목",L.Black12);o.addChild(a),a.anchorLeft=20*e,a.anchorBottom=5*n,r.clear(),r.lineStyle(0),r.beginFill(O.red),r.drawRoundedRect(0,0,975*e,3,3),r.endFill();var s=new ht(r);o.anchorTop=s.anchorTop=30*n,s.anchorLeft=105*e,i.anchorTop=106*n,i.horizontalAlign="center";var l="검색어를 입력하세요.";this.textinput=new PIXI.UI.TextInput({background:PIXI.UI.Sprite(PIXI.Texture.WHITE),value:l,style:L.Black14,lineHeight:30*n,paddingLeft:10*e,width:"70%",height:30}),this.textinput.alpha=.5;var h=new PIXI.Texture.from("Q_icon"),c=new PIXI.UI.Sprite(h);c.tint=O.red,c.anchorRight=2*e,c.anchorBottom=3*n,c.width=c.height=20*e,s.addChild(c),i.addChild(o,s);var u,d=!1,p=!1;this.textinput.on("keydown",(function(e){17==e.which&&(d=!0),65==e.which&&1==d&&(console.log("ctrl+a!!!"),p=!0,u=t.textinput.value),67==e.which&&1==d&&console.log("ctrl+c!!!"),0==d&&"Enter"!==e.key&&(p=!1)})),this.textinput.on("keyup",(function(e){17==e.which&&(d=!1),"Enter"===e.key&&(p&&(t.textinput.value=u,console.log("this.textinput.value:",t.textinput.value),console.log("this.textinput.lastvalue:",t.textinput._lastValue),p=!1,u=""),t.textinput.blur(),c.sprite.emit("click"),""===t.textinput.value&&(t.textinput.value=l,t.textinput.alpha=.5))})),this.textinput.on("focus",(function(){(t.textinput.value.includes(l)||""==t.textinput._lastValue||" "==t.textinput.value)&&(console.log("focus!!!!!!!!!!!!!"),t.textinput.value="",t.textinput._lastValue="",t.textinput.alpha=1)})),this.textinput.on("blur",(function(){console.log("blur"),console.log("this.textinput.value:",t.textinput.value),""!==t.textinput.value&&" "!=t.textinput.value&&t.textinput.value!=l||(console.log("empty blur"),t.textinput.value=l,t.textinput.alpha=.5)})),this.textinput.anchorLeft=110,i.addChild(this.textinput);var f=new Ot({width:80*e,height:18*n,line:1,lineColor:O.white,text:{name:"최신등록순",style:L.White12_R}});f.button.text.tint=O.line;var g=new Ot({width:80*e,height:18*n,line:1,lineColor:O.white,text:{name:"오래된순",style:L.White12_R}});g.button.text.tint=O.red,f.button.anchorRight=g.button.width,g.button.anchorRight=0;var m=new ut(2,18*n,O.line);return m.anchorRight=74*e,g.button.anchorTop=f.button.anchorTop=m.anchorTop=13*n,i.addChild(f.button,g.button,m),c.sprite.interactive=c.sprite.buttonMode=!0,c.sprite.on("click",(function(){et(1,t.order_num,t.textinput.value,(function(e){if(0===e.code){t.makePageNation(e.data.total);var n=e.data.pageList;t.pagenation.container.emit("changePage",1,n)}}))})),f.onClick((function(){g.button.text.tint=O.line,f.button.text.tint=O.red,t.order_num=1,c.sprite.emit("click")})),g.onClick((function(){g.button.text.tint=O.red,f.button.text.tint=O.line,t.order_num=2,c.sprite.emit("click")})),i},Object.defineProperties(e.prototype,n),e}(PIXI.UI.Sprite),ve=function(){var t=this;this.selectedList=[],this.cbArr=[];var e=new _e;return e.enrollBtn.onClick((function(){var n,i=document.getElementById("page_input").textContent-1;(n=zt.audioArr[i]).push.apply(n,t.selectedList),t.selectedList=[],e.parent.container.emit("close")})),e.container.on("setList",(function(n){t.listItem(n,e.listCon,e.managerCb)})),e.managerCb.on("click",(function(){e.managerCb.checked?t.cbArr.map((function(t){t.checked=!1,t.emit("change",!1)})):t.cbArr.map((function(t){t.checked=!0,t.emit("change",!0)}))})),e};ve.prototype.listItem=function(t,e,n){for(var i=this,r=G.ratioX,o=G.ratioY,a=12*r,s=65*r,l=140*r,h=80*r,c=13*r,u=289*r;e.children[0];)e.removeChild(e.children[0]);for(var d=[],p=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),f=function(f){var g=t[f],m=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);m.width=e.width,m.height=46*o;var _=g.data_uuid,v=new PIXI.UI.Text(g.raw_no,L.Black12),w=new PIXI.UI.Text(g.title,L.Blue12);function b(t){var e=new Date(1e3*t),n=e.getFullYear(),i="0"+(e.getMonth()+1),r="0"+e.getDate(),o="0"+e.getHours(),a="0"+e.getMinutes();return n+"."+i.substr(-2)+"."+r.substr(-2)+" "+o.substr(-2)+":"+a.substr(-2)}var I=new PIXI.UI.Text(b(g.registerTime),L.Black12),y=new PIXI.UI.Text(b(g.registerTime),L.Black12),x=void 0,k=new Howl({src:[p+"/"+_],html5:!0,volume:0,onload:function(){x=k.duration()}}),C=new pe({size:11*r,line:1,insideColor:O.red,value:g.raw_no});i.selectedList.map((function(t){t.raw_no==g.raw_no&&(C.checked=!0)})),C.on("change",(function(t){if(t)i.selectedList.push({uuid:_,raw_no:g.raw_no,sound:k,duration:x,title:w.text});else{var e=i.selectedList.filter((function(t){if(t.raw_no!==g.raw_no)return t}));i.selectedList=e}})),C.on("click",(function(){C.checked&&(n.checked=!1)}));var B=new Ot({width:80*r,height:45*r,lineColor:O.white,img:{url:"audio_icon",width:22*r,height:18*o,tint:3355443}});B.background.alpha=0,B.onClick((function(){k.stop(),k.volume(1),k.play()}));var T=new ut(m.width,1,O.line);T.anchorBottom=0,C.anchorLeft=a,C.verticalAlign="middle",v.anchorLeft=s,v.verticalAlign="middle",w.anchorLeft=l,w.verticalAlign="middle",I.anchorRight=h,I.verticalAlign="middle",y.anchorRight=c,y.verticalAlign="middle",B.audio_icon.horizontalAlign="center",B.audio_icon.verticalAlign="middle",B.button.anchorRight=u,d.push(C),m.y=m.height*f,m.addChild(C,v,w,I,B.button,T),e.addChild(m),k.play()},g=0;g<t.length;g++)f(g);for(var m=!0,_=0;_<d.length;_++){if(!1===d[_].checked){m=!1;break}}this.cbArr=d,n.checked=m};var we=function(){var t=this;this.selected=void 0;var e=new _e;return e.enrollBtn.onClick((function(){var n=document.getElementById("page_input").textContent-1;zt.audioArr[n][e.childNum].title=t.selected.title,zt.audioArr[n][e.childNum].uuid=t.selected.uuid,zt.audioArr[n][e.childNum].raw_no=t.selected.raw_no,zt.audioArr[n][e.childNum].sound=t.selected.sound,zt.audioArr[n][e.childNum].duration=t.selected.duration,t.selected=void 0,e.parent.container.emit("close"),e.callFucn()})),e.container.on("setList",(function(n){t.listItem(n,e.listCon)})),e.managerCb.visible=!1,e};function be(t,e,n,i){var r=new PIXI.UI.Sprite(PIXI.Texture.WHITE);r.width=t,r.height=e,r.order=!0;var o=new PIXI.UI.Text(n,L.Black12);return o.verticalAlign="middle",o.horizontalAlign="center",r.addChild(o),r}we.prototype.listItem=function(t,e){for(var n=this,i=G.ratioX,r=G.ratioY,o=12*i,a=65*i,s=140*i,l=157*i,h=13*i,c=289*i;e.children[0];)e.removeChild(e.children[0]);for(var u=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw"),d=function(d){var p=t[d],f=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);f.width=e.width,f.height=46*r;var g=p.data_uuid,m=new PIXI.UI.Text(p.raw_no,L.Black12),_=new PIXI.UI.Text(p.title,L.Blue12),v=new Date(p.registerTime),w=new PIXI.UI.Text(v.getFullYear()+"."+(v.getMonth()+1)+"."+v.getDate()+" "+(v.getHours()<10?"0":"")+v.getHours()+":"+(v.getMinutes()<10?"0":"")+v.getMinutes(),L.Black12),b=new Date(p.registerTime),I=new PIXI.UI.Text(b.getFullYear()+"."+(b.getMonth()+1)+"."+b.getDate()+" "+(b.getHours()<10?"0":"")+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes(),L.Black12),y=void 0,x=new Howl({src:[u+"/"+g],html5:!0,volume:0,onload:function(){y=x.duration()}}),k=new pe({size:11*i,line:1,insideColor:O.red,value:p.raw_no,group:"radio"});n.selected&&n.selected.raw_no===p.raw_no&&(k.checked=!0),k.on("change",(function(t){t?n.selected={uuid:g,raw_no:p.raw_no,sound:x,duration:y,title:_.text}:n.selected.raw_no===p.raw_no&&(n.selected=void 0)}));var C=new Ot({width:80*i,height:45*i,lineColor:O.white,img:{url:"audio_icon",width:22*i,height:18*r}});C.background.alpha=0,C.onClick((function(){x.stop(),x.volume(1),x.play()}));var B=new ut(f.width,1,O.line);B.anchorBottom=0,k.anchorLeft=o,k.verticalAlign="middle",m.anchorLeft=a,m.verticalAlign="middle",_.anchorLeft=s,_.verticalAlign="middle",w.anchorRight=l,w.verticalAlign="middle",I.anchorRight=h,I.verticalAlign="middle",C.audio_icon.horizontalAlign="center",C.audio_icon.verticalAlign="middle",C.button.anchorRight=c,f.y=f.height*d,f.addChild(k,m,_,w,I,C.button,B),e.addChild(f),x.play()},p=0;p<t.length;p++)d(p)};var Ie=function(t){var e=new xe(t),n=new ye(t),i=G.app.renderer.generateTexture(e),r=G.app.renderer.generateTexture(n);return this.radiobox=new PIXI.UI.CheckBox({checked:t.checked,background:new PIXI.UI.SliceSprite(r),checkmark:new PIXI.UI.SliceSprite(i,9),checkgroup:t.group,value:t.value}),this.radiobox.x=t.x,this.radiobox.y=t.y,this.radiobox.scaleX=.5,this.radiobox.scaleY=.5,this.radiobox},ye=function(t){function e(e){t.call(this),this.URsize=2*e.size,void 0!==e.lineColor?this.URlineColor=e.lineColor:this.URlineColor=0,void 0!==e.line?this.URline=e.line:this.URline=2,this.lineStyle(this.URline,this.URlineColor,1,1,!0),this.beginFill(16777215),this.drawCircle(0,0,this.URsize),this.endFill()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.Graphics),xe=function(t){function e(e){t.call(this),this.Rsize=2*e.size,void 0!==e.lineColor?this.RlineColor=e.lineColor:this.RlineColor=0,void 0!==e.insideColor?this.RinsideColor=e.insideColor:this.RinsideColor=15293539,void 0!==e.line?this.Rline=e.line:this.Rline=2;var n=.7*this.Rsize;this.lineStyle(this.Rline,this.RlineColor,1,1,!0),this.beginFill(16777215),this.drawCircle(0,0,this.Rsize),this.endFill(),this.lineStyle(null),this.beginFill(this.RinsideColor),this.drawCircle(0,0,n),this.endFill()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.Graphics),ke=function(t){function e(e){var n=this;t.call(this,"100%","100%");var i=G.ratioX,r=G.ratioY;this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var o=new PIXI.Graphics;!function(t,e,n,i,r,o){t.clear(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(O.green),t.drawRoundedRect(0,0,e,n-i-r,o),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRect(0,i,e,2*r),t.endFill(),t.lineStyle(1,16777215,1,1,!0),t.beginFill(16777215),t.drawRoundedRect(0,i+r,e,n-i-r,o),t.endFill()}(o,790*i,281*r,52*r,7*r,10);var a=G.app.renderer.generateTexture(o);this.card=new PIXI.UI.Sprite(a),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var s=new Ot({width:100*i,height:40*r,tint:O.green,line:0,text:{name:"저장",style:L.White12}}),l=new Ot({width:100*i,height:40*r,lineColor:O.line,text:{name:"취소",style:L.Black12}});l.button.anchorRight=40*i,s.button.anchorRight=145*i,l.button.anchorBottom=s.button.anchorBottom=42*r;var h=new PIXI.UI.Text("스토리 뷰어 저장하기",L.WhiteTitle);h.anchorTop=14*r,h.anchorLeft=53*i;var c=new PIXI.UI.Text("제목",L.Black14_bold),u=new PIXI.UI.Text(zt.title,L.Gray14),d=new ut(550*i,2,O.line);u.anchorBottom=167*r,d.anchorTop=u.height+2,d.anchorLeft=-4,u.addChild(d),u.anchorLeft=210*i;var p=new PIXI.UI.Text("스토리 뷰어 상태",L.Black14_bold);p.anchorBottom=110*r,p.anchorLeft=54*i,c.anchorBottom=166*r,c.anchorLeft=54*i;var f=Bt(18*i),g=new PIXI.UI.Sprite(f);g.anchorTop=17*r,g.anchorRight=20*i,g.sprite.interactive=g.sprite.buttonMode=!0,g.sprite.on("click",(function(){n.container.emit("close")})),this.container.on("close",(function(){n.parent.removeChild(n)})),l.onClick((function(){n.container.emit("close")})),s.onClick((function(){e(),n.container.emit("close")}));var m=new Ie({x:338*i,y:155*r,size:6,value:1,group:"radioStory"}),_=new Ie({x:229*i,y:155*r,size:6,value:2,group:"radioStory"}),v=new Ie({x:449*i,y:155*r,size:6,value:0,group:"radioStory"}),w=new PIXI.UI.Text("작성 완료",L.Black12),b=new PIXI.UI.Text("작성 중",L.Black12),I=new PIXI.UI.Text("발행",L.Black12);if(w.anchorLeft=251*i,b.anchorLeft=360*i,I.anchorLeft=469*i,w.anchorBottom=b.anchorBottom=I.anchorBottom=110*r,void 0===zt.state)zt.state=1,m.checked=!0;else switch(zt.state){case 0:v.checked=!0;break;case 1:m.checked=!0;break;case 2:_.checked=!0}_.on("change",(function(t){t&&(zt.state=_.value)})),m.on("change",(function(t){t&&(zt.state=m.value)})),v.on("change",(function(t){t&&(zt.state=0)})),this.card.addChild(l.button,s.button,p,h,g,_,m,w,b,c,u),zt.isFirst||this.card.addChild(v,I),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container);var Ce=function(t){function e(e){var n=this;t.call(this,"100%","100%"),this.filter=new dt("100%","100%");var i=G.ratioX,r=G.ratioY;this.filter.sprite.interactive=!1;var o=new PIXI.Graphics;o.lineStyle(2,16777215,1),o.beginFill(16777215),o.drawRoundedRect(0,0,410*i,198*r,4),o.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(o)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var a=new Ot({width:120*i,height:40*r,lineColor:O.line,text:{name:"종료하기",style:L.Black14}}),s=new Ot({width:120*i,height:40*r,tint:O.green,line:0,text:{name:"계속편집하기",style:L.White14}});a.button.anchorBottom=68*r,s.button.anchorBottom=18*r,a.button.horizontalAlign=s.button.horizontalAlign="center";var l=new PIXI.UI.Text("스토리 제작도구를 ",L.Black16),h=new PIXI.UI.Text("종료 ",L.Red16),c=new PIXI.UI.Text("하시겠습니까?",L.Black16),u=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);u.width=l.width+h.width+c.width,h.x=l.width,c.x=h.x+h.width,u.addChild(l,h,c);var d=new PIXI.UI.Text("저장되었습니다.",L.Black16);u.horizontalAlign=d.horizontalAlign="center",d.y=20*r,u.y=d.height+d.y+2,this.container.interactive=!0,this.container.on("close",(function(){n.parent.removeChild(n)})),s.onClick((function(){n.container.emit("close")})),a.onClick((function(){a.button.blur(),e(),n.container.emit("close")})),this.card.addChild(a.button,s.button,u,d),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),Be=function(t){function e(e){var n=this;t.call(this,"100%","100%"),this.filter=new dt("100%","100%");var i=G.ratioX,r=G.ratioY;this.filter.sprite.interactive=!1;var o=new PIXI.Graphics;o.lineStyle(2,16777215,1),o.beginFill(16777215),o.drawRoundedRect(0,0,410*i,172*r,4),o.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(o)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var a=new Ot({width:120*i,height:40*r,lineColor:O.line,text:{name:"종료하기",style:L.Black14}}),s=new Ot({width:120*i,height:40*r,tint:O.green,line:0,text:{name:"계속편집하기",style:L.White14}});a.button.anchorBottom=68*r,s.button.anchorBottom=18*r,a.button.horizontalAlign=s.button.horizontalAlign="center";var l=new PIXI.UI.Text("스토리 제작도구를 ",L.Black16),h=new PIXI.UI.Text("종료 ",L.Red16),c=new PIXI.UI.Text("하시겠습니까?",L.Black16),u=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);u.width=l.width+h.width+c.width,h.x=l.width,c.x=h.x+h.width,u.addChild(l,h,c),u.anchorTop=20*r,u.horizontalAlign="center",this.container.interactive=!0,this.container.on("close",(function(){n.parent.removeChild(n)})),s.onClick((function(){n.container.emit("close")})),a.onClick((function(){a.button.blur(),e(),n.container.emit("close")})),this.card.addChild(a.button,s.button,u),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),Te=function(t){function e(){t.call(this,"100%","100%"),this.filter=new dt("100%","100%");var e=new PIXI.Graphics;e.lineStyle(2,16777215,1),e.beginFill(16777215),e.drawRoundedRect(0,0,410*G.ratioX,120*G.ratioY,4),e.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(e)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var n=new PIXI.UI.Text("",L.Black16);n.anchorTop=(this.card.height-n.height)/2,n.horizontalAlign="center",this.txt=n,this.card.addChild(n),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Setpublish=function(t){var e=G.ratioX,n=G.ratioY;this.txt.anchorTop=20*n;var i=new Ot({tint:O.green,text:{name:"스토리 저작도구 닫기",style:L.White14},width:162*e,height:36*n});this.txt.text="발행되었습니다.",i.onClick((function(){i.button.blur(),t()})),i.button.anchorBottom=20*n,i.button.horizontalAlign="center",this.card.addChild(i.button)},e}(PIXI.UI.Container),Se=null,Pe=function(){};Pe.setCloseFunc=function(t){Se=t},Pe.closePeachPIXI=function(){PIXI.utils.clearTextureCache(),null!==Se?Se():window.history.back()};var Ae=function(t){var e=this,n=G.ratioX;zt.viewWidth=1400,this.con=new PIXI.UI.Container("100%","100%");var i=document.getElementById("view-canvas"),r=this.con;this.tileGrid=new PIXI.UI.TilingSprite(PIXI.Texture.from("grid"),G.width,G.height),this.tileGrid.tint=16448250,this.tileGrid.alpha=0,this.tileGrid.tileScale.x=this.tileGrid.tileScale.y=.5,this.leftmenu=new Dt,this.rightmenu=new Yt(this.tileGrid),this.leftmenu.filterOn(),this.rightmenu.filterOn(),this.url=t,this.con.on("filterOn",(function(){e.leftmenu.filterOn(),e.rightmenu.filterOn()})),this.con.on("filterOff",(function(){e.leftmenu.filterOff(),e.rightmenu.filterOff()}));var o=this.leftmenu;this.callBackFunc={update:function(){r.emit("selectCard"),r.emit("selectAudio")},const:function(t){i.style.marginTop=(G.height-i.height)/2+"px",i.style.marginLeft=((G.width-i.width-520)/2+328)*n+"px",zt.initArray(t),zt.rollbackArray(),G.paintApp(),o.makeCardContainer()},thumb:function(t,e){this.scrollThumb=new Vt(t,e),r.addChild(this.scrollThumb)}},this.LeftBtn=new qt(107*n),this.RightBtn=new Zt(107*n),this.LeftBtn.anchorLeft=221*n,this.RightBtn.anchorRight=83*n,this.viewer=new Kt(t,this.callBackFunc,this.RightBtn,this.LeftBtn,300,200),this.con.addChild(this.tileGrid,this.LeftBtn,this.RightBtn,this.leftmenu,this.rightmenu),this.addEvent()};Ae.prototype.addEvent=function(){var t=this,e=new Te,n=function(){if(zt.isSaved){t.con.addChild(e);var n=new Mt,i=JSON.stringify(zt.data);n.file("setting.txt",i),n.file(zt.pdf.name,zt.pdf),n.generateAsync({type:"blob",compression:"DEFLATE"},(function(t){e.txt.text="zip파일 생성중 ... "+(t.percent||0)+" %"})).then((function(t){var n,i,r,o,a,s,l=new File([t],zt.title+".zip",{type:"application/zip"});zt.isFirst?(n=zt.story_tag,i=zt.state,r=zt.cards,o=l,a=function(t){0===t.code?e.txt.text="서버전송 완료":e.txt.text="서버전송 실패",setTimeout((function(){Pe.closePeachPIXI()}),500)},(s=new FormData).append("raw_taggings",n),s.append("raw_status",i),s.append("raw_cards",r),s.append("raw_data",o),V("POST","admin/v2/raw/story",s,a)):(nt(zt.raw_num,zt.state,(function(t){0===t.code?e.txt.text="상태변경 완료...":e.txt.text="상태변경 실패"})),function(t,e,n,i){var r=new FormData;r.append("raw_number",t),r.append("raw_cards",e),r.append("raw_data",n),V("POST","admin/v2/raw/story/edit",r,i)}(zt.raw_num,zt.cards,l,(function(t){0===t.code?e.txt.text="서버전송 완료!":e.txt.text="서버전송 실패",setTimeout((function(){Pe.closePeachPIXI()}),500)})))}))}else setTimeout((function(){Pe.closePeachPIXI()}),500)},i=new $t,r=new me,o=new Ce(n),a=new Be(n),s=new ke((function(){zt.saveAudioData(),zt.saveCardData(),zt.setData(),0===zt.state?nt(zt.raw_num,zt.state,(function(n){0===n.code&&(t.con.addChild(e),e.Setpublish(Pe.closePeachPIXI))})):t.con.addChild(o)}));this.con.on("editCard",(function(e,n){i.editScroll(e,n),t.con.addChild(i)})),this.con.on("editAudio",(function(e,n){r.radioBox(e,n),t.con.addChild(r)})),this.con.on("selectCard",(function(){t.leftmenu.makeCardContainer(zt.cardArr)})),this.con.on("selectAudio",(function(){t.leftmenu.makeAudioContainer()})),this.rightmenu.gatherBtn.onClick((function(){t.con.addChild(t.callBackFunc.scrollThumb),t.con.emit("filterOn")})),this.rightmenu.cardBtn.onClick((function(){i.selectScroll(),t.con.addChild(i)})),this.rightmenu.audioBtn.onClick((function(){r.checkBox(),t.con.addChild(r)})),this.rightmenu.previewBtn.onClick((function(){var e=t;zt.viewWidth=1614,t.viewer.changeScalePage((function(){G.changeScene(new ue(e))}))})),this.rightmenu.saveBtn.onClick((function(){t.con.addChild(s)})),this.rightmenu.finBtn.onClick((function(){t.con.addChild(a)})),this.rightmenu.gridBtn.onClick((function(){1===t.tileGrid.alpha?t.tileGrid.alpha=0:t.tileGrid.alpha=1})),this.rightmenu.hlBtn.onClick((function(){var t=prompt("숫자만 입력하세요",zt.hlHeight),e=Number(t);0===e||isNaN(t)||(zt.hlHeight=e)}))},Ae.prototype.update=function(t){},Ae.prototype.resize=function(t,e){};var Xe=function(t,e,n,i,r){var o=G.ratioX,a=G.ratioY,s=new PIXI.Graphics;s.lineStyle(0),s.beginFill(16777215),s.drawRoundedRect(0,0,n,i,3*o),s.endFill();var l=new ct(s),h=new PIXI.Texture.from("circle"),c=new PIXI.UI.Sprite(h);c.width=c.height=r,c.tint=t,s.clear(),s.lineStyle(1.5,14408667,1,1,!0),s.beginFill(16777215),s.drawRoundedRect(0,0,35*o,23*a,5*o),s.endFill();var u=new ht(s),d=new PIXI.UI.Text("0",L.Black14_R);u.addChild(d),u.bottom=-10*a,d.verticalAlign="middle",d.horizontalAlign="center",u.horizontalAlign="center";var p=new PIXI.UI.Slider({track:new PIXI.UI.SliceSprite(l,3),handle:c,fill:new PIXI.UI.SliceSprite(l,3),value:10,minValue:0,maxValue:100,decimals:0,onValueChanging:function(t){d.value=t+""}});return p.width=n,p.fill.tint=e,p.track.tint=e,p.handle.addChild(u),p};var Re=function(t,e,n,i){this.penPaths=[],this.con=t,this.inputCon=n,this.tCon=e,this.graphics=G.paint.stage.addChild(i),this.preparePen(),this.prepareText(),this.prepareHl(),this.prepareShape(),this.prepareEraser(),this.prepareSelect()},Ee={penThickness:{configurable:!0},fontSize:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},setstartPos:{configurable:!0},tiMinWidth:{configurable:!0},tiMinHeight:{configurable:!0}};Ee.penThickness.set=function(t){this._penThickness=t},Ee.fontSize.set=function(t){this._fontSize=t},Ee.alpha.set=function(t){this._alpha=t},Ee.color.set=function(t){this._color=t},Ee.setstartPos.set=function(t){this.startPos=t},Ee.tiMinWidth.get=function(){return 6*this._fontSize},Ee.tiMinHeight.get=function(){return this._fontSize+10},Re.prototype.preparePen=function(){var t=this,e=this.graphics;this.polypath=[],this.reversPath=[],this.penEvent=function(n){if(document.dragging){n.offsetX<e.minX&&(e.minX=n.offsetX),n.offsetY<e.minY&&(e.minY=n.offsetY);var i=Math.abs(90*Math.PI/180-Math.atan2(n.movementY,n.movementX)),r=Math.cos(i)*(n.offsetX+t._penThickness/2)-Math.sin(i)*n.offsetY,o=Math.sin(i)*(n.offsetX+t._penThickness/2)+Math.sin(i)*n.offsetY;0===t.reversPath.length?(t.reversPath.push(n.offsetX),t.reversPath.push(n.offsetY)):(t.reversPath.push(r),t.reversPath.push(o)),t.penPaths.push({offsetX:n.offsetX,offsetY:n.offsetY}),t.polypath.push(n.offsetX),t.polypath.push(n.offsetY),t.graphics.clear(),t.graphics.lineStyle({width:t._penThickness,color:t._color,alpha:t._alpha,join:"round",cap:"round"}),t.graphics.moveTo(t.startPos.offsetX,t.startPos.offsetY),t.penPaths.forEach((function(e){t.graphics.lineTo(e.offsetX,e.offsetY)}))}}},Re.prototype.prepareText=function(){var t=this;this.textMap=new Map,this.tMap=new Map;var e=document.getElementById("paint_canvas");this.isBlur,this.textEvent=function(n,i){var r=new PIXI.UI.Text("",{fontSize:t._fontSize,fill:t._color,fontfamily:"Noto Sans KR"});return r.visible=!1,t.text=new PIXI.UI.TextInput({background:new PIXI.UI.Sprite(PIXI.Texture.WHITE),value:"",style:{fontSize:t._fontSize,fill:t._color,fontfamily:"Noto Sans KR"},lineHeight:t._fontSize,width:t.tiMinWidth,height:t.tiMinHeight}),t.text.container.zIndex=i,t.text.container._lastSortedIndex=i,t.tMap.set(t.text.container.zIndex,r),t.textMap.set(t.text.container.zIndex,t.text),16777215===t._color&&(text.background.tint=0),t.text.x=r.x=n.offsetX,t.text.y=r.y=n.offsetY,t.text.on("change",(function(){t.text.width=Math.max(t.tiMinWidth,t.text.textContainer.innerContainer.width),t.text.height=Math.max(t.tiMinHeight,t.text.textContainer.innerContainer.height)})),t.text.on("focus",(function(){""===t.text.value&&(t.text.value="",t.text.alpha=1)})),t.text.on("blur",(function(){t.isBlur=!0,""!==t.text.value&&""!==t.text.value||t.tCon.removeChild(t.tMap.get(t.text.container.zIndex-1)),t.inputCon.removeChild(t.textMap.get(t.text.container.zIndex-1)),r.text=t.text.text,r.visible=!0,e.style.cursor="default"})),e.addEventListener("mousedown",t.onTextBoxEvent(t.text,"")),t.inputCon.addChild(t.textMap.get(t.text.container.zIndex)),t.tCon.addChild(t.tMap.get(t.text.container.zIndex)),setTimeout((function(){t.text.focus(),document.getElementById("_pui_tempInput").focus()}),20),r}},Re.prototype.onTextBoxEvent=function(t,e){this.isBlur?this.isBlur=!1:(""!==t.value&&t.value!==e||this.tCon.removeChild(this.tMap.get(t.container.zIndex-1)),this.inputCon.removeChild(this.textMap.get(t.container.zIndex-1)))},Re.prototype.prepareHl=function(){var t=this,e=this.graphics;this.hlEvent=function(n){document.dragging&&(n.offsetX<e.minX&&(e.minX=n.offsetX),n.offsetY<e.minY&&(e.minY=n.offsetY),t.penPaths.push({offsetX:n.offsetX,offsetY:n.offsetY}),t.polypath.push(n.offsetX),t.polypath.push(n.offsetY),t.graphics.clear(),t.graphics.lineStyle({width:t._penThickness,color:t._color,alpha:.8*t._alpha,join:"miter",cap:"miter"}),t.graphics.moveTo(t.startPos.offsetX,t.startPos.offsetY),t.penPaths.forEach((function(e){t.graphics.lineTo(e.offsetX,e.offsetY)})))}},Re.prototype.prepareShape=function(){var t,e,n,i,r=this,o=G.paint.renderer.width/4,a=(t=o,e=o,n=G.paint,(i=new PIXI.Graphics).lineStyle(6,16777215,1),i.drawRect(0,0,t,e),i.endFill(),n.renderer.generateTexture(i)),s=function(t,e){var n=new PIXI.Graphics;return n.lineStyle(14,16777215,1,0),n.drawCircle(0,0,t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),l=function(t,e,n){var i=new PIXI.Graphics;return i.lineStyle(10,16777215,1),i.drawPolygon([t/2,0,0,e,t,e]),i.endFill(),i.endFill(),n.renderer.generateTexture(i)}(o,o,G.paint),h=function(t,e){var n=new PIXI.Graphics;return n.lineStyle(10,16777215,1),n.drawStar(0,0,6,t,.9*t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),c=function(t,e){var n=new PIXI.Graphics;return n.lineStyle(10,16777215,1,1),n.drawStar(0,0,5,t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),u=function(t,e,n){var i=new PIXI.Graphics;return i.lineStyle(0),i.beginFill(16777215),i.drawRect(0,0,t,e),i.endFill(),n.renderer.generateTexture(i)}(o,o,G.paint),d=function(t,e){var n=new PIXI.Graphics;return n.lineStyle(4,16777215,1,0),n.beginFill(16777215),n.drawCircle(0,0,t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),p=function(t,e,n){var i=new PIXI.Graphics;return i.beginFill(16777215),i.lineStyle(0),i.drawPolygon([t/2,0,0,e,t,e]),i.endFill(),n.renderer.generateTexture(i)}(o,o,G.paint),f=function(t,e){var n=new PIXI.Graphics;return n.beginFill(16777215),n.lineStyle(3,16777215,1),n.drawStar(0,0,6,t,.9*t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),g=function(t,e){var n=new PIXI.Graphics;return n.beginFill(16777215),n.lineStyle(3,16777215,1,1),n.drawStar(0,0,5,t),n.endFill(),e.renderer.generateTexture(n)}(o,G.paint),m=function(t,e,n){var i=new PIXI.Graphics;return i.lineStyle({width:10,color:16777215,alpha:1,join:"miter",cap:"round"}),i.moveTo(0,e/2),i.lineTo(t/4,0),i.lineTo(t/4,e),i.lineTo(0,e/2),i.moveTo(t/4,e/2),i.lineStyle({width:20,color:16777215,alpha:1,join:"miter",cap:"miter"}),i.lineTo(t/4*3,e/2),n.renderer.generateTexture(i)}(o,o,G.paint),_=function(t,e,n){var i=new PIXI.Graphics;return i.moveTo(t/4,e/2),i.lineStyle({width:20,color:16777215,alpha:1,join:"miter",cap:"miter"}),i.lineTo(t/4*3,e/2),i.lineStyle({width:10,color:16777215,alpha:1,join:"miter",cap:"round"}),i.moveTo(t,e/2),i.lineTo(t/4*3,e),i.lineTo(t/4*3,0),i.lineTo(t,e/2),n.renderer.generateTexture(i)}(o,o,G.paint),v=function(t,e,n){var i=new PIXI.Graphics;return i.lineStyle({width:10,color:16777215,alpha:1,join:"miter",cap:"round"}),i.moveTo(0,e/2),i.lineTo(t/4,0),i.lineTo(t/4,e),i.lineTo(0,e/2),i.moveTo(t/4,e/2),i.lineStyle({width:20,color:16777215,alpha:1,join:"miter",cap:"miter"}),i.lineTo(t/4*3,e/2),i.lineStyle({width:10,color:16777215,alpha:1,join:"miter",cap:"round"}),i.moveTo(t,e/2),i.lineTo(t/4*3,e),i.lineTo(t/4*3,0),i.lineTo(t,e/2),n.renderer.generateTexture(i)}(o,o,G.paint),w=function(t,e,n){var i=new PIXI.Graphics;return i.moveTo(0,e/2),i.lineStyle({width:15,color:16777215,alpha:1,join:"round",cap:"round"}),i.lineTo(t/2,e),i.lineTo(t,0),n.renderer.generateTexture(i)}(o,o,G.paint);this.shapeSprite=new PIXI.UI.Sprite(u),this.shapeEvent=function(t){if(document.dragging){r.shapeSprite.alpha=r._alpha,r.shapeSprite.x=r.startPos.offsetX,r.shapeSprite.y=r.startPos.offsetY;var e=r.startPos.offsetX-t.offsetX,n=r.startPos.offsetY-t.offsetY,i=Math.abs(e),o=Math.abs(n);switch(r.shapeSprite.width=i,r.shapeSprite.height=o,r.shapeSprite.tint=r._color,r.shapeSprite.rotation=0,r.shapeSprite.pivotX=e>=0?1:0,r.shapeSprite.pivotY=n>=0?1:0,r.shape){case"strokeRec":r.shapeSprite.sprite.texture=a;break;case"strokeCir":r.shapeSprite.sprite.texture=s;break;case"strokeTri":r.shapeSprite.sprite.texture=l;break;case"strokehex":r.shapeSprite.sprite.texture=h;break;case"strokestar":r.shapeSprite.sprite.texture=c;break;case"rec":r.shapeSprite.sprite.texture=u;break;case"cir":r.shapeSprite.sprite.texture=d;break;case"tri":r.shapeSprite.sprite.texture=p;break;case"hex":r.shapeSprite.sprite.texture=f;break;case"star":r.shapeSprite.sprite.texture=g;break;case"left":r.shapeSprite.sprite.texture=m;break;case"right":r.shapeSprite.sprite.texture=_;break;case"check":r.shapeSprite.sprite.texture=w;break;case"two":r.shapeSprite.sprite.texture=v}r.con.addChild(r.shapeSprite)}}},Re.prototype.prepareEraser=function(){this.eraserEvent=function(){document.dragging&&(document.removing=!0)}},Re.prototype.prepareSelect=function(){this.selectEvent=function(){}},Object.defineProperties(Re.prototype,Ee);var ze=function(t){function e(e,n,i,r){var o=G.ratioY;t.call(this,"100%",925*o),this.inputCon=new PIXI.UI.Container("100%","100%"),this.con=new PIXI.UI.Container("100%","100%"),this.tCon=new PIXI.UI.Container("100%","100%"),this.con.container.sortableChildren=!0,this.tCon.container.sortableChildren=!0,G.paintStage.addChild(this.con,this.tCon,this.inputCon),this.graphic=new PIXI.Graphics,this.events=new Re(this.con,this.tCon,this.inputCon,this.graphic),G.paintArr=[],this.nowPage=n,this.page=e,this.prevPage=this.nowPage-2,this.nextPage=this.nowPage+2,this.LeftBtn=i,this.RightBtn=r,this.sectionColor(),this.sectionText(),this.sectionDraw(),this.sectionButtonEct(),this.eventHandler()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateIndex=function(t){this.nowPage=t,this.prevPage=t-2,this.nextPage=t+2},e.prototype.makeBtn=function(t,e,n,i,r,o,a){var s=this,l=G.ratioX,h=new Ot({width:i,height:r,line:1.5,lineColor:O.button,rounded:5,img:t});return h.addText({text:e,style:L.Black15_R,name:n}),h[n].verticalAlign="middle",h[n].anchorLeft=o*l,h.button.horizontalAlign="center",t.url&&(h[t.url].anchorLeft=35*l,h[t.url].verticalAlign="middle",h[t.url].width*=l,h[t.url].height*=l),h.onClick((function(){s.selected=h,s.tooltip.visible=!1,s.buttonArray.map((function(t){t===h?h.backgroundColor=O.button:t.backgroundColor=O.white}))})),h},e.prototype.makeIconButton=function(t){var e=this,n=G.ratioX,i=new Ot({width:56*n,height:56*n,line:1.5,lineColor:O.button,rounded:5,img:t});return i[t.url].horizontalAlign="center",i[t.url].verticalAlign="middle",i[t.url].width*=n,i[t.url].height*=n,i.onClick((function(){e.tooltip.visible=!1,e.buttonArray.map((function(t){t===i?i.backgroundColor=O.button:t.backgroundColor=O.white})),e.selected=i})),i},e.prototype.makeShapeButton=function(t,e,n,i,r,o){var a=this,s=G.ratioX,l=new Ot({width:30*s,height:30*s,line:1.5,lineColor:O.button,rounded:5});l.pos(i,r);var h=new PIXI.UI.Sprite(t);return h.width=e,h.height=n,h.horizontalAlign="center",h.verticalAlign="middle",l.button.addChild(h),l.onClick((function(){a.shapesArray.map((function(t){t===l?l.backgroundColor=O.button:t.backgroundColor=O.white})),a.shape=o})),l},e.prototype.sectionDraw=function(){var t=G.ratioX,e=G.ratioY,n=new ut(199*t,142*e,O.lightGray);n.anchorLeft=1*t,n.anchorTop=60*e;var i=new PIXI.Texture.from("shapes_tooltip"),r=new PIXI.UI.Sprite(i);r.width=179*t,r.height=175*e,r.horizontalAlign="center",r.anchorTop=185*e,this.tooltip=r;var o=this.makeShapeButton(new PIXI.Texture.from("rec_stroke"),17*t,17*t,7*t,20*e,"strokeRec",3355443),a=this.makeShapeButton(new PIXI.Texture.from("cir_stroke"),17*t,17*t,41*t,20*e,"strokeCir",3355443),s=this.makeShapeButton(new PIXI.Texture.from("tri_stroke"),19*t,16*e,75*t,20*e,"strokeTri",3355443),l=this.makeShapeButton(new PIXI.Texture.from("hex_stroke_new"),17*t,17*t,109*t,20*e,"strokehex",3355443),h=this.makeShapeButton(new PIXI.Texture.from("star_stroke"),19*t,19*t,143*t,20*e,"strokestar",3355443),c=this.makeShapeButton(new PIXI.Texture.from("rec"),17*t,17*t,7*t,54*e,"rec",O.red),u=this.makeShapeButton(new PIXI.Texture.from("cir"),17*t,17*t,41*t,54*e,"cir",O.red),d=this.makeShapeButton(new PIXI.Texture.from("tri"),19*t,16*e,75*t,54*e,"tri",O.red),p=this.makeShapeButton(new PIXI.Texture.from("hex"),17*t,17*t,109*t,54*e,"hex",O.red),f=this.makeShapeButton(new PIXI.Texture.from("star"),19*t,19*t,143*t,54*e,"star",O.red),g=this.makeShapeButton(new PIXI.Texture.from("check_new"),18*t,9*t,7*t,88*e,"check",O.red),m=this.makeShapeButton(new PIXI.Texture.from("arrow_right_new"),18*t,9*t,41*t,88*e,"right",O.red),_=this.makeShapeButton(new PIXI.Texture.from("arrow_left_new"),18*t,9*t,75*t,88*e,"left",O.red),v=this.makeShapeButton(new PIXI.Texture.from("two_way_arrow_new"),19*t,9*t,109*t,88*e,"two",O.red);r.visible=!1,r.addChild(o.button,a.button,s.button,l.button,h.button,c.button,u.button,d.button,p.button,f.button,g.button,_.button,m.button,v.button),this.shapesArray=[o,a,o,s,l,h,c,u,d,p,f,_,m,g,v],o.button.emit("click"),this.penButton=this.makeIconButton({url:"pen_icon"}),this.hlButton=this.makeIconButton({url:"hl_icon"}),this.shapesButton=this.makeIconButton({url:"shapes_icon"}),this.penButton.button.anchorLeft=this.shapesButton.button.anchorRight=10*t,this.hlButton.button.horizontalAlign="center",this.penButton.button.anchorTop=this.hlButton.button.anchorTop=this.shapesButton.button.anchorTop=122*e;var w=new PIXI.UI.Text("펜두께",L.Black15_R);w.anchorLeft=10*t,w.anchorTop=215*e;var b=new Xe(15293539,14277081,170*t,6*t,10*t);b.anchorTop=255*e,b.horizontalAlign="center",b.value=12,this.penSlider=b,this.addChild(n,this.penButton.button,this.hlButton.button,this.shapesButton.button,w,b,r)},e.prototype.sectionText=function(){var t=G.ratioX,e=G.ratioY;this.insertBtn=this.makeBtn({url:"text_icon"},"글씨 넣기","inputtext",160*t,44*e,60,15),this.insertBtn.button.anchorTop=313*e;var n=new PIXI.UI.Text("글씨 크기",L.Black15_R);n.anchorLeft=10*t,n.anchorTop=380*e;var i=new Xe(15293539,14277081,170*t,6*t,10*t);i.anchorTop=420*e,i.horizontalAlign="center",i.value=12,this.textSlider=i,this.addChild(this.insertBtn.button,i,n)},e.prototype.sectionColor=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Text("색상",L.Black15_R);i.anchorLeft=10*e,i.anchorTop=483*n;var r=new PIXI.Texture.from("color"),o=29*e,a=new PIXI.UI.Container(173*e,115*n),s=new PIXI.UI.Sprite(r);s.width=12*e,s.height=10*n,s.verticalAlign="middle",s.horizontalAlign="center",s.tint=O.Gray,[16777215,0,15283502,15166342,16434891,12280814,28671,5297432,16766208,16227428].forEach((function(i,r){var l=new PIXI.Graphics;l.clear(),l.lineStyle(1.5,12303291,1,1,!0),l.beginFill(i),l.drawRoundedRect(0,0,o,o,2),l.endFill();var h=new ht(l);h.sprite.buttonMode=!0,h.sprite.interactive=!0,h.x=r%5*36*e,h.y=Math.floor(r/5)*(6*n+o),h.sprite.on("click",(function(){t.selectColor=i,t.isInput=!1,h.addChild(s)})),a.addChild(h),1===r&&(t.selectColor=i,h.addChild(s))})),a.anchorTop=520*n,a.horizontalAlign="center";var l=new PIXI.UI.Text("불투명도 (%)",L.Black15_R);l.anchorLeft=10*e,l.anchorTop=630*n;var h=new Xe(15293539,14277081,170*e,6*e,10*e);h.value=100,h.anchorTop=665*n,h.horizontalAlign="center",this.alphaSlider=h,this.addChild(a,i,h,l)},e.prototype.sectionButtonEct=function(){var t=G.ratioX,e=G.ratioY;this.selectBtn=this.makeBtn({url:""},"선택","select",177*t,44*e,73,26),this.eraserBtn=this.makeBtn({url:""},"지우개","eraser",177*t,44*e,66,22),this.trashBtn=this.makeBtn({url:""},"전체 지우기","trash",177*t,44*e,50,22),this.saveBtn=this.makeBtn({url:""},"저장하기","save",177*t,44*e,58,22),this.selectBtn.button.anchorTop=71*e,this.eraserBtn.button.anchorBottom=160*e,this.trashBtn.button.anchorBottom=100*e,this.saveBtn.button.anchorBottom=40*e,this.addChild(this.selectBtn.button,this.eraserBtn.button,this.trashBtn.button,this.saveBtn.button),this.buttonArray=[this.selectBtn,this.eraserBtn,this.penButton,this.hlButton,this.shapesButton,this.insertBtn]},e.prototype.removeTextInput=function(){for(;this.inputCon.children[0];)this.inputCon.removeChild(this.inputCon.children[0])},e.prototype.savePaint=function(t){G.paintArr.push(t),G.paintMap.set(this.nowPage,{con:G.paintArr,events:this.events})},e.prototype.removePaint=function(){for(;this.con.children.length;)this.con.removeChild(this.con.children[0]);for(;this.tCon.children.length;)this.tCon.removeChild(this.tCon.children[0]);for(;this.inputCon.children.length;)this.inputCon.removeChild(this.inputCon.children[0])},e.prototype.setPaint=function(t){for(var e=0;e<G.paintArr.length;e++)this.con.addChild(G.paintMap.get(t).con[e]);this.events=G.paintMap.get(t).events},e.prototype.checkPaint=function(t){G.paintMap.has(t)?(G.paintArr=G.paintMap.get(t).con,this.setPaint(t)):G.paintArr=[]},e.prototype.eventHandler=function(){var t=this,e=document.getElementById("paint_canvas");this.moveFunc=null,document.removing=!1,this.number=0,this.isInput=!1,G.paintMap=new Map;var n=function(){e.addEventListener("mouseup",p),e.addEventListener("mouseout",p),e.addEventListener("mousemove",t.moveFunc)},i=this;function r(t){document.selecting&&(i.number+=1,this.parent.zIndex=i.number,this.parent._lastSortedIndex=i.number,this.data=t.data,this.dragging=!0)}function o(){this.dragging=!1,this.data=null}function a(){if(this.dragging&&document.selecting){var t=this.data.getLocalPosition(this.parent);this.x=t.x-this.width/2,this.y=t.y-this.height/2}}function s(){document.removing?this.parent.removeChild(this):(i.selected===i.eraserBtn||i.selected===i.selectBtn)&&(this.alpha=.7*this.savedAlpha)}function l(){this.alpha=this.savedAlpha}function h(){i.selected===i.eraserBtn&&(this.alpha=.7*this.savedAlpha,this.parent.removeChild(this)),i.selected===i.selectBtn&&(e.style.cursor="move",this.alpha=.7*this.savedAlpha)}function c(){if(i.selected===i.eraserBtn){this.alpha=.7*this.savedAlpha,this.pixiUICon.parent.removeChild(this.pixiUICon);var t=G.paintArr.indexOf(this.pixiUICon);G.paintArr.splice(t,1)}i.selected===i.selectBtn&&(e.style.cursor="move",this.alpha=.7*this.savedAlpha)}var u=function(e,n){t.number+=1,n.interactive=!0,n.buttonMode=!0,n.container.zIndex=t.number,n.container._lastSortedIndex=t.number,n.container.savedAlpha=1,e.interactive=!0,e.buttonMode=!0,e.container.zIndex=t.number,e.container._lastSortedIndex=t.number,e.container.savedAlpha=1,e.container.pixiUICon=e,e.container.on("mousedown",(function(t){document.selecting&&(i.number+=1,this.zIndex=i.number,this._lastSortedIndex=i.number,this.data=t.data,this.dragging=!0)})).on("mouseup",o).on("mouseupoutside",o).on("mousemove",(function(){if(this.dragging&&document.selecting){var t=this.data.getLocalPosition(this.parent);e.x=t.x-e.width/2,e.y=t.y-e.height/2}})).on("pointerover",s).on("pointerout",l).on("click",c),t.savePaint(e)},d=function(){var e=G.paint.renderer.generateTexture(t.graphic),n=new PIXI.UI.Sprite(e),i=t.graphic.minX,c=t.graphic.minY;return n.x=i-t.penSlider.value/2,n.y=c-t.penSlider.value/2,n.sprite.savedAlpha=n.alpha,n.sprite.interactive=!0,t.number+=1,n.container.zIndex=t.number,n.container._lastSortedIndex=t.number,n.sprite.on("mousedown",r).on("mouseup",o).on("mouseupoutside",o).on("mousemove",a).on("pointerover",s).on("pointerout",l).on("click",h),t.graphic.clear(),n},p=function n(i){switch(document.dragging=!1,document.removing=!1,document.selecting=!1,t.selected){case t.penButton:var c=d();t.con.addChild(c),t.events.penPaths=[],t.events.polypath=[],t.events.reversPath=[],t.savePaint(c);break;case t.hlButton:var u=d();t.con.addChild(u),t.events.penPaths=[],t.events.polypath=[],t.savePaint(u);break;case t.shapesButton:var p=function(){var e=new PIXI.UI.Sprite(t.events.shapeSprite.sprite.texture);return e.pivotX=t.events.shapeSprite.pivotX,e.pivotY=t.events.shapeSprite.pivotY,e.rotation=t.events.shapeSprite.rotation,e.x=t.events.shapeSprite.x,e.y=t.events.shapeSprite.y,e.alpha=t.events.shapeSprite.alpha,e.sprite.savedAlpha=e.alpha,e.width=t.events.shapeSprite.width,e.height=t.events.shapeSprite.height,e.tint=t.events.shapeSprite.tint,e.sprite.interactive=!0,t.number+=1,e.container.zIndex=t.number,e.container._lastSortedIndex=t.number,e.sprite.on("mousedown",r).on("mouseup",o).on("mouseout",o).on("mousemove",a).on("pointerover",s).on("pointerout",l).on("click",h),e}();t.con.addChild(p),t.con.removeChild(t.events.shapeSprite),t.savePaint(p)}e.removeEventListener("mouseup",n),e.removeEventListener("mouseout",n),e.removeEventListener("mousemove",t.moveFunc)};this.penButton.onClick((function(){document.selecting=!1,e.style.cursor="crosshair",t.moveFunc=t.events.penEvent})),this.selectBtn.onClick((function(){document.selecting=!0,e.style.cursor="move",t.moveFunc=t.events.selectEvent})),this.hlButton.onClick((function(){document.selecting=!1,e.style.cursor="crosshair",t.moveFunc=t.events.hlEvent})),this.shapesButton.onClick((function(){e.style.cursor="crosshair",document.selecting=!1,t.tooltip.visible=!0,t.moveFunc=t.events.shapeEvent})),this.insertBtn.onClick((function(){document.selecting=!1,t.isInput=!1,e.style.cursor="text"})),this.eraserBtn.onClick((function(){document.selecting=!1,t.isInput=!1,e.style.cursor="crosshair",t.moveFunc=t.events.eraserEvent})),this.saveBtn.onClick((function(){document.selecting=!1,e.style.cursor="default",document.getElementById("paint_canvas").style.display="block",G.backGroundON(),G.paint.renderer.extract.canvas(G.paint.stage).toBlob((function(t){var e=document.createElement("a");document.body.append(e),e.download="peach-bookcases",e.href=URL.createObjectURL(t),e.click(),e.remove()}),"peach-bookcases/png"),G.backGroundOFF()})),this.trashBtn.onClick((function(){for(;t.con.children[0]||t.tCon.children[0]||t.inputCon.children[0];)t.con.removeChild(t.con.children[0]),t.tCon.removeChild(t.tCon.children[0]),t.inputCon.removeChild(t.inputCon.children[0]);G.paintArr=[],G.paintMap.delete(t.nowPage)})),this.RightBtn.sprite.on("click",(function(){if(G.isPaint){if(t.nowPage>=t.page)return;t.nowPage++,t.removePaint(),t.checkPaint(t.nowPage)}})),this.LeftBtn.sprite.on("click",(function(){if(G.isPaint){if(t.nowPage<=1)return;t.nowPage--,t.removePaint(),t.checkPaint(t.nowPage)}})),e.addEventListener("mousedown",(function(i){switch(t.events.shapeSprite.container.zIndex=t.events.shapeSprite.container._lastSortedIndex=t.number,t.graphic.minX=i.offsetX,t.graphic.minY=i.offsetY,t.events.penThickness=t.penSlider.value,t.events.fontSize=t.textSlider.value,t.events.alpha=t.alphaSlider.value/100,t.events.color=t.selectColor,t.events.setstartPos={offsetX:i.offsetX,offsetY:i.offsetY},t.selected){case t.penButton:case t.hlButton:e.style.cursor="crosshair",document.dragging=!0,n();break;case t.selectBtn:document.dragging=!0,document.selecting=!0;break;case t.insertBtn:if(document.dragging=!1,t.isInput)t.selected=null,t.insertBtn.backgroundColor=O.white;else{var r=t.events.textEvent(i,t.number);t.inputText=t.events.text,u(r,t.inputText),t.isInput=!0}break;case t.shapesButton:t.events.shape=t.shape,document.dragging=!0,n();break;case t.eraserBtn:document.dragging=!0,document.removing=!0,n();break;case t.trashBtn:case t.saveBtn:document.dragging=!1}}))},e}(PIXI.UI.Container),Ue=function(t){function e(e,n,i){t.call(this,e,n),this.save={width:0,height:0},this.radius=i,this.setupMask()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupMask=function(){var t=new PIXI.Graphics;this.container.addChild(t),this.container.mask=t,this.resizeUpdate()},e.prototype.resizeUpdate=function(){this.actual_width===this.save.width&&this.actual_height===this.save.height||(this.container.mask.clear(),this.container.mask.lineStyle(0),this.container.mask.beginFill(16777215,1),this.save.width=this.actual_width,this.save.height=this.actual_height,this.container.mask.drawRoundedRect(0,0,this.save.width,this.save.height),this.container.mask.endFill())},e.prototype.border=function(){var t=new PIXI.Graphics;t.clear(),t.lineStyle(1,13619151,1,1),t.drawRoundedRect(0,0,this.save.width-1,this.save.height),t.endFill();var e=new ht(t);this.addChild(e)},e}(PIXI.UI.Container),Me=function(t){function e(e,n){var i=this,r=G.ratioX;t.call(this,PIXI.Texture.WHITE),this.width=1722*r,this.height="100%",this.sprite.interactive=!0,this.superCon=new PIXI.UI.Container("100%","100%"),this.sprite.on("close",(function(){i.parent.removeChild(i)})),this.addChild(this.superCon),this.makeThumbNail(e,n),this.renderSmallPages()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeButtons=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.Texture.from("triangleL"),r=new PIXI.Texture.from("triangleR"),o=new PIXI.UI.Sprite(i),a=new PIXI.UI.Sprite(r);o.tint=a.tint=O.arrow,o.verticalAlign=a.verticalAlign="middle",o.width=a.width=27*e,o.height=a.height=42*n,o.sprite.interactive=!0,o.sprite.buttonMode=!0,a.sprite.interactive=!0,a.sprite.buttonMode=!0,o.anchorLeft=a.anchorRight=5*e,o.sprite.on("click",(function(){t.idx<=0?t.idx=0:(t.idx-=1,t.renderSmallPages())})),a.sprite.on("click",(function(){t.idx>=t.containerArr.length-1?t.idx=t.containerArr.length-1:(t.idx+=1,t.renderSmallPages())})),this.addChild(a,o)},e.prototype.makeThumbNail=function(t,e){var n=this,i=G.ratioX,r=G.ratioY;this.idx=0;var o=Math.ceil(t.length/12);this.containerArr=new Array(o);for(var a=function(o){for(var a=[],s=function(s){var l=t[12*o+s];if(!l)return"break";var h=new Ue(386*i,260*r,13),c=new PIXI.UI.Sprite(l);c.sprite.interactive=c.sprite.buttonMode=!0,c.sprite.on("click",(function(){e(12*o+s+1),n.sprite.emit("close"),G.currentScene.webMenu.clickEventHandler(void 0),G.isGather=!1,G.currentScene.RightBtn.sprite.interactive=G.currentScene.LeftBtn.sprite.interactive=!0,G.currentScene.webMenu.gatherBtn.backgroundColor=O.white,G.currentScene.box.removeChild(G.currentScene.box.children.at(-1)),G.currentScene.con.removeChild(G.currentScene.box),G.currentScene.con.addChild(G.currentScene.RightBtn,G.currentScene.LeftBtn)})),h.anchorLeft=s%4*(23*i+h.width)+52*i,h.anchorTop=Math.floor(s/4)*(20*r+h.height)+144*r,h.addChild(c),h.border(),a.push(h),n.containerArr[o]=a},l=0;l<12;l++){if("break"===s(l))break}},s=0;s<o;s++)a(s)},e.prototype.renderSmallPages=function(){for(var t=this;this.superCon.children[0];)this.superCon.removeChild(this.superCon.children[0]);this.containerArr[this.idx].forEach((function(e){t.superCon.addChild(e)}))},e}(PIXI.UI.Sprite),Fe=function(t){function e(e,n,i){var r=G.ratioY;t.call(this,"100%",902*r),this.mySet=e,this.thumbArr=n,this.ShowRegisteredpage(),this.makeHeaderButton(),this.viewer=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateSavepage=function(){for(var t=this,e=G.ratioX,n=G.ratioY;this.listCon.children[0];)this.listCon.removeChild(this.listCon.children[0]);this.listCon.height=199*this.pageList.length*n,this.pageList.length<5?this.savedLine.alpha=0:this.savedLine.alpha=1,0===this.pageList.length?this.noneTxt.visible=!0:this.noneTxt.visible=!1;for(var i,r,o=(i=12*e,(r=new PIXI.Graphics).lineStyle({width:2,color:16777215,alpha:1,join:"round",cap:"round"}),r.moveTo(0,0),r.lineTo(i,i),r.moveTo(i,0),r.lineTo(0,i),r.endFill(),G.app.renderer.generateTexture(r)),a=function(t,e,n){void 0===n&&(n=j.red);var i=new PIXI.Graphics,r=[0,0,t,0,t,e,t/2,Math.floor(.7*e),0,e];return i.lineStyle(0),i.beginFill(n,1),i.drawPolygon(r),i.endFill(),G.app.renderer.generateTexture(i)}(12*e,18*n),s=function(i){var r=t.pageList[i],s=t.thumbArr[r-1],l=new PIXI.UI.Container(165*e,140*n),h=new Ue(165*e,105*n,5),c=new PIXI.UI.Sprite(s),u=new PIXI.UI.Sprite(a),d=new PIXI.UI.Text(r+" 페이지",L.Black17_R),p=new PIXI.UI.Sprite(o);l.anchorLeft=17*e,d.anchorLeft=18*e,c.width=l.width,c.height=105*n,h.anchorTop=35*e,c.sprite.on("click",(function(){console.log("bookmark click",r),t.viewer.queueRenderPage(r)})),c.sprite.interactive=c.sprite.buttonMode=!0,p.tint=7434609,p.anchorRight=0,p.sprite.interactive=p.sprite.buttonMode=!0,p.sprite.on("click",(function(){var e="";t.mySet.forEach((function(t){e+=t+"#"})),$(zt.story_num,e,(function(n){t.mySet.delete(r),e="",t.mySet.forEach((function(t){e+=t+"#"})),tt(zt.story_num,e,(function(e){t.pageList=Array.from(t.mySet),t.pageList.sort((function(t,e){return t-e})),t.updateSavepage()}))}))})),l.y=(19+180*i)*n,h.addChild(c),l.addChild(h,u,p,d),t.listCon.addChild(l)},l=0;l<t.pageList.length;l++)s(l)},e.prototype.makeHeaderButton=function(){var t=this,e=G.ratioX,n=G.ratioY,i=new PIXI.UI.Container("100%",104*n),r=new PIXI.Texture.from("bookmark_star"),o=new PIXI.UI.Sprite(r);o.anchorLeft=23*e,o.width=24*e,o.height=25*n,o.verticalAlign="middle";var a=new PIXI.Texture.from("btn22"),s=new PIXI.UI.Sprite(a),l=new Ot({lineColor:O.bgBoxBorder,line:3,background:s,text:{name:"책갈피 추가",style:L.Black15_R},width:133*e,height:44*n});l.button.anchorRight=11*e,l.button.verticalAlign="middle",l.onClick((function(){var e=document.getElementById("page_input").textContent;if(e=Number(e),!t.mySet.has(e)){var n="";t.mySet.forEach((function(t){n+=t+"#"})),$(zt.story_num,n,(function(i){t.mySet.add(e),n="",t.mySet.forEach((function(t){n+=t+"#"})),tt(zt.story_num,n,(function(e){t.pageList=Array.from(t.mySet),t.pageList.sort((function(t,e){return t-e})),t.updateSavepage()}))}))}})),i.anchorTop=51*n,i.addChild(o,l.button),this.addChild(i)},e.prototype.changeCard=function(t){var e=this;this.cardArr.forEach((function(t){e.listCon.removeChild(t)})),this.cardArr=t,this.updateSaveCard(this.cardArr)},e.prototype.ShowRegisteredpage=function(){var t=G.ratioX,e=G.ratioY,n=new PIXI.UI.Container("100%",765*e),i=new PIXI.UI.Sprite(PIXI.Texture.WHITE),r=new ut(199*t,2,O.Gray),o=new PIXI.UI.Text("등록된 책갈피 ",L.Black16_R),a=new PIXI.Graphics;a.lineStyle(2,16777215),a.beginFill(16777215),a.drawRoundedRect(0,0,10,10,10),a.endFill();var s=G.app.renderer.generateTexture(a),l=new PIXI.UI.Container("100%",0),h=new PIXI.UI.ScrollingContainer({scrollX:!1,scrollY:!0}),c=new PIXI.UI.ScrollBar({track:new PIXI.UI.Sprite(PIXI.Texture.WHITE),handle:new PIXI.UI.SliceSprite(s,5),vertical:!0,scrollingContainer:h,autohide:!0}),u=new ut(2,689*e,O.line),d=new PIXI.UI.Text("등록된 책갈피가 없습니다.",L.Black14_R);d.horizontalAlign="center",d.anchorTop=85*e,d.visible=!1,this.noneTxt=d,n.anchorTop=155*e,i.width=199*t,i.height=45*e,i.horizontalAlign="center",i.tint=O.lightGray,r.alpha=.5,r.anchorBottom=0,o.verticalAlign="middle",o.horizontalAlign="center",h.width="100%",h.dragThreshold=5,h.dragRestrictAxis="y",h.height=c.height=689*e,c.handle.width=8*t,c.track.tint=O.bgBox,c.handle.tint=O.handle,c.anchorTop=h.anchorTop=50*e,c.anchorRight=-4*t,u.anchorRight=10*t,u.anchorTop=50*t,u.alpha=0,this.savedLine=u,this.listCon=l,this.cardScrollingCon=h,this.savedCon=n,this.pageList=Array.from(this.mySet),this.pageList.sort((function(t,e){return t-e})),i.addChild(r,o),h.addChild(l),n.addChild(i,h,c,u,d),this.addChild(n),this.updateSavepage()},e}(PIXI.UI.Container),je=function(t){function e(e){var n,i=this;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1,null===localStorage.getItem("peach_tutorial")?(localStorage.setItem("peach_tutorial",!0),n="true"):n=localStorage.getItem("peach_tutorial"),this.addChild(this.filter),"true"===n&&(this.appendMenu(),e.addChild(this)),this.container.on("close",(function(){i.parent.removeChild(i)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendMenu=function(){var t=this,e=G.ratioX,n=G.ratioY,i=[[PIXI.Texture.from("tutorial1")],[PIXI.Texture.from("tutorial2_1"),PIXI.Texture.from("tutorial2_2"),PIXI.Texture.from("tutorial2_3"),PIXI.Texture.from("tutorial2_4"),PIXI.Texture.from("tutorial2_5"),PIXI.Texture.from("tutorial2_6"),PIXI.Texture.from("tutorial2_7")],[PIXI.Texture.from("tutorial3_1"),PIXI.Texture.from("tutorial3_2"),PIXI.Texture.from("tutorial3_3"),PIXI.Texture.from("tutorial3_4")],[PIXI.Texture.from("tutorial4_1"),PIXI.Texture.from("tutorial4_2")],[PIXI.Texture.from("tutorial5_1"),PIXI.Texture.from("tutorial5_2")],[PIXI.Texture.from("tutorial6_1"),PIXI.Texture.from("tutorial6_2")],[PIXI.Texture.from("tutorial7_1"),PIXI.Texture.from("tutorial7_2")],[PIXI.Texture.from("tutorial8_1"),PIXI.Texture.from("tutorial8_2")],[PIXI.Texture.from("tutorial9_1"),PIXI.Texture.from("tutorial9_2")]];this.page=0,this.num=0;var r=new PIXI.UI.Sprite(i[0][0]);r.width=1080*e,r.height=650*n,r.verticalAlign="middle",r.horizontalAlign="center";var o=new PIXI.UI.Sprite(PIXI.Texture.from("tutorial_x"));o.width=o.height=32*e,o.anchorLeft=1072*e,o.anchorBottom=645*n,o.sprite.on("click",(function(){t.container.emit("close")}));var a=new PIXI.UI.Sprite(PIXI.Texture.from("tutorial_txt"));a.width=268*e,a.height=24*n,a.anchorTop=655*n,a.anchorRight=0,a.sprite.on("click",(function(){localStorage.removeItem("peach_tutorial"),localStorage.setItem("peach_tutorial",!1),t.container.emit("close")}));var s=new PIXI.UI.Sprite(PIXI.Texture.from("tutorial_next")),l=new PIXI.UI.Sprite(PIXI.Texture.from("tutorial_prev"));s.anchorBottom=l.anchorBottom=30*n,s.width=l.width=66*e,s.height=l.height=32*n,l.anchorLeft=40*e,s.anchorLeft=130*e,l.visible=!1,o.sprite.interactive=o.sprite.buttonMode=a.sprite.interactive=a.sprite.buttonMode=s.sprite.interactive=s.sprite.buttonMode=l.sprite.interactive=l.sprite.buttonMode=!0,l.sprite.on("click",(function(){var e=i[t.page].length-1;console.log("leng:",e,"page",t.page,"num",t.num),0===t.page&&0===t.num||(0==t.num?(t.page--,t.num=i[t.page].length-1):e>=t.num?t.num--:(t.page--,t.num=i[t.page].length-1),t.page<0&&(t.page=0),t.changeTexture())})),s.sprite.on("click",(function(){var e=i[t.page].length-1;t.page===i.length-1&&t.num===e||(e>t.num?t.num++:(t.page++,t.num=0),t.page>i.length-1&&(t.page=i.length-1),t.changeTexture())}));var h=this.makeNaviBtn(0,63*e,69*n),c=this.makeNaviBtn(1,92*e,103*n),u=this.makeNaviBtn(2,92*e,137*n),d=this.makeNaviBtn(3,63*e,171*n),p=this.makeNaviBtn(4,78*e,205*n),f=this.makeNaviBtn(5,92*e,239*n),g=this.makeNaviBtn(6,92*e,273*n),m=this.makeNaviBtn(7,63*e,307*n),_=this.makeNaviBtn(8,63*e,341*n);this.menuSprite=r,this.MenuArray=i,this.prevBtn=l,this.nextBtn=s,r.addChild(o,s,l,h,c,u,d,p,f,g,m,_,a),this.addChild(r)},e.prototype.changeTexture=function(){0===this.page?this.prevBtn.visible=!1:this.page===this.MenuArray.length-1&&this.num===this.MenuArray[this.page].length-1?this.nextBtn.visible=!1:(this.prevBtn.visible=!0,this.nextBtn.visible=!0),console.log(this.page,this.num),this.menuSprite.sprite.texture=this.MenuArray[this.page][this.num]},e.prototype.makeNaviBtn=function(t,e,n){var i=this,r=G.ratioX,o=new PIXI.UI.Sprite(PIXI.Texture.EMPTY);return o.anchorLeft=24*r,o.height=24*r,o.anchorTop=n,o.width=e,o.sprite.interactive=o.sprite.buttonMode=!0,o.sprite.on("click",(function(){i.page=t,i.num=0,i.changeTexture()})),o},e}(PIXI.UI.Container),Le=function(t){zt.viewWidth=1614,this.con=new PIXI.UI.Container("100%","100%")};Le.prototype.update=function(t){},Le.prototype.resize=function(t,e){},PIXI.UI.Container;var Oe=function(t,e){var n=this,i=t.width,r=t.height,o=G.ratioX,a=G.ratioY;this.mainBtn=new Ot({width:i,height:r,lineColor:16777215,img:{url:"dsc",width:13*o,height:13*a,tint:10395294}}),this.mainBtn.addText({text:e[0],style:L.Black12,name:"main"}),this.mainBtn.dsc.anchorTop=10*a,this.mainBtn.dsc.anchorRight=10*o,this.mainBtn.main.verticalAlign="middle",this.mainBtn.main.anchorLeft=20*o;var s=new PIXI.Graphics;s.lineStyle(0,16777215),s.beginFill(16777215),s.drawRoundedRect(0,0,i,r,5),s.endFill(),this.box=new PIXI.UI.Sprite(G.app.renderer.generateTexture(s));var l=this.addList({width:i,height:r},e);this.mainBtn.onClick((function(){var t,e;n.click=!n.click,n.click?(t=n.box).addChild.apply(t,l):(e=n.box).removeChild.apply(e,l)})),this.box.addChild(this.mainBtn.button)};Oe.prototype.addList=function(t,e){for(var n=this,i=G.ratioX,r=G.ratioY,o=t.width,a=t.height,s=[],l=function(t){var l=new Ot({width:o,height:a,lineColor:16777215,rounded:0});l.addText({text:e[t],style:L.Black12,name:e[t]}),l[e[t]].verticalAlign="middle",l[e[t]].anchorLeft=20*i,l.button.anchorTop=(a-1)*(t+1)*r,l.onClick((function(){n.mainBtn.main.text=l[e[t]].text,n.mainBtn.button.emit("click")})),l.onHover((function(n){l[e[t]]._text.style.fill=n?16711680:0})),s.push(l.button)},h=0;h<e.length;h++)l(h);return s};var Ne=function(t){var e=this,n=t.width,i=t.height,r=G.ratioX,o=G.ratioY;this.count=new PIXI.UI.Text("1",L.Black16_R),this.count.anchorLeft=20*r,this.count.verticalAlign="middle";var a=new PIXI.Graphics;a.lineStyle(0,16777215),a.beginFill(16777215),a.drawRoundedRect(0,0,n,i,5),a.endFill(),this.box=new PIXI.UI.Sprite(G.app.renderer.generateTexture(a)),this.box.interactive=!0,this.box.buttonMode=!0;var s=new Ot({width:13*r,height:13*o,lineColor:16777215,img:{url:"asc",width:13*r,height:13*o,tint:10395294}}),l=new Ot({width:13*r,height:13*o,lineColor:16777215,img:{url:"dsc",width:13*r,height:13*o,tint:10395294}});s.asc.pivotX=s.asc.pivotY=0,l.dsc.pivotX=l.dsc.pivotY=0,s.button.anchorRight=l.button.anchorRight=10*r,s.button.anchorTop=l.button.anchorBottom=3*o,s.onClick((function(){e.count.text=+e.count.text+1})),l.onClick((function(){if(e.count.text=+e.count.text-1,console.log(218218,e.count.text),+e.count.text<1)return alert("1장 미만으로는 인쇄할 수 없어요","#E95C63"),void(e.count.text=1)})),this.box.addChild(this.count,s.button,l.button)},We=function(t){function e(){var e=this,n=G.ratioX,i=G.ratioY;t.call(this,"100%","100%"),this.filter=new dt("100%","100%"),this.filter.sprite.buttonMode=!1;var r=1,o=!1,a=null,s=new PIXI.Graphics;s.lineStyle(1,16777215,1),s.beginFill(15658734),s.drawRoundedRect(0,0,380*n,560*i,0),s.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(s)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var l=new PIXI.Texture.from("print_icon"),h=new PIXI.UI.Sprite(l);h.width=67*n,h.height=71*i,h.horizontalAlign="center",h.anchorTop=74*i,h.tint=O.Black;var c=new PIXI.UI.Text("컬러",L.Black16_R),u=new PIXI.UI.Text("매수",L.Black16_R);c.anchorLeft=u.anchorLeft=50*n,c.anchorTop=258*i,u.anchorTop=320*i;var d=new Oe({width:220*n,height:32*i},["흑백","컬러"]),p=new Ne({width:220*n,height:32*i});p.interactive=p.buttonMode=!0,d.box.anchorLeft=p.box.anchorLeft=120*n,d.box.anchorTop=250*i,p.box.anchorTop=320*i;var f=new Ot({width:120*n,height:40*i,line:0,tint:10395294,rounded:40*i,text:{name:"현재 페이지",style:L.White14}}),g=new Ot({width:120*n,height:40*i,line:0,tint:10395294,rounded:40*i,text:{name:"전체 페이지",style:L.White14}}),m=new Ot({width:120*n,height:40*i,line:0,tint:10395294,text:{name:"인쇄하기",style:L.White14}}),_=new Ge;f.button.anchorLeft=g.button.anchorRight=50*n,f.button.anchorBottom=g.button.anchorBottom=120*i,m.button.anchorBottom=50*i,m.button.horizontalAlign="center";var v=Bt(21*i,4868682),w=new PIXI.UI.Sprite(v);w.anchorTop=28*i,w.anchorRight=28*n,w.sprite.interactive=w.sprite.buttonMode=!0,w.sprite.on("click",(function(){G.currentScene.webMenu.printBtn.backgroundColor=O.white,G.currentScene.con.container.emit("buttonblurOff"),y(),e.container.emit("close")}));var b=new PIXI.UI.Text("기본 설정된 프린터로 테스트 인쇄를 진행하여 \n\n 정상적으로 출력되는지 확인 후 진행해 주세요.",L.Black14_R);function I(t){t.container.emit("close"),G.currentScene.webMenu.printBtn.backgroundColor=O.white,G.currentScene.con.container.emit("buttonblurOff"),t.addChild(t.card),t.removeChild(_.card)}function y(){f.backgroundColor=g.backgroundColor=m.backgroundColor=10395294,d.mainBtn.main.text="흑백",p.count.text=1,r=1,o=!1,a=null}b.horizontalAlign="center",b.anchorTop=170*i,this.container.on("close",(function(){null!==e.parent&&e.parent.removeChild(e)})),f.onClick((function(){a=!1,f.backgroundColor=m.backgroundColor=O.red,g.backgroundColor=10395294})),g.onClick((function(){a=!0,f.backgroundColor=10395294,g.backgroundColor=m.backgroundColor=O.red})),m.onClick((function(){o="컬러"===d.mainBtn.main.text,r=p.count.text,null!==a?(f.backgroundColor=10395294,g.backgroundColor=10395294,G.currentScene.webMenu.printBtn.backgroundColor=O.white,G.currentScene.con.container.emit("buttonblurOff"),e.removeChild(e.card),e.addChild(_.card)):alert("페이지 설정을 완료해주세요","#E95C63")})),_.leaveBtn.onClick((function(){var t={copies:r,isColor:o,isWhole:a};I(e),G.print(t),y()})),_.x_btn.sprite.on("click",(function(){var t={copies:r,isColor:o,isWhole:a};I(e),G.print(t),y()})),this.card.addChild(h,f.button,g.button,m.button,b,w,c,u,p.box,d.box),this.addChild(this.filter,this.card)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),Ge=function(t){function e(){var e=G.ratioX,n=G.ratioY;t.call(this,"100%","100%");var i=new PIXI.Graphics;i.lineStyle(1,16777215,1),i.beginFill(15658734),i.drawRoundedRect(0,0,380*e,380*n,0),i.endFill(),this.card=new PIXI.UI.Sprite(G.app.renderer.generateTexture(i)),this.card.sprite.interactive=!0,this.card.verticalAlign="middle",this.card.horizontalAlign="center";var r=Bt(21*n,4868682);this.x_btn=new PIXI.UI.Sprite(r),this.x_btn.anchorTop=28*n,this.x_btn.anchorRight=28*e,this.x_btn.sprite.interactive=this.x_btn.sprite.buttonMode=!0;var o=new PIXI.Texture.from("print_icon"),a=new PIXI.UI.Sprite(o);a.width=67*e,a.height=71*n,a.horizontalAlign="center",a.anchorTop=74*n,a.tint=O.Black;var s=new PIXI.UI.Text("인쇄가 시작됩니다.",L.Black25_R);s.horizontalAlign="center",s.anchorTop=190*n,this.leaveBtn=new Ot({width:120*e,height:45*n,lineColor:O.line,line:3,text:{name:"확인",style:L.Black14_bold}}),this.leaveBtn.button.horizontalAlign="center",this.leaveBtn.button.anchorBottom=74*n,this.card.addChild(a,this.x_btn,this.leaveBtn.button,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(PIXI.UI.Container),De=function(t){var e=this,n=G.ratioX,i=G.ratioY;zt.viewWidth=1614,this.con=new PIXI.UI.Container("100%","100%"),this.box=new PIXI.UI.Container("100%",104*i);var r=document.getElementById("view-canvas"),o=this;G.isGather=!1,G.isQ=!1,G.isCard=!1,G.isAudio=!1,G.isBookmark=!1,this.callBackFunc={update:function(t){o.cardUpdate(),o.webMenu.webAudio.updateIndex(t),o.webMenu.webPaint.updateIndex(t),console.log("nowPage",t)},const:function(t,e){r.style.marginTop=(G.height-r.height)/2+"px",r.style.marginLeft=(window.innerWidth-r.width-199*n)/2+"px",o.cardUpdate(),o.webMenu.webAudio=new he(zt.audioData,t,e,o.LeftBtn,o.RightBtn,a),console.log("nowPage",e),o.webMenu.webAudio.updateIndex(e),G.paintApp(),o.webMenu.webPaint=new ze(t,e,o.LeftBtn,o.RightBtn)},thumb:function(t,e,n){var i=[];t.forEach((function(t){var e=new PIXI.Texture.from(t);i.push(e)})),Z("GET","v2/story/bookmark?story_number="+zt.story_num,(function(t){if(0==t.code){for(var e=[],n=0,r=t.data.story.BookMark;n<r.length;n+=1){var a=r[n];e.push(a.page_no)}o.bookmarkArr=new Set(e),o.webMenu.webBookmark=new Fe(o.bookmarkArr,i,o.viewer)}})),o.thumnail=new Me(i,e)}};var a=new ce;this.LeftBtn=new qt(52*n),this.RightBtn=new Zt(52*n),this.RightBtn.anchorRight=201*n,this.webMenu=new ne,G.isPrev&&(this.webMenu.paintBtn.button.interactive=this.webMenu.bookmarkBtn.button.interactive=!1,this.webMenu.paintBtn.button.emit("disable"),this.webMenu.bookmarkBtn.button.emit("disable")),this.viewer=new Kt(t,this.callBackFunc,this.RightBtn,this.LeftBtn,386,261),this.con.container.on("goFirst",(function(t){e.viewer.acessQueue(t)}));var s=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw");zt.cardData.forEach((function(t){t.texture=new PIXI.Texture.from(s+"/"+t.uuid)})),this.con.addChild(this.LeftBtn,this.RightBtn,this.webMenu,a),this.prevCard=new ie,this.cardArr=[],this.Qarr=[],this.webMenu.webCard=new re(this.cardArr),new je(this.con),this.eventHandler()};De.prototype.cardUpdate=function(){var t=this,e=20*G.ratioX;this.cardArr=[];var n=document.getElementById("view-canvas"),i=n.style.marginLeft,r=n.style.marginTop;i=parseFloat(i),r=parseFloat(r);var o=document.getElementById("page_input").textContent-1;this.Qarr.forEach((function(e){t.con.removeChild(e)})),this.Qarr=[],zt.cardData.forEach((function(a){var s=a.list[o];if(null!=s){var l=a.texture,h=new PIXI.UI.Sprite(l);h.sprite.interactive=h.sprite.buttonMode=!0,h.sprite.on("click",(function(){t.prevCard.card.sprite.texture=h.sprite.texture,t.con.addChild(t.prevCard)})),t.cardArr.push(h);var c=new PIXI.Texture.from("Q_icon");t.qSprite=new PIXI.UI.Sprite(c),t.qSprite.tint=O.red,t.qSprite.width=e,t.qSprite.height=e,t.qSprite.x=s.relatePos.x*n.width+i,t.qSprite.y=s.relatePos.y*n.height+r,t.qSprite.sprite.interactive=t.qSprite.sprite.buttonMode=!0,t.qSprite.sprite.on("click",(function(){t.prevCard.card.sprite.texture=l,t.con.addChild(t.prevCard)})),G.isQ&&t.con.addChild(t.qSprite),t.Qarr.push(t.qSprite)}})),this.webMenu.webCard.changeCard(this.cardArr)},De.prototype.eventHandler=function(){var t=this,e=G.ratioX,n=G.ratioY,i=this,r=function(){q("POST","v2/story/peruse",{story_number:zt.story_num},(function(){Pe.closePeachPIXI()}))},o=new le((function(){i.viewer.acessQueue(1)}),r);this.con.container.on("storyEnd",(function(){t.con.addChild(o)}));var a=new se("계속 읽기","스토리 닫기",r,(function(){console.log("계속 읽기")}),"이야기를 종료하시겠어요?"),s=new We;this.webMenu.finBtn.onClick((function(){t.con.addChild(a)})),this.webMenu.fullscreenBtn.onClick((function(){var i=document.getElementById("view-canvas");(G.isFull=!G.isFull)?(console.log("전체보기"),t.webMenu.fullscreenBtn.removeImage({url:"fullscreen_icon"}),t.webMenu.fullscreenBtn.addImage({url:"basicscreen_icon",width:23*e,height:23*e,tint:3881787}),t.webMenu.fullscreenBtn.basicscreen_icon.pivotX=0,t.webMenu.fullscreenBtn.basicscreen_icon.pivotY=0,t.webMenu.fullscreenBtn.basicscreen_icon.anchorRight=5*e,t.webMenu.fullscreenBtn.basicscreen_icon.anchorBottom=5*n,t.con.removeChild(t.webMenu),t.con.addChild(t.webMenu.finBtn.button,t.webMenu.menuBg,t.webMenu.cardBtn.button,t.webMenu.paintBtn.button,t.webMenu.audioBtn.button,t.webMenu.bookmarkBtn.button,t.webMenu.fullscreenBtn.button),t.webMenu.gatherBtn.button.visible=!1,t.webMenu.printBtn.button.visible=!1,t.webMenu.anchorRight=0,t.RightBtn.anchorRight=0,t.webMenu.finBtn.background.alpha=1,t.webMenu.finBtn.background.width=100*e,t.webMenu.finBtn.background.height=40*e,t.webMenu.finBtn.button.anchorRight=0,t.webMenu.finBtn.button.anchorLeft=1800*e,t.webMenu.menuBg.anchorRight=0*e,t.webMenu.cardBtn.button.anchorRight=t.webMenu.paintBtn.button.anchorRight=t.webMenu.audioBtn.button.anchorRight=t.webMenu.bookmarkBtn.button.anchorRight=t.webMenu.fullscreenBtn.button.anchorRight=5*e,i.style.marginLeft=(window.innerWidth-i.width-156*e)/2+"px",G.currentScene.RightBtn.width=204*e):(t.webMenu.fullscreenBtn.removeImage({url:"basicscreen_icon"}),t.webMenu.fullscreenBtn.addImage({url:"fullscreen_icon",width:23*e,height:23*e,tint:3881787}),t.webMenu.fullscreenBtn.fullscreen_icon.pivotX=0,t.webMenu.fullscreenBtn.fullscreen_icon.pivotY=0,t.webMenu.fullscreenBtn.fullscreen_icon.anchorRight=5*e,t.webMenu.fullscreenBtn.fullscreen_icon.anchorBottom=5*n,t.webMenu.fullscreenBtn.background.alpha=0,t.webMenu.finBtn.background.alpha=t.webMenu.gatherBtn.background.alpha=t.webMenu.printBtn.background.alpha=1,t.webMenu.finBtn.background.width=168*e,t.webMenu.gatherBtn.background.width=t.webMenu.printBtn.background.width=83*e,t.webMenu.finBtn.background.height=t.webMenu.gatherBtn.background.height=t.webMenu.printBtn.background.height=33*n,t.webMenu.finBtn.button.anchorRight=80*e,t.webMenu.finBtn.button.anchorLeft=80*e,t.webMenu.gatherBtn.button.anchorRight=100*e,t.webMenu.printBtn.button.anchorRight=0*e,t.webMenu.gatherBtn.button.anchorLeft=8*e,t.webMenu.printBtn.button.anchorLeft=90*e,G.currentScene.RightBtn.width=52*e,G.currentScene.LeftBtn.width=52*e,G.currentScene.RightBtn.anchorRight=201*e,t.webMenu.gatherBtn.button.visible=!0,t.webMenu.printBtn.button.visible=!0,t.webMenu.addChild(t.webMenu.finBtn.button,t.webMenu.menuBg,t.webMenu.cardBtn.button,t.webMenu.paintBtn.button,t.webMenu.audioBtn.button,t.webMenu.bookmarkBtn.button,t.webMenu.fullscreenBtn.button),t.con.addChild(t.webMenu),t.webMenu.menuBg.anchorRight=201*e,t.webMenu.cardBtn.button.anchorRight=t.webMenu.paintBtn.button.anchorRight=t.webMenu.audioBtn.button.anchorRight=t.webMenu.bookmarkBtn.button.anchorRight=t.webMenu.fullscreenBtn.button.anchorRight=205*e,i.style.marginLeft=(window.innerWidth-i.width-199*e)/2+"px",G.currentScene.cardUpdate())})),this.webMenu.gatherBtn.onClick((function(){G.isGather=!G.isGather;var e=t.viewer.getPageNum(),n=t.thumnail.containerArr[0].length;if(t.renderTopText(e,n),G.isGather){G.isGather=!0,t.RightBtn.sprite.interactive=t.LeftBtn.sprite.interactive=!1,t.webMenu.addChild(t.webMenu.contentsBox),t.con.addChild(t.thumnail,t.box,t.webMenu),t.con.removeChild(t.RightBtn,t.LeftBtn);for(var i=0;i<t.Qarr.length;i++)t.con.removeChild(t.Qarr[i])}else G.isGather=!1,t.RightBtn.sprite.interactive=t.LeftBtn.sprite.interactive=!0,t.box.removeChild(t.box.children.at(-1)),t.con.removeChild(t.thumnail,t.box),t.con.addChild(t.RightBtn,t.LeftBtn,t.webMenu),t.webMenu.addChild(t.webMenu.contentsBox)})),this.webMenu.gatherBtn.onHover((function(){G.isGather&&(t.webMenu.gatherBtn.backgroundColor=O.button)})),this.webMenu.cardBtn.onClick((function(){var e=t.webMenu.webCard.searchArr;if(G.isQ){G.isQ=!1;for(var n=0;n<t.Qarr.length;n++)t.con.removeChild(t.Qarr[n])}else{G.isQ=!0,console.log(e.length),0===e.length&&(t.webMenu.webCard.textinput.text="단어검색",console.log(391391),t.webMenu.webCard.textinput.emit("blur"));for(var i=0;i<t.Qarr.length;i++)t.con.addChild(t.Qarr[i])}})),this.webMenu.audioBtn.onClick((function(){for(var e=0;e<t.Qarr.length;e++)t.con.removeChild(t.Qarr[e])})),this.webMenu.paintBtn.onClick((function(){for(var e=0;e<t.Qarr.length;e++)t.con.removeChild(t.Qarr[e])})),this.webMenu.bookmarkBtn.onClick((function(){for(var e=0;e<t.Qarr.length;e++)t.con.removeChild(t.Qarr[e])})),this.webMenu.printBtn.onClick((function(){console.log(400400),t.con.addChild(s)})),this.con.container.on("buttonblurOn",(function(){t.webMenu.cardBtn.button.interactive=t.webMenu.audioBtn.button.interactive=t.webMenu.paintBtn.button.interactive=t.webMenu.bookmarkBtn.button.interactive=t.webMenu.fullscreenBtn.button.interactive=t.webMenu.printBtn.button.interactive=t.webMenu.finBtn.button.interactive=!1})),this.con.container.on("buttonblurOff",(function(){t.webMenu.cardBtn.button.interactive=t.webMenu.audioBtn.button.interactive=t.webMenu.paintBtn.button.interactive=t.webMenu.bookmarkBtn.button.interactive=t.webMenu.printBtn.button.interactive=t.webMenu.finBtn.button.interactive=t.webMenu.fullscreenBtn.button.interactive=!0,t.webMenu.cardBtn.button.emit("active"),t.webMenu.audioBtn.button.emit("active"),t.webMenu.paintBtn.button.emit("active"),t.webMenu.bookmarkBtn.button.emit("active"),t.webMenu.printBtn.button.emit("active"),t.webMenu.finBtn.button.emit("active"),t.webMenu.fullscreenBtn.button.emit("active")})),this.con.container.on("previewblurOff",(function(){t.webMenu.cardBtn.button.interactive=t.webMenu.audioBtn.button.interactive=t.webMenu.printBtn.button.interactive=t.webMenu.finBtn.button.interactive=t.webMenu.fullscreenBtn.button.interactive=!0,t.webMenu.cardBtn.button.emit("active"),t.webMenu.audioBtn.button.emit("active"),t.webMenu.printBtn.button.emit("active"),t.webMenu.finBtn.button.emit("active"),t.webMenu.fullscreenBtn.button.emit("active")}))},De.prototype.renderTopText=function(t,e){var n=G.ratioX,i=G.ratioY,r=new PIXI.Texture.from("gather_icon"),o=new PIXI.UI.Sprite(r);o.width=o.height=38*n,o.anchorTop=40*i,o.anchorLeft=63*n;var a=new PIXI.Graphics;a.lineStyle(2,14408667),a.beginFill(16777215),a.drawRoundedRect(0,0,55*n,43*i,5),a.endFill();var s=G.app.renderer.generateTexture(a),l=new PIXI.UI.Sprite(s),h=new PIXI.UI.Text("전체 페이지 보기",L.Black30_R);h.anchorTop=40*i,h.anchorLeft=115*n;var c=new PIXI.UI.Text(""+t,L.Black19_R),u=new PIXI.UI.Text("/    "+e+" 페이지",L.Black19_R);u.verticalAlign=l.verticalAlign=c.verticalAlign="middle",c.text=t,u.anchorRight=340*n,c.anchorRight=480*n,l.anchorRight=460*n,l.anchorTop=c.anchorTop=h.anchorTop,0===this.box.children.length&&this.box.addChild(h,o,l,u,c),G.isGather&&(c.text=t,this.box.addChild(c))},De.prototype.update=function(t){},De.prototype.resize=function(t,e){};var He=.2*Math.max(document.documentElement.clientWidth,window.innerWidth||0),Ye=function(t,e){var n=G.ratioX,i=G.ratioY;this.con=new PIXI.UI.Container("100%","100%"),this.url=e;var r=PIXI.Texture.WHITE,o=new PIXI.UI.Sprite(r);this.con.addChild(o),o.tint=16777215,o.width=Math.max(document.documentElement.clientWidth,window.innerWidth),o.height=Math.max(document.documentElement.clientHeight,window.innerHeight),this.loader=new PIXI.Loader,this.IsAdmin=t,this.loaderBarFill=new PIXI.Graphics,this.loaderBarFill.beginFill(16777215,1),this.loaderBarFill.drawRect(0,0,He,600),this.loaderBarFill.endFill(),this.loaderBarBoder=new PIXI.Graphics,this.loaderBarBoder.drawRect(0,0,He,600),this.barfill=new ht(this.loaderBarFill),this.barfill.height=0;var a=new ht(this.loaderBarBoder);this.loaderBar=new PIXI.UI.Container,this.loaderBar.addChild(this.barfill),this.loaderBar.addChild(a),this.loaderBar.anchorTop=G.height/2-250,this.loaderBar.anchorLeft=G.width/2-He/2,this.loader.reset(),this.IsAdmin?this.loader.add(Lt):this.loader.add(jt);var s=new PIXI.Texture.from("peachImage/symbol.png"),l=new PIXI.Texture.from("peachImage/peach_logo_black.png"),h=new PIXI.UI.Sprite(s),c=new PIXI.UI.Sprite(l);h.width=He/2.55,h.height=He,c.width=200*n,c.height=44.58*i,h.anchorTop=G.height/2-h.height/2,c.anchorBottom=100,h.anchorLeft=G.width/2-h.width/2,c.anchorLeft=G.width/2-c.width/2,this.loader.onProgress.add(this.downloadProgress,this),this.loader.onComplete.once(this.gameLoaded,this),this.con.addChild(h,c),this.loader.load(),this.con.addChild(this.loaderBar)};Ye.prototype.downloadProgress=function(t){var e=t.progress/100;this.barfill.height=He-He*e},Ye.prototype.gameLoaded=function(){this.IsAdmin?G.changeScene(new Ae(this.url)):G.changeScene(new De(this.url))},Ye.prototype.update=function(t){},Ye.prototype.resize=function(t,e){};var qe=function(t){Ft.load({google:{families:["Noto Sans KR"]},active:function(t){console.log("font loaded!")}});var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=Math.max(document.documentElement.clientWidth-17,window.innerWidth-17||0);G.height=e,G.width=n,G.initialize(t);var i=new Ye(!1,t);G.changeScene(i)};var Ze=function(t){Ft.load({google:{families:["Noto Sans KR"]},active:function(t){console.log("font loaded!")}});var e=Math.max(document.documentElement.clientWidth,window.innerWidth),n=Math.max(document.documentElement.clientHeight,window.innerHeight);G.height=n,G.width=e,G.initialize(t);var i=new Ye(!0,t);G.changeScene(i)};var Ke=function(t,e){this.urlArr=t,this.app=new PIXI.Application({resolution:window.devicePixelRatio||1,antialias:!0,transparent:!0,width:window.innerWidth,height:window.innerHeight,autoDensity:!0}),this.now=e,this.onComplete()};Ke.prototype.onComplete=function(){for(var t=this,e=0;e<this.urlArr.length;e++)this["card"+(e+1)]=Qt.from(this.urlArr[e]);var n=new PIXI.Sprite(PIXI.Texture.WHITE),i=new PIXI.Sprite(PIXI.Texture.WHITE);i.width=this.app.view.width,i.height=this.app.view.height,i.tint=0,i.alpha=.4,n.tint=0,n.alpha=.6,n.width=this.app.view.width,n.height=this.app.view.height;var r=new PIXI.Sprite.from("/peachImage/round_left.png"),o=new PIXI.Sprite.from("/peachImage/round_right.png");r.interactive=o.interactive=n.interactive=!0,o.buttonMode=r.buttonMode=n.buttonMode=!0,r.width=r.height=o.width=o.height=66,r.y=o.y=this.app.view.height/2,r.x=.25*this.app.view.width,o.x=.75*this.app.view.width,r.anchor.set(.5),o.anchor.set(.5);var a=1===this.now?this.urlArr.length:this.now-1,s=this.now===this.urlArr.length?1:this.now+1;this.leftcard=new PIXI.Sprite.from(this["card"+a]),this.centecard=new PIXI.Sprite.from(this["card"+this.now]),this.rightcard=new PIXI.Sprite.from(this["card"+s]),this.leftcard.interactive=this.centecard.interactive=this.rightcard.interactive=!0,this.leftcard.anchor.set(0,.5),this.leftcard.x=38,this.leftcard.width=200,this.leftcard.height=300,this.rightcard.anchor.set(1,.5),this.rightcard.x=this.app.view.width-38,this.rightcard.width=200,this.rightcard.height=300,this.centecard.anchor.set(.5),this.centecard.x=this.app.view.width/2,this.centecard.width=380,this.centecard.height=520,this.leftcard.y=this.centecard.y=this.rightcard.y=this.app.view.height/2,this.app.stage.addChild(n,this.leftcard,this.rightcard,i,this.centecard,r,o),n.on("click",(function(){t.close()})),this.open=function(){t.app.stage.addChild(n,t.leftcard,t.rightcard,i,t.centecard,r,o)},this.close=function(){PIXI.utils.clearTextureCache();var e=t.app.view;t.app.view.parentNode.removeChild(e)},r.on("click",(function(){t.prevEvent(),t.changeTexture()})),o.on("click",(function(){t.nextEvent(),t.changeTexture()}))},Ke.prototype.changeTexture=function(){1===this.now?(this.leftcard.texture=this["card"+this.urlArr.length],this.rightcard.texture=this["card"+(this.now+1)]):this.now===this.urlArr.length?(this.leftcard.texture=this["card"+(this.now-1)],this.rightcard.texture=this.card1):(this.leftcard.texture=this["card"+(this.now-1)],this.rightcard.texture=this["card"+(this.now+1)]),this.centecard.texture=this["card"+this.now]},Ke.prototype.prevEvent=function(){this.now-=1,this.now<1&&(this.now=this.urlArr.length)},Ke.prototype.nextEvent=function(){this.now+=1,this.now>this.urlArr.length&&(this.now=1)},t.admin=function(t){document.querySelector("#pdf_upload").addEventListener("change",(function(e){var n=e.target.files[0];if("application/pdf"==n.type){zt.initialize(),zt.pdf=n;var i=n.name.replace(/(.pdf|.jpg|.jpeg|.gif)$/,""),r=i.split("#");zt.story_tag=i,zt.title=r[0],zt.isFirst=!0;var o=new FileReader;o.onload=function(){t();var e=new Uint8Array(this.result);new Ze(e,0)},o.readAsArrayBuffer(n)}else console.error(n.name,"is not a pdf file.")}))},t.client=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=null;function i(){alert("잘못된 접근입니다.")}function r(t){t.forEach((function(e,n){var i=e.lastIndexOf(".");"pdf"===e.substring(i+1,e.length).toLowerCase()?t.file(n.name).async("blob").then((function(t){new Response(t).arrayBuffer().then((function(t){var e=new Uint8Array(t);new qe(e)}))})):t.file(n.name).async("blob").then((function(t){t.text().then((function(t){var e=JSON.parse(t);zt.initialize(e),zt.title=e.title}))}))}))}e?(function(t,e){Z("GET","v2/hidden/story/detail?story_number="+t,e)}(t,(function(t){1e4===t.code&&i(),0===t.code&&(n=t.data.story.thumb_title_uuid,zt.isHidden=e)})),function(t,e){K("POST","v2/hidden/story/read",{story_number:t},e)}(t,(function(e){console.log("download_zip_hidden",e);var i=e;console.log("file",i);var o=document.getElementById("peach-bundle").getAttribute("data-s3-url-pub");if(i){zt.story_num=t;var a=Qt.from(o+"/"+n);zt.thumb_texture=a;var s=new FileReader;s.onload=function(t){Mt.loadAsync(t.target.result).then((function(t){r(t)}))},s.onerror=function(t){alert("파일을 열 수 없음",t)},s.readAsArrayBuffer(i)}else alert("파일이 없습니다")}))):Z("GET","v2/story/detail?story_number="+t,(function(o){var a;"login required"==o.message?(console.log("로그인이 필요해"),i()):"subscription required"==o.message&&(console.log("구독권한이 없음"),i()),n=o.data.story.thumb_title_uuid,0===o.code&&(zt.isHidden=e),a=function(e){var i=e,o=document.getElementById("peach-bundle").getAttribute("data-s3-url-pub");if(i){zt.story_num=t;var a=Qt.from(o+"/"+n);zt.thumb_texture=a;var s=new FileReader;s.onload=function(t){Mt.loadAsync(t.target.result).then((function(t){r(t)}))},s.onerror=function(t){alert("파일을 열 수 없음",t)},s.readAsArrayBuffer(i)}else alert("파일이 없습니다")},K("POST","v2/story/read",{story_number:t},a)}))},t.close=function(){document.body.removeChild(document.getElementById("printable")),document.body.removeChild(document.getElementById("canvas_wraper")),PIXI.utils.clearTextureCache()},t.edit=function(t){var e=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw");J(t,(function(n){if(0===n.code){switch(console.log(n.data.storyRaw.status),n.data.storyRaw.status){case 0:case 6:zt.state=0;break;case 1:case 7:default:zt.state=1;break;case 2:zt.state=2}console.log("스테이트",zt.state),zt.isFirst=!1;var i=n.data.storyRaw.data_uuid,r=new Headers;r.append("pragma","no-cache"),r.append("cache-control","no-cache"),fetch(e+"/"+i,{method:"GET",headers:r}).then((function(t){return t.blob()})).then((function(e){var n=e;if(n){zt.raw_num=t;var i=new FileReader;i.onload=function(t){Mt.loadAsync(t.target.result).then((function(t){!function(t){t.forEach((function(e,n){var i=e.lastIndexOf(".");"pdf"===e.substring(i+1,e.length).toLowerCase()?t.file(n.name).async("blob").then((function(t){var n=new File([t],e);zt.pdf=n,new Response(t).arrayBuffer().then((function(t){var e=new Uint8Array(t);new Ze(e)}))})):t.file(n.name).async("blob").then((function(t){t.text().then((function(t){var e=JSON.parse(t);console.log(e),zt.initialize(e),zt.title=e.title}))}))}))}(t)}))},i.readAsArrayBuffer(n)}}))}}))},t.peachSlide=function(t,e){return new Ke(t,e).app},t.preview=function(t,e){var n=document.getElementById("peach-bundle").getAttribute("data-s3-url-raw");if(void 0!==e){var i=new PIXI.Texture.from(n+"/"+e);zt.thumb_texture=i}J(t,(function(t){if(0===t.code){var e=t.data.storyRaw.data_uuid,i=new Headers;i.append("pragma","no-cache"),i.append("cache-control","no-cache"),fetch(n+"/"+e,{method:"GET",headers:i}).then((function(t){return t.blob()})).then((function(t){var e=t;if(e){var n=new FileReader;n.onload=function(t){Mt.loadAsync(t.target.result).then((function(t){!function(t){t.forEach((function(e,n){var i=e.lastIndexOf(".");"pdf"===e.substring(i+1,e.length).toLowerCase()?t.file(n.name).async("blob").then((function(t){new Response(t).arrayBuffer().then((function(t){G.isPrev=!0;var e=new Uint8Array(t);new qe(e)}))})):(console.log("나는 세팅파일",e,n),t.file(n.name).async("blob").then((function(t){t.text().then((function(t){var e=JSON.parse(t);zt.initialize(e),zt.title=e.title}))})))}))}(t)}))},n.readAsArrayBuffer(e)}}))}}))},t.setclose=function(t){Pe.setCloseFunc(t)},Object.defineProperty(t,"__esModule",{value:!0})}));
